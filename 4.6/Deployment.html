<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="en">
<head>
<meta charset="UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=edge"/>
<meta name="viewport" content="width=device-width, initial-scale=1.0"/>
<meta name="generator" content="Asciidoctor 2.0.23"/>
<meta name="description" content="Installation guide for deploying OpenShift on bare metal"/>
<meta name="keywords" content="OpenShift, baremetal, installation, ipi, Installer provisioned infrastructure"/>
<meta name="author" content="Deployment Integration Team"/>
<title>Deploying Installer Provisioned Infrastructure (IPI) of OpenShift on Bare Metal - 4.6</title>
<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:300,300italic,400,400italic,600,600italic%7CNoto+Serif:400,400italic,700,700italic%7CDroid+Sans+Mono:400,700"/>
<style>
/*! Asciidoctor default stylesheet | MIT License | https://asciidoctor.org */
/* Uncomment the following line when using as a custom stylesheet */
/* @import "https://fonts.googleapis.com/css?family=Open+Sans:300,300italic,400,400italic,600,600italic%7CNoto+Serif:400,400italic,700,700italic%7CDroid+Sans+Mono:400,700"; */
html{font-family:sans-serif;-webkit-text-size-adjust:100%}
a{background:none}
a:focus{outline:thin dotted}
a:active,a:hover{outline:0}
h1{font-size:2em;margin:.67em 0}
b,strong{font-weight:bold}
abbr{font-size:.9em}
abbr[title]{cursor:help;border-bottom:1px dotted #dddddf;text-decoration:none}
dfn{font-style:italic}
hr{height:0}
mark{background:#ff0;color:#000}
code,kbd,pre,samp{font-family:monospace;font-size:1em}
pre{white-space:pre-wrap}
q{quotes:"\201C" "\201D" "\2018" "\2019"}
small{font-size:80%}
sub,sup{font-size:75%;line-height:0;position:relative;vertical-align:baseline}
sup{top:-.5em}
sub{bottom:-.25em}
img{border:0}
svg:not(:root){overflow:hidden}
figure{margin:0}
audio,video{display:inline-block}
audio:not([controls]){display:none;height:0}
fieldset{border:1px solid silver;margin:0 2px;padding:.35em .625em .75em}
legend{border:0;padding:0}
button,input,select,textarea{font-family:inherit;font-size:100%;margin:0}
button,input{line-height:normal}
button,select{text-transform:none}
button,html input[type=button],input[type=reset],input[type=submit]{-webkit-appearance:button;cursor:pointer}
button[disabled],html input[disabled]{cursor:default}
input[type=checkbox],input[type=radio]{padding:0}
button::-moz-focus-inner,input::-moz-focus-inner{border:0;padding:0}
textarea{overflow:auto;vertical-align:top}
table{border-collapse:collapse;border-spacing:0}
*,::before,::after{box-sizing:border-box}
html,body{font-size:100%}
body{background:#fff;color:rgba(0,0,0,.8);padding:0;margin:0;font-family:"Noto Serif","DejaVu Serif",serif;line-height:1;position:relative;cursor:auto;-moz-tab-size:4;-o-tab-size:4;tab-size:4;word-wrap:anywhere;-moz-osx-font-smoothing:grayscale;-webkit-font-smoothing:antialiased}
a:hover{cursor:pointer}
img,object,embed{max-width:100%;height:auto}
object,embed{height:100%}
img{-ms-interpolation-mode:bicubic}
.left{float:left!important}
.right{float:right!important}
.text-left{text-align:left!important}
.text-right{text-align:right!important}
.text-center{text-align:center!important}
.text-justify{text-align:justify!important}
.hide{display:none}
img,object,svg{display:inline-block;vertical-align:middle}
textarea{height:auto;min-height:50px}
select{width:100%}
.subheader,.admonitionblock td.content>.title,.audioblock>.title,.exampleblock>.title,.imageblock>.title,.listingblock>.title,.literalblock>.title,.stemblock>.title,.openblock>.title,.paragraph>.title,.quoteblock>.title,table.tableblock>.title,.verseblock>.title,.videoblock>.title,.dlist>.title,.olist>.title,.ulist>.title,.qlist>.title,.hdlist>.title{line-height:1.45;color:#7a2518;font-weight:400;margin-top:0;margin-bottom:.25em}
div,dl,dt,dd,ul,ol,li,h1,h2,h3,#toctitle,.sidebarblock>.content>.title,h4,h5,h6,pre,form,p,blockquote,th,td{margin:0;padding:0}
a{color:#2156a5;text-decoration:underline;line-height:inherit}
a:hover,a:focus{color:#1d4b8f}
a img{border:0}
p{line-height:1.6;margin-bottom:1.25em;text-rendering:optimizeLegibility}
p aside{font-size:.875em;line-height:1.35;font-style:italic}
h1,h2,h3,#toctitle,.sidebarblock>.content>.title,h4,h5,h6{font-family:"Open Sans","DejaVu Sans",sans-serif;font-weight:300;font-style:normal;color:#ba3925;text-rendering:optimizeLegibility;margin-top:1em;margin-bottom:.5em;line-height:1.0125em}
h1 small,h2 small,h3 small,#toctitle small,.sidebarblock>.content>.title small,h4 small,h5 small,h6 small{font-size:60%;color:#e99b8f;line-height:0}
h1{font-size:2.125em}
h2{font-size:1.6875em}
h3,#toctitle,.sidebarblock>.content>.title{font-size:1.375em}
h4,h5{font-size:1.125em}
h6{font-size:1em}
hr{border:solid #dddddf;border-width:1px 0 0;clear:both;margin:1.25em 0 1.1875em}
em,i{font-style:italic;line-height:inherit}
strong,b{font-weight:bold;line-height:inherit}
small{font-size:60%;line-height:inherit}
code{font-family:"Droid Sans Mono","DejaVu Sans Mono",monospace;font-weight:400;color:rgba(0,0,0,.9)}
ul,ol,dl{line-height:1.6;margin-bottom:1.25em;list-style-position:outside;font-family:inherit}
ul,ol{margin-left:1.5em}
ul li ul,ul li ol{margin-left:1.25em;margin-bottom:0}
ul.circle{list-style-type:circle}
ul.disc{list-style-type:disc}
ul.square{list-style-type:square}
ul.circle ul:not([class]),ul.disc ul:not([class]),ul.square ul:not([class]){list-style:inherit}
ol li ul,ol li ol{margin-left:1.25em;margin-bottom:0}
dl dt{margin-bottom:.3125em;font-weight:bold}
dl dd{margin-bottom:1.25em}
blockquote{margin:0 0 1.25em;padding:.5625em 1.25em 0 1.1875em;border-left:1px solid #ddd}
blockquote,blockquote p{line-height:1.6;color:rgba(0,0,0,.85)}
@media screen and (min-width:768px){h1,h2,h3,#toctitle,.sidebarblock>.content>.title,h4,h5,h6{line-height:1.2}
h1{font-size:2.75em}
h2{font-size:2.3125em}
h3,#toctitle,.sidebarblock>.content>.title{font-size:1.6875em}
h4{font-size:1.4375em}}
table{background:#fff;margin-bottom:1.25em;border:1px solid #dedede;word-wrap:normal}
table thead,table tfoot{background:#f7f8f7}
table thead tr th,table thead tr td,table tfoot tr th,table tfoot tr td{padding:.5em .625em .625em;font-size:inherit;color:rgba(0,0,0,.8);text-align:left}
table tr th,table tr td{padding:.5625em .625em;font-size:inherit;color:rgba(0,0,0,.8)}
table tr.even,table tr.alt{background:#f8f8f7}
table thead tr th,table tfoot tr th,table tbody tr td,table tr td,table tfoot tr td{line-height:1.6}
h1,h2,h3,#toctitle,.sidebarblock>.content>.title,h4,h5,h6{line-height:1.2;word-spacing:-.05em}
h1 strong,h2 strong,h3 strong,#toctitle strong,.sidebarblock>.content>.title strong,h4 strong,h5 strong,h6 strong{font-weight:400}
.center{margin-left:auto;margin-right:auto}
.stretch{width:100%}
.clearfix::before,.clearfix::after,.float-group::before,.float-group::after{content:" ";display:table}
.clearfix::after,.float-group::after{clear:both}
:not(pre).nobreak{word-wrap:normal}
:not(pre).nowrap{white-space:nowrap}
:not(pre).pre-wrap{white-space:pre-wrap}
:not(pre):not([class^=L])>code{font-size:.9375em;font-style:normal!important;letter-spacing:0;padding:.1em .5ex;word-spacing:-.15em;background:#f7f7f8;border-radius:4px;line-height:1.45;text-rendering:optimizeSpeed}
pre{color:rgba(0,0,0,.9);font-family:"Droid Sans Mono","DejaVu Sans Mono",monospace;line-height:1.45;text-rendering:optimizeSpeed}
pre code,pre pre{color:inherit;font-size:inherit;line-height:inherit}
pre>code{display:block}
pre.nowrap,pre.nowrap pre{white-space:pre;word-wrap:normal}
em em{font-style:normal}
strong strong{font-weight:400}
.keyseq{color:rgba(51,51,51,.8)}
kbd{font-family:"Droid Sans Mono","DejaVu Sans Mono",monospace;display:inline-block;color:rgba(0,0,0,.8);font-size:.65em;line-height:1.45;background:#f7f7f7;border:1px solid #ccc;border-radius:3px;box-shadow:0 1px 0 rgba(0,0,0,.2),inset 0 0 0 .1em #fff;margin:0 .15em;padding:.2em .5em;vertical-align:middle;position:relative;top:-.1em;white-space:nowrap}
.keyseq kbd:first-child{margin-left:0}
.keyseq kbd:last-child{margin-right:0}
.menuseq,.menuref{color:#000}
.menuseq b:not(.caret),.menuref{font-weight:inherit}
.menuseq{word-spacing:-.02em}
.menuseq b.caret{font-size:1.25em;line-height:.8}
.menuseq i.caret{font-weight:bold;text-align:center;width:.45em}
b.button::before,b.button::after{position:relative;top:-1px;font-weight:400}
b.button::before{content:"[";padding:0 3px 0 2px}
b.button::after{content:"]";padding:0 2px 0 3px}
p a>code:hover{color:rgba(0,0,0,.9)}
#header,#content,#footnotes,#footer{width:100%;margin:0 auto;max-width:62.5em;*zoom:1;position:relative;padding-left:.9375em;padding-right:.9375em}
#header::before,#header::after,#content::before,#content::after,#footnotes::before,#footnotes::after,#footer::before,#footer::after{content:" ";display:table}
#header::after,#content::after,#footnotes::after,#footer::after{clear:both}
#content{margin-top:1.25em}
#content::before{content:none}
#header>h1:first-child{color:rgba(0,0,0,.85);margin-top:2.25rem;margin-bottom:0}
#header>h1:first-child+#toc{margin-top:8px;border-top:1px solid #dddddf}
#header>h1:only-child{border-bottom:1px solid #dddddf;padding-bottom:8px}
#header .details{border-bottom:1px solid #dddddf;line-height:1.45;padding-top:.25em;padding-bottom:.25em;padding-left:.25em;color:rgba(0,0,0,.6);display:flex;flex-flow:row wrap}
#header .details span:first-child{margin-left:-.125em}
#header .details span.email a{color:rgba(0,0,0,.85)}
#header .details br{display:none}
#header .details br+span::before{content:"\00a0\2013\00a0"}
#header .details br+span.author::before{content:"\00a0\22c5\00a0";color:rgba(0,0,0,.85)}
#header .details br+span#revremark::before{content:"\00a0|\00a0"}
#header #revnumber{text-transform:capitalize}
#header #revnumber::after{content:"\00a0"}
#content>h1:first-child:not([class]){color:rgba(0,0,0,.85);border-bottom:1px solid #dddddf;padding-bottom:8px;margin-top:0;padding-top:1rem;margin-bottom:1.25rem}
#toc{border-bottom:1px solid #e7e7e9;padding-bottom:.5em}
#toc>ul{margin-left:.125em}
#toc ul.sectlevel0>li>a{font-style:italic}
#toc ul.sectlevel0 ul.sectlevel1{margin:.5em 0}
#toc ul{font-family:"Open Sans","DejaVu Sans",sans-serif;list-style-type:none}
#toc li{line-height:1.3334;margin-top:.3334em}
#toc a{text-decoration:none}
#toc a:active{text-decoration:underline}
#toctitle{color:#7a2518;font-size:1.2em}
@media screen and (min-width:768px){#toctitle{font-size:1.375em}
body.toc2{padding-left:15em;padding-right:0}
body.toc2 #header>h1:nth-last-child(2){border-bottom:1px solid #dddddf;padding-bottom:8px}
#toc.toc2{margin-top:0!important;background:#f8f8f7;position:fixed;width:15em;left:0;top:0;border-right:1px solid #e7e7e9;border-top-width:0!important;border-bottom-width:0!important;z-index:1000;padding:1.25em 1em;height:100%;overflow:auto}
#toc.toc2 #toctitle{margin-top:0;margin-bottom:.8rem;font-size:1.2em}
#toc.toc2>ul{font-size:.9em;margin-bottom:0}
#toc.toc2 ul ul{margin-left:0;padding-left:1em}
#toc.toc2 ul.sectlevel0 ul.sectlevel1{padding-left:0;margin-top:.5em;margin-bottom:.5em}
body.toc2.toc-right{padding-left:0;padding-right:15em}
body.toc2.toc-right #toc.toc2{border-right-width:0;border-left:1px solid #e7e7e9;left:auto;right:0}}
@media screen and (min-width:1280px){body.toc2{padding-left:20em;padding-right:0}
#toc.toc2{width:20em}
#toc.toc2 #toctitle{font-size:1.375em}
#toc.toc2>ul{font-size:.95em}
#toc.toc2 ul ul{padding-left:1.25em}
body.toc2.toc-right{padding-left:0;padding-right:20em}}
#content #toc{border:1px solid #e0e0dc;margin-bottom:1.25em;padding:1.25em;background:#f8f8f7;border-radius:4px}
#content #toc>:first-child{margin-top:0}
#content #toc>:last-child{margin-bottom:0}
#footer{max-width:none;background:rgba(0,0,0,.8);padding:1.25em}
#footer-text{color:hsla(0,0%,100%,.8);line-height:1.44}
#content{margin-bottom:.625em}
.sect1{padding-bottom:.625em}
@media screen and (min-width:768px){#content{margin-bottom:1.25em}
.sect1{padding-bottom:1.25em}}
.sect1:last-child{padding-bottom:0}
.sect1+.sect1{border-top:1px solid #e7e7e9}
#content h1>a.anchor,h2>a.anchor,h3>a.anchor,#toctitle>a.anchor,.sidebarblock>.content>.title>a.anchor,h4>a.anchor,h5>a.anchor,h6>a.anchor{position:absolute;z-index:1001;width:1.5ex;margin-left:-1.5ex;display:block;text-decoration:none!important;visibility:hidden;text-align:center;font-weight:400}
#content h1>a.anchor::before,h2>a.anchor::before,h3>a.anchor::before,#toctitle>a.anchor::before,.sidebarblock>.content>.title>a.anchor::before,h4>a.anchor::before,h5>a.anchor::before,h6>a.anchor::before{content:"\00A7";font-size:.85em;display:block;padding-top:.1em}
#content h1:hover>a.anchor,#content h1>a.anchor:hover,h2:hover>a.anchor,h2>a.anchor:hover,h3:hover>a.anchor,#toctitle:hover>a.anchor,.sidebarblock>.content>.title:hover>a.anchor,h3>a.anchor:hover,#toctitle>a.anchor:hover,.sidebarblock>.content>.title>a.anchor:hover,h4:hover>a.anchor,h4>a.anchor:hover,h5:hover>a.anchor,h5>a.anchor:hover,h6:hover>a.anchor,h6>a.anchor:hover{visibility:visible}
#content h1>a.link,h2>a.link,h3>a.link,#toctitle>a.link,.sidebarblock>.content>.title>a.link,h4>a.link,h5>a.link,h6>a.link{color:#ba3925;text-decoration:none}
#content h1>a.link:hover,h2>a.link:hover,h3>a.link:hover,#toctitle>a.link:hover,.sidebarblock>.content>.title>a.link:hover,h4>a.link:hover,h5>a.link:hover,h6>a.link:hover{color:#a53221}
details,.audioblock,.imageblock,.literalblock,.listingblock,.stemblock,.videoblock{margin-bottom:1.25em}
details{margin-left:1.25rem}
details>summary{cursor:pointer;display:block;position:relative;line-height:1.6;margin-bottom:.625rem;outline:none;-webkit-tap-highlight-color:transparent}
details>summary::-webkit-details-marker{display:none}
details>summary::before{content:"";border:solid transparent;border-left:solid;border-width:.3em 0 .3em .5em;position:absolute;top:.5em;left:-1.25rem;transform:translateX(15%)}
details[open]>summary::before{border:solid transparent;border-top:solid;border-width:.5em .3em 0;transform:translateY(15%)}
details>summary::after{content:"";width:1.25rem;height:1em;position:absolute;top:.3em;left:-1.25rem}
.admonitionblock td.content>.title,.audioblock>.title,.exampleblock>.title,.imageblock>.title,.listingblock>.title,.literalblock>.title,.stemblock>.title,.openblock>.title,.paragraph>.title,.quoteblock>.title,table.tableblock>.title,.verseblock>.title,.videoblock>.title,.dlist>.title,.olist>.title,.ulist>.title,.qlist>.title,.hdlist>.title{text-rendering:optimizeLegibility;text-align:left;font-family:"Noto Serif","DejaVu Serif",serif;font-size:1rem;font-style:italic}
table.tableblock.fit-content>caption.title{white-space:nowrap;width:0}
.paragraph.lead>p,#preamble>.sectionbody>[class=paragraph]:first-of-type p{font-size:1.21875em;line-height:1.6;color:rgba(0,0,0,.85)}
.admonitionblock>table{border-collapse:separate;border:0;background:none;width:100%}
.admonitionblock>table td.icon{text-align:center;width:80px}
.admonitionblock>table td.icon img{max-width:none}
.admonitionblock>table td.icon .title{font-weight:bold;font-family:"Open Sans","DejaVu Sans",sans-serif;text-transform:uppercase}
.admonitionblock>table td.content{padding-left:1.125em;padding-right:1.25em;border-left:1px solid #dddddf;color:rgba(0,0,0,.6);word-wrap:anywhere}
.admonitionblock>table td.content>:last-child>:last-child{margin-bottom:0}
.exampleblock>.content{border:1px solid #e6e6e6;margin-bottom:1.25em;padding:1.25em;background:#fff;border-radius:4px}
.sidebarblock{border:1px solid #dbdbd6;margin-bottom:1.25em;padding:1.25em;background:#f3f3f2;border-radius:4px}
.sidebarblock>.content>.title{color:#7a2518;margin-top:0;text-align:center}
.exampleblock>.content>:first-child,.sidebarblock>.content>:first-child{margin-top:0}
.exampleblock>.content>:last-child,.exampleblock>.content>:last-child>:last-child,.exampleblock>.content .olist>ol>li:last-child>:last-child,.exampleblock>.content .ulist>ul>li:last-child>:last-child,.exampleblock>.content .qlist>ol>li:last-child>:last-child,.sidebarblock>.content>:last-child,.sidebarblock>.content>:last-child>:last-child,.sidebarblock>.content .olist>ol>li:last-child>:last-child,.sidebarblock>.content .ulist>ul>li:last-child>:last-child,.sidebarblock>.content .qlist>ol>li:last-child>:last-child{margin-bottom:0}
.literalblock pre,.listingblock>.content>pre{border-radius:4px;overflow-x:auto;padding:1em;font-size:.8125em}
@media screen and (min-width:768px){.literalblock pre,.listingblock>.content>pre{font-size:.90625em}}
@media screen and (min-width:1280px){.literalblock pre,.listingblock>.content>pre{font-size:1em}}
.literalblock pre,.listingblock>.content>pre:not(.highlight),.listingblock>.content>pre[class=highlight],.listingblock>.content>pre[class^="highlight "]{background:#f7f7f8}
.literalblock.output pre{color:#f7f7f8;background:rgba(0,0,0,.9)}
.listingblock>.content{position:relative}
.listingblock code[data-lang]::before{display:none;content:attr(data-lang);position:absolute;font-size:.75em;top:.425rem;right:.5rem;line-height:1;text-transform:uppercase;color:inherit;opacity:.5}
.listingblock:hover code[data-lang]::before{display:block}
.listingblock.terminal pre .command::before{content:attr(data-prompt);padding-right:.5em;color:inherit;opacity:.5}
.listingblock.terminal pre .command:not([data-prompt])::before{content:"$"}
.listingblock pre.highlightjs{padding:0}
.listingblock pre.highlightjs>code{padding:1em;border-radius:4px}
.listingblock pre.prettyprint{border-width:0}
.prettyprint{background:#f7f7f8}
pre.prettyprint .linenums{line-height:1.45;margin-left:2em}
pre.prettyprint li{background:none;list-style-type:inherit;padding-left:0}
pre.prettyprint li code[data-lang]::before{opacity:1}
pre.prettyprint li:not(:first-child) code[data-lang]::before{display:none}
table.linenotable{border-collapse:separate;border:0;margin-bottom:0;background:none}
table.linenotable td[class]{color:inherit;vertical-align:top;padding:0;line-height:inherit;white-space:normal}
table.linenotable td.code{padding-left:.75em}
table.linenotable td.linenos,pre.pygments .linenos{border-right:1px solid;opacity:.35;padding-right:.5em;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none}
pre.pygments span.linenos{display:inline-block;margin-right:.75em}
.quoteblock{margin:0 1em 1.25em 1.5em;display:table}
.quoteblock:not(.excerpt)>.title{margin-left:-1.5em;margin-bottom:.75em}
.quoteblock blockquote,.quoteblock p{color:rgba(0,0,0,.85);font-size:1.15rem;line-height:1.75;word-spacing:.1em;letter-spacing:0;font-style:italic;text-align:justify}
.quoteblock blockquote{margin:0;padding:0;border:0}
.quoteblock blockquote::before{content:"\201c";float:left;font-size:2.75em;font-weight:bold;line-height:.6em;margin-left:-.6em;color:#7a2518;text-shadow:0 1px 2px rgba(0,0,0,.1)}
.quoteblock blockquote>.paragraph:last-child p{margin-bottom:0}
.quoteblock .attribution{margin-top:.75em;margin-right:.5ex;text-align:right}
.verseblock{margin:0 1em 1.25em}
.verseblock pre{font-family:"Open Sans","DejaVu Sans",sans-serif;font-size:1.15rem;color:rgba(0,0,0,.85);font-weight:300;text-rendering:optimizeLegibility}
.verseblock pre strong{font-weight:400}
.verseblock .attribution{margin-top:1.25rem;margin-left:.5ex}
.quoteblock .attribution,.verseblock .attribution{font-size:.9375em;line-height:1.45;font-style:italic}
.quoteblock .attribution br,.verseblock .attribution br{display:none}
.quoteblock .attribution cite,.verseblock .attribution cite{display:block;letter-spacing:-.025em;color:rgba(0,0,0,.6)}
.quoteblock.abstract blockquote::before,.quoteblock.excerpt blockquote::before,.quoteblock .quoteblock blockquote::before{display:none}
.quoteblock.abstract blockquote,.quoteblock.abstract p,.quoteblock.excerpt blockquote,.quoteblock.excerpt p,.quoteblock .quoteblock blockquote,.quoteblock .quoteblock p{line-height:1.6;word-spacing:0}
.quoteblock.abstract{margin:0 1em 1.25em;display:block}
.quoteblock.abstract>.title{margin:0 0 .375em;font-size:1.15em;text-align:center}
.quoteblock.excerpt>blockquote,.quoteblock .quoteblock{padding:0 0 .25em 1em;border-left:.25em solid #dddddf}
.quoteblock.excerpt,.quoteblock .quoteblock{margin-left:0}
.quoteblock.excerpt blockquote,.quoteblock.excerpt p,.quoteblock .quoteblock blockquote,.quoteblock .quoteblock p{color:inherit;font-size:1.0625rem}
.quoteblock.excerpt .attribution,.quoteblock .quoteblock .attribution{color:inherit;font-size:.85rem;text-align:left;margin-right:0}
p.tableblock:last-child{margin-bottom:0}
td.tableblock>.content{margin-bottom:1.25em;word-wrap:anywhere}
td.tableblock>.content>:last-child{margin-bottom:-1.25em}
table.tableblock,th.tableblock,td.tableblock{border:0 solid #dedede}
table.grid-all>*>tr>*{border-width:1px}
table.grid-cols>*>tr>*{border-width:0 1px}
table.grid-rows>*>tr>*{border-width:1px 0}
table.frame-all{border-width:1px}
table.frame-ends{border-width:1px 0}
table.frame-sides{border-width:0 1px}
table.frame-none>colgroup+*>:first-child>*,table.frame-sides>colgroup+*>:first-child>*{border-top-width:0}
table.frame-none>:last-child>:last-child>*,table.frame-sides>:last-child>:last-child>*{border-bottom-width:0}
table.frame-none>*>tr>:first-child,table.frame-ends>*>tr>:first-child{border-left-width:0}
table.frame-none>*>tr>:last-child,table.frame-ends>*>tr>:last-child{border-right-width:0}
table.stripes-all>*>tr,table.stripes-odd>*>tr:nth-of-type(odd),table.stripes-even>*>tr:nth-of-type(even),table.stripes-hover>*>tr:hover{background:#f8f8f7}
th.halign-left,td.halign-left{text-align:left}
th.halign-right,td.halign-right{text-align:right}
th.halign-center,td.halign-center{text-align:center}
th.valign-top,td.valign-top{vertical-align:top}
th.valign-bottom,td.valign-bottom{vertical-align:bottom}
th.valign-middle,td.valign-middle{vertical-align:middle}
table thead th,table tfoot th{font-weight:bold}
tbody tr th{background:#f7f8f7}
tbody tr th,tbody tr th p,tfoot tr th,tfoot tr th p{color:rgba(0,0,0,.8);font-weight:bold}
p.tableblock>code:only-child{background:none;padding:0}
p.tableblock{font-size:1em}
ol{margin-left:1.75em}
ul li ol{margin-left:1.5em}
dl dd{margin-left:1.125em}
dl dd:last-child,dl dd:last-child>:last-child{margin-bottom:0}
li p,ul dd,ol dd,.olist .olist,.ulist .ulist,.ulist .olist,.olist .ulist{margin-bottom:.625em}
ul.checklist,ul.none,ol.none,ul.no-bullet,ol.no-bullet,ol.unnumbered,ul.unstyled,ol.unstyled{list-style-type:none}
ul.no-bullet,ol.no-bullet,ol.unnumbered{margin-left:.625em}
ul.unstyled,ol.unstyled{margin-left:0}
li>p:empty:only-child::before{content:"";display:inline-block}
ul.checklist>li>p:first-child{margin-left:-1em}
ul.checklist>li>p:first-child>.fa-square-o:first-child,ul.checklist>li>p:first-child>.fa-check-square-o:first-child{width:1.25em;font-size:.8em;position:relative;bottom:.125em}
ul.checklist>li>p:first-child>input[type=checkbox]:first-child{margin-right:.25em}
ul.inline{display:flex;flex-flow:row wrap;list-style:none;margin:0 0 .625em -1.25em}
ul.inline>li{margin-left:1.25em}
.unstyled dl dt{font-weight:400;font-style:normal}
ol.arabic{list-style-type:decimal}
ol.decimal{list-style-type:decimal-leading-zero}
ol.loweralpha{list-style-type:lower-alpha}
ol.upperalpha{list-style-type:upper-alpha}
ol.lowerroman{list-style-type:lower-roman}
ol.upperroman{list-style-type:upper-roman}
ol.lowergreek{list-style-type:lower-greek}
.hdlist>table,.colist>table{border:0;background:none}
.hdlist>table>tbody>tr,.colist>table>tbody>tr{background:none}
td.hdlist1,td.hdlist2{vertical-align:top;padding:0 .625em}
td.hdlist1{font-weight:bold;padding-bottom:1.25em}
td.hdlist2{word-wrap:anywhere}
.literalblock+.colist,.listingblock+.colist{margin-top:-.5em}
.colist td:not([class]):first-child{padding:.4em .75em 0;line-height:1;vertical-align:top}
.colist td:not([class]):first-child img{max-width:none}
.colist td:not([class]):last-child{padding:.25em 0}
.thumb,.th{line-height:0;display:inline-block;border:4px solid #fff;box-shadow:0 0 0 1px #ddd}
.imageblock.left{margin:.25em .625em 1.25em 0}
.imageblock.right{margin:.25em 0 1.25em .625em}
.imageblock>.title{margin-bottom:0}
.imageblock.thumb,.imageblock.th{border-width:6px}
.imageblock.thumb>.title,.imageblock.th>.title{padding:0 .125em}
.image.left,.image.right{margin-top:.25em;margin-bottom:.25em;display:inline-block;line-height:0}
.image.left{margin-right:.625em}
.image.right{margin-left:.625em}
a.image{text-decoration:none;display:inline-block}
a.image object{pointer-events:none}
sup.footnote,sup.footnoteref{font-size:.875em;position:static;vertical-align:super}
sup.footnote a,sup.footnoteref a{text-decoration:none}
sup.footnote a:active,sup.footnoteref a:active,#footnotes .footnote a:first-of-type:active{text-decoration:underline}
#footnotes{padding-top:.75em;padding-bottom:.75em;margin-bottom:.625em}
#footnotes hr{width:20%;min-width:6.25em;margin:-.25em 0 .75em;border-width:1px 0 0}
#footnotes .footnote{padding:0 .375em 0 .225em;line-height:1.3334;font-size:.875em;margin-left:1.2em;margin-bottom:.2em}
#footnotes .footnote a:first-of-type{font-weight:bold;text-decoration:none;margin-left:-1.05em}
#footnotes .footnote:last-of-type{margin-bottom:0}
#content #footnotes{margin-top:-.625em;margin-bottom:0;padding:.75em 0}
div.unbreakable{page-break-inside:avoid}
.big{font-size:larger}
.small{font-size:smaller}
.underline{text-decoration:underline}
.overline{text-decoration:overline}
.line-through{text-decoration:line-through}
.aqua{color:#00bfbf}
.aqua-background{background:#00fafa}
.black{color:#000}
.black-background{background:#000}
.blue{color:#0000bf}
.blue-background{background:#0000fa}
.fuchsia{color:#bf00bf}
.fuchsia-background{background:#fa00fa}
.gray{color:#606060}
.gray-background{background:#7d7d7d}
.green{color:#006000}
.green-background{background:#007d00}
.lime{color:#00bf00}
.lime-background{background:#00fa00}
.maroon{color:#600000}
.maroon-background{background:#7d0000}
.navy{color:#000060}
.navy-background{background:#00007d}
.olive{color:#606000}
.olive-background{background:#7d7d00}
.purple{color:#600060}
.purple-background{background:#7d007d}
.red{color:#bf0000}
.red-background{background:#fa0000}
.silver{color:#909090}
.silver-background{background:#bcbcbc}
.teal{color:#006060}
.teal-background{background:#007d7d}
.white{color:#bfbfbf}
.white-background{background:#fafafa}
.yellow{color:#bfbf00}
.yellow-background{background:#fafa00}
span.icon>.fa{cursor:default}
a span.icon>.fa{cursor:inherit}
.admonitionblock td.icon [class^="fa icon-"]{font-size:2.5em;text-shadow:1px 1px 2px rgba(0,0,0,.5);cursor:default}
.admonitionblock td.icon .icon-note::before{content:"\f05a";color:#19407c}
.admonitionblock td.icon .icon-tip::before{content:"\f0eb";text-shadow:1px 1px 2px rgba(155,155,0,.8);color:#111}
.admonitionblock td.icon .icon-warning::before{content:"\f071";color:#bf6900}
.admonitionblock td.icon .icon-caution::before{content:"\f06d";color:#bf3400}
.admonitionblock td.icon .icon-important::before{content:"\f06a";color:#bf0000}
.conum[data-value]{display:inline-block;color:#fff!important;background:rgba(0,0,0,.8);border-radius:50%;text-align:center;font-size:.75em;width:1.67em;height:1.67em;line-height:1.67em;font-family:"Open Sans","DejaVu Sans",sans-serif;font-style:normal;font-weight:bold}
.conum[data-value] *{color:#fff!important}
.conum[data-value]+b{display:none}
.conum[data-value]::after{content:attr(data-value)}
pre .conum[data-value]{position:relative;top:-.125em}
b.conum *{color:inherit!important}
.conum:not([data-value]):empty{display:none}
dt,th.tableblock,td.content,div.footnote{text-rendering:optimizeLegibility}
h1,h2,p,td.content,span.alt,summary{letter-spacing:-.01em}
p strong,td.content strong,div.footnote strong{letter-spacing:-.005em}
p,blockquote,dt,td.content,td.hdlist1,span.alt,summary{font-size:1.0625rem}
p{margin-bottom:1.25rem}
.sidebarblock p,.sidebarblock dt,.sidebarblock td.content,p.tableblock{font-size:1em}
.exampleblock>.content{background:#fffef7;border-color:#e0e0dc;box-shadow:0 1px 4px #e0e0dc}
.print-only{display:none!important}
@page{margin:1.25cm .75cm}
@media print{*{box-shadow:none!important;text-shadow:none!important}
html{font-size:80%}
a{color:inherit!important;text-decoration:underline!important}
a.bare,a[href^="#"],a[href^="mailto:"]{text-decoration:none!important}
a[href^="http:"]:not(.bare)::after,a[href^="https:"]:not(.bare)::after{content:"(" attr(href) ")";display:inline-block;font-size:.875em;padding-left:.25em}
abbr[title]{border-bottom:1px dotted}
abbr[title]::after{content:" (" attr(title) ")"}
pre,blockquote,tr,img,object,svg{page-break-inside:avoid}
thead{display:table-header-group}
svg{max-width:100%}
p,blockquote,dt,td.content{font-size:1em;orphans:3;widows:3}
h2,h3,#toctitle,.sidebarblock>.content>.title{page-break-after:avoid}
#header,#content,#footnotes,#footer{max-width:none}
#toc,.sidebarblock,.exampleblock>.content{background:none!important}
#toc{border-bottom:1px solid #dddddf!important;padding-bottom:0!important}
body.book #header{text-align:center}
body.book #header>h1:first-child{border:0!important;margin:2.5em 0 1em}
body.book #header .details{border:0!important;display:block;padding:0!important}
body.book #header .details span:first-child{margin-left:0!important}
body.book #header .details br{display:block}
body.book #header .details br+span::before{content:none!important}
body.book #toc{border:0!important;text-align:left!important;padding:0!important;margin:0!important}
body.book #toc,body.book #preamble,body.book h1.sect0,body.book .sect1>h2{page-break-before:always}
.listingblock code[data-lang]::before{display:block}
#footer{padding:0 .9375em}
.hide-on-print{display:none!important}
.print-only{display:block!important}
.hide-for-print{display:none!important}
.show-for-print{display:inherit!important}}
@media amzn-kf8,print{#header>h1:first-child{margin-top:1.25rem}
.sect1{padding:0!important}
.sect1+.sect1{border:0}
#footer{background:none}
#footer-text{color:rgba(0,0,0,.6);font-size:.9em}}
@media amzn-kf8{#header,#content,#footnotes,#footer{padding:0}}
</style>
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css"/>
<style>
pre.rouge table td { padding: 5px; }
pre.rouge table pre { margin: 0; }
pre.rouge, pre.rouge .w {
  color: #24292f;
  background-color: #f6f8fa;
}
pre.rouge .k, pre.rouge .kd, pre.rouge .kn, pre.rouge .kp, pre.rouge .kr, pre.rouge .kt, pre.rouge .kv {
  color: #cf222e;
}
pre.rouge .gr {
  color: #f6f8fa;
}
pre.rouge .gd {
  color: #82071e;
  background-color: #ffebe9;
}
pre.rouge .nb {
  color: #953800;
}
pre.rouge .nc {
  color: #953800;
}
pre.rouge .no {
  color: #953800;
}
pre.rouge .nn {
  color: #953800;
}
pre.rouge .sr {
  color: #116329;
}
pre.rouge .na {
  color: #116329;
}
pre.rouge .nt {
  color: #116329;
}
pre.rouge .gi {
  color: #116329;
  background-color: #dafbe1;
}
pre.rouge .ges {
  font-weight: bold;
  font-style: italic;
}
pre.rouge .kc {
  color: #0550ae;
}
pre.rouge .l, pre.rouge .ld, pre.rouge .m, pre.rouge .mb, pre.rouge .mf, pre.rouge .mh, pre.rouge .mi, pre.rouge .il, pre.rouge .mo, pre.rouge .mx {
  color: #0550ae;
}
pre.rouge .sb {
  color: #0550ae;
}
pre.rouge .bp {
  color: #0550ae;
}
pre.rouge .ne {
  color: #0550ae;
}
pre.rouge .nl {
  color: #0550ae;
}
pre.rouge .py {
  color: #0550ae;
}
pre.rouge .nv, pre.rouge .vc, pre.rouge .vg, pre.rouge .vi, pre.rouge .vm {
  color: #0550ae;
}
pre.rouge .o, pre.rouge .ow {
  color: #0550ae;
}
pre.rouge .gh {
  color: #0550ae;
  font-weight: bold;
}
pre.rouge .gu {
  color: #0550ae;
  font-weight: bold;
}
pre.rouge .s, pre.rouge .sa, pre.rouge .sc, pre.rouge .dl, pre.rouge .sd, pre.rouge .s2, pre.rouge .se, pre.rouge .sh, pre.rouge .sx, pre.rouge .s1, pre.rouge .ss {
  color: #0a3069;
}
pre.rouge .nd {
  color: #8250df;
}
pre.rouge .nf, pre.rouge .fm {
  color: #8250df;
}
pre.rouge .err {
  color: #f6f8fa;
  background-color: #82071e;
}
pre.rouge .c, pre.rouge .ch, pre.rouge .cd, pre.rouge .cm, pre.rouge .cp, pre.rouge .cpf, pre.rouge .c1, pre.rouge .cs {
  color: #6e7781;
}
pre.rouge .gl {
  color: #6e7781;
}
pre.rouge .gt {
  color: #6e7781;
}
pre.rouge .ni {
  color: #24292f;
}
pre.rouge .si {
  color: #24292f;
}
pre.rouge .ge {
  color: #24292f;
  font-style: italic;
}
pre.rouge .gs {
  color: #24292f;
  font-weight: bold;
}
</style>
<meta property="og:article:title" content="Deploying Installer Provisioned Infrastructure (IPI) of OpenShift on Bare Metal - 4.6" />
<meta property="og:article:type" content="article" />
<meta property="og:article:author" content="Deployment Integration Team">
<meta property="og:article:tag" content="OpenShift, baremetal, installation, ipi, Installer provisioned infrastructure" />
<script type="application/ld+json">
    {
        "@context": "https://schema.org",
        "@type": "Article",
        "headline": "Deploying Installer Provisioned Infrastructure (IPI) of OpenShift on Bare Metal - 4.6",
        "author": {
            "@type": "Person",
            "name": "Deployment Integration Team"
        },
        "keywords": "OpenShift, baremetal, installation, ipi, Installer provisioned infrastructure",
        "publisher": {
            "@type": "Organization",
            "name": "Deployment Integration Team"
        },
        "description": "Installation guide for deploying OpenShift on bare metal"
    }
</script>

<meta name=twitter:card content="summary">
<meta name=twitter:title content="Deploying Installer Provisioned Infrastructure (IPI) of OpenShift on Bare Metal - 4.6">
<meta name=twitter:description content="Installation guide for deploying OpenShift on bare metal">
</head>
<body id="ipi-install-installation-workflow" class="book toc2 toc-left">
<div id="header">
<h1>Deploying Installer Provisioned Infrastructure (IPI) of OpenShift on Bare Metal - 4.6</h1>
<div class="details">
<span id="author" class="author">Deployment Integration Team</span><br/>
<span id="email" class="email"><a href="https://github.com/openshift-kni/baremetal-deploy" class="bare">https://github.com/openshift-kni/baremetal-deploy</a></span><br/>
</div>
<div id="toc" class="toc2">
<div id="toctitle"></div>
<ul class="sectlevel1">
<li><a href="#ipi-install-overview">1. Overview</a></li>
<li><a href="#ipi-install-prerequisites">2. Prerequisites</a>
<ul class="sectlevel2">
<li><a href="#node-requirements_ipi-install-prerequisites">2.1. Node requirements</a></li>
<li><a href="#ipi-install-firmware-requirements-for-installing-with-virtual-media_ipi-install-prerequisites">2.2. Firmware requirements for installing with virtual media</a></li>
<li><a href="#network-requirements_ipi-install-prerequisites">2.3. Network requirements</a></li>
<li><a href="#configuring-nodes_ipi-install-prerequisites">2.4. Configuring nodes</a></li>
<li><a href="#out-of-band-management_ipi-install-prerequisites">2.5. Out-of-band management</a></li>
<li><a href="#required-data-for-installation_ipi-install-prerequisites">2.6. Required data for installation</a></li>
<li><a href="#validation-checklist-for-nodes_ipi-install-prerequisites">2.7. Validation checklist for nodes</a></li>
</ul>
</li>
<li><a href="#ipi-install-installation-workflow">3. Setting up the environment for an OpenShift installation</a>
<ul class="sectlevel2">
<li><a href="#installing-rhel-on-the-provisioner-node_ipi-install-installation-workflow">3.1. Installing RHEL on the provisioner node</a></li>
<li><a href="#preparing-the-provisioner-node-for-openshift-install_ipi-install-installation-workflow">3.2. Preparing the provisioner node for OpenShift Container Platform installation</a></li>
<li><a href="#retrieving-the-openshift-installer_ipi-install-installation-workflow">3.3. Retrieving the OpenShift Container Platform installer (GA Release)</a></li>
<li><a href="#extracting-the-openshift-installer_ipi-install-installation-workflow">3.4. Extracting the OpenShift Container Platform installer (GA Release)</a></li>
<li><a href="#ipi-install-creating-an-rhcos-images-cache_ipi-install-installation-workflow">3.5. Creating an RHCOS images cache (optional)</a></li>
<li><a href="#ipi-install-configuration-files">3.6. Configuration files</a>
<ul class="sectlevel3">
<li><a href="#configuring-the-install-config-file_ipi-install-configuration-files">3.6.1. Configuring the <code>install-config.yaml</code> file</a></li>
<li><a href="#ipi-install-setting-proxy-settings-within-install-config_ipi-install-configuration-files">3.6.2. Setting proxy settings within the <code>install-config.yaml</code> file (optional)</a></li>
<li><a href="#modifying-install-config-for-no-provisioning-network_ipi-install-configuration-files">3.6.3. Modifying the <code>install-config.yaml</code> file for no <code>provisioning</code> network (optional)</a></li>
<li><a href="#additional-install-config-parameters_ipi-install-configuration-files">3.6.4. Additional <code>install-config</code> parameters</a></li>
<li><a href="#bmc-addressing_ipi-install-configuration-files">3.6.5. BMC addressing</a>
<ul class="sectlevel4">
<li><a href="#bmc-addressing-for-dell-idrac_ipi-install-configuration-files">BMC addressing for Dell iDRAC</a></li>
<li><a href="#bmc-addressing-for-hpe-ilo_ipi-install-configuration-files">BMC addressing for HPE iLO</a></li>
<li><a href="#bmc-addressing-for-hpe-ilo_ipi-install-configuration-files">BMC addressing for KVM with sushy-tools Redfish emulator</a></li>
</ul>
</li>
<li><a href="#root-device-hints_ipi-install-configuration-files">3.6.6. Root device hints</a></li>
<li><a href="#creating-the-openshift-manifests_ipi-install-configuration-files">3.6.7. Creating the OpenShift Container Platform manifests</a></li>
</ul>
</li>
<li><a href="#ipi-install-creating-a-disconnected-registry_ipi-install-configuration-files">3.7. Creating a disconnected registry (optional)</a>
<ul class="sectlevel3">
<li><a href="#_preparing_the_registry_node_to_host_the_mirrored_registry_optional">3.7.1. Preparing the registry node to host the mirrored registry (optional)</a></li>
<li><a href="#_generating_the_self_signed_certificate_optional">3.7.2. Generating the self-signed certificate (optional)</a></li>
<li><a href="#_creating_the_registry_podman_container_optional">3.7.3. Creating the registry podman container (optional)</a></li>
<li><a href="#_copy_and_update_the_pull_secret_optional">3.7.4. Copy and update the pull-secret (optional)</a></li>
<li><a href="#_mirroring_the_repository_optional">3.7.5. Mirroring the repository (optional)</a></li>
<li><a href="#_modify_the_install_config_yaml_file_to_use_the_disconnected_registry_optional">3.7.6. Modify the <code>install-config.yaml</code> file to use the disconnected registry (optional)</a></li>
</ul>
</li>
<li><a href="#deploying-routers-on-worker-nodes_ipi-install-configuration-files">3.8. Deploying routers on worker nodes</a></li>
<li><a href="#validation-checklist-for-installation_ipi-install-configuration-files">3.9. Validation checklist for installation</a></li>
<li><a href="#deploying-the-cluster-via-the-openshift-installer_ipi-install-configuration-files">3.10. Deploying the cluster via the OpenShift Container Platform installer</a></li>
<li><a href="#ipi-install-troubleshooting-following-the-installation_ipi-install-configuration-files">3.11. Following the installation</a></li>
</ul>
</li>
<li><a href="#ipi-install-upstream-day2">4. Day 2 operations</a>
<ul class="sectlevel2">
<li><a href="#accessing-the-web-console_ipi-install-configuration-files">4.1. Accessing the web console</a></li>
<li><a href="#backing-up-the-cluster-configuration_ipi-install-configuration-files">4.2. Backing up the cluster configuration</a></li>
<li><a href="#ipi-install-expanding-the-cluster">4.3. Expanding the cluster</a>
<ul class="sectlevel3">
<li><a href="#preparing-the-bare-metal-node_ipi-install-expanding">4.3.1. Preparing the bare metal node</a></li>
<li><a href="#preparing-to-deploy-with-virtual-media-on-the-baremetal-network_ipi-install-expanding">4.3.2. Preparing to deploy with Virtual Media on the baremetal network</a>
<ul class="sectlevel4">
<li><a href="#ipi-install-diagnosing-duplicate-mac-address_ipi-install-expanding">Diagnosing a duplicate MAC address when provisioning a new host in the cluster</a></li>
</ul>
</li>
<li><a href="#provisioning-the-bare-metal-node_ipi-install-expanding">4.3.3. Provisioning the bare metal node</a></li>
<li><a href="#preparing-the-provisioner-node-to-be-deployed-as-a-worker-node_ipi-install-expanding">4.3.4. Preparing the provisioner node to be deployed as a worker node</a></li>
<li><a href="#adding-a-worker-node-to-an-existing-cluster_ipi-install-expanding">4.3.5. Adding a worker node to an existing cluster</a>
<ul class="sectlevel4">
<li><a href="#ipi-install-upstream-dns-records-for-the-worker">Appending DNS records</a>
<ul class="sectlevel5">
<li><a href="#appending-dns-records-for-the worker-2-old-provisioner-on-a-DNS-server-option1_ipi-install-expanding">Configuring Bind (Option 1)</a></li>
<li><a href="#appending-dns-records-for-the worker-2-old-provisioner-using-dnsmasq-option2_ipi-install-expanding">Configuring dnsmasq (Option 2)</a></li>
</ul>
</li>
<li><a href="#ipi-install-upstream-dhco-for-the-worker">Appending DHCP reservations</a>
<ul class="sectlevel5">
<li><a href="#creating-dhcp-reservations-for-the worker-2-old-provisioner-on-a-DHCP-server-option1_ipi-install-expanding">Configuring dhcpd (Option 1)</a></li>
<li><a href="#creating-dhcp-reservations-for-the worker-2-old-provisioner-using-dnsmasq-option2_ipi-install-expanding">Configuring dnsmasq (Option 2)</a></li>
</ul>
</li>
<li><a href="#deploying-the-provisioner-node-as-a-worker-node-using-metal3_ipi-install-expanding">Deploying the provisioner node as a worker node using Metal3</a></li>
</ul>
</li>
</ul>
</li>
</ul>
</li>
<li><a href="#ipi-install-upstream-appendix">5. Appendix</a>
<ul class="sectlevel2">
<li><a href="#ipi-install-upstream-troubleshooting">5.1. Troubleshooting</a></li>
<li><a href="#DNS">5.2. Creating DNS Records</a>
<ul class="sectlevel3">
<li><a href="#creating-dns-records-on-a-dns-server-option1_ipi-install-expanding">5.2.1. Configuring Bind (Option 1)</a></li>
<li><a href="#creating-dns-records-using-dnsmasq-option2_ipi-install-expanding">5.2.2. Configuring dnsmasq (Option 2)</a></li>
</ul>
</li>
<li><a href="#DHCP">5.3. Creating DHCP reservations</a>
<ul class="sectlevel3">
<li><a href="#creating-dhcp-reservations-option1_ipi-install-expanding">5.3.1. Configuring dhcpd (Option 1)</a></li>
<li><a href="#creating-dhcp-reservations-using-dnsmasq-option2_ipi-install-expanding">5.3.2. Configuring dnsmasq (Option 2)</a></li>
</ul>
</li>
</ul>
</li>
</ul>
</div>
</div>
<div id="content">
<div id="preamble">
<div class="sectionbody">
<div class="admonitionblock tip">
<table>
<tr>
<td class="icon">
<i class="fa icon-tip" title="Tip"></i>
</td>
<td class="content">
<div class="paragraph">
<p><a href="Deployment.pdf">Download</a> the PDF version of this document or visit <a href="https://openshift-kni.github.io/baremetal-deploy/" class="bare">https://openshift-kni.github.io/baremetal-deploy/</a></p>
</div>
</td>
</tr>
</table>
</div>
</div>
</div>
<div class="sect1">
<h2 id="ipi-install-overview"><a class="link" href="#ipi-install-overview">1. Overview</a></h2>
<div class="sectionbody">
<div class="paragraph">
<p>Installer-provisioned installation provides support for installing OpenShift Container Platform on bare metal nodes. This guide provides a methodology to achieving a successful installation.</p>
</div>
<div class="paragraph">
<p>During installer-provisioned installation on bare metal, the installer on the bare metal node labeled as <code>provisioner</code> creates a bootstrap virtual machine (VM). The role of the bootstrap VM is to assist in the process of deploying an OpenShift Container Platform cluster. The bootstrap VM connects to the <code>baremetal</code> network and to the <code>provisioning</code> network, if present, via the network bridges.</p>
</div>
<div class="imageblock">
<div class="content">
<img src="data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSI3NjAiIGhlaWdodD0iNDQzIj48ZGVmcz48cGF0dGVybiBpZD0iYjA5ZmYwOGUtZDNlOC00NmNlLWI2OTUtM2I2ODk4ZmZiZWYwIiBkYXRhLW5hbWU9ImRpYWdpbmFsIGhhc2ggKGdyYXkpIiB3aWR0aD0iNTAiIGhlaWdodD0iNTAiIHBhdHRlcm5Vbml0cz0idXNlclNwYWNlT25Vc2UiPjxwYXRoIGNsYXNzPSJiZjBlNDA3Yy04YTJhLTQ1OGItOWY0My1kMjg3Y2MyNmI5MTMiIGQ9Ik0wIDBoNTB2NTBIMHoiLz48cGF0aCBjbGFzcz0iZmM5M2E1M2ItNWYzOS00M2E3LTkxOWMtNmUzMjhjOGExYzY4IiBkPSJNNTAgNTB2LjcwN2wuNzA3LS43MDdINTB6TTU0Ljg0OSA1MEw1MCA1NC44NDl2MS40MTRMNTYuMjYzIDUwaC0xLjQxNHpNNjAuNDA0IDUwTDUwIDYwLjQwNHYxLjQxNEw2MS44MTggNTBoLTEuNDE0ek02NS45NiA1MEw1MCA2NS45NnYxLjQxNEw2Ny4zNzQgNTBINjUuOTZ6TTcxLjUxNSA1MEw1MCA3MS41MTV2MS40MTRMNzIuOTI5IDUwaC0xLjQxNHpNNzcuMDcxIDUwTDUwIDc3LjA3MXYxLjQxNEw3OC40ODUgNTBoLTEuNDE0ek04Mi42MjYgNTBMNTAgODIuNjI2djEuNDE0TDg0LjA0MSA1MGgtMS40MTV6TTg4LjE4MiA1MEw1MCA4OC4xODJ2MS40MTRMODkuNTk2IDUwaC0xLjQxNHpNOTMuNzM3IDUwTDUwIDkzLjczN3YxLjQxNEw5NS4xNTEgNTBoLTEuNDE0ek0xMDAgNTBoLS43MDdMNTAgOTkuMjkzVjEwMGguNzA3TDEwMCA1MC43MDdWNTB6Ii8+PGc+PHBhdGggY2xhc3M9ImZjOTNhNTNiLTVmMzktNDNhNy05MTljLTZlMzI4YzhhMWM2OCIgZD0iTTAgNTB2LjcwN0wuNzA3IDUwSDB6TTQuODQ5IDUwTDAgNTQuODQ5djEuNDE0TDYuMjYzIDUwSDQuODQ5ek0xMC40MDQgNTBMMCA2MC40MDR2MS40MTRMMTEuODE4IDUwaC0xLjQxNHpNMTUuOTYgNTBMMCA2NS45NnYxLjQxNEwxNy4zNzQgNTBIMTUuOTZ6TTIxLjUxNSA1MEwwIDcxLjUxNXYxLjQxNEwyMi45MjkgNTBoLTEuNDE0ek0yNy4wNzEgNTBMMCA3Ny4wNzF2MS40MTRMMjguNDg1IDUwaC0xLjQxNHpNMzIuNjI2IDUwTDAgODIuNjI2djEuNDE0TDM0LjA0MSA1MGgtMS40MTV6TTM4LjE4MiA1MEwwIDg4LjE4MnYxLjQxNEwzOS41OTYgNTBoLTEuNDE0ek00My43MzcgNTBMMCA5My43Mzd2MS40MTRMNDUuMTUxIDUwaC0xLjQxNHpNNTAgNTBoLS43MDdMMCA5OS4yOTNWMTAwaC43MDdMNTAgNTAuNzA3VjUweiIvPjwvZz48cGF0aCBjbGFzcz0iZmM5M2E1M2ItNWYzOS00M2E3LTkxOWMtNmUzMjhjOGExYzY4IiBkPSJNMCA1MGgtLjcwN0wtNTAgOTkuMjkzVjEwMGguNzA3TDAgNTAuNzA3VjUweiIvPjxnPjxwYXRoIGNsYXNzPSJmYzkzYTUzYi01ZjM5LTQzYTctOTE5Yy02ZTMyOGM4YTFjNjgiIGQ9Ik01MCAwdi43MDdMNTAuNzA3IDBINTB6TTU0Ljg0OSAwTDUwIDQuODQ5djEuNDE0TDU2LjI2MyAwaC0xLjQxNHpNNjAuNDA0IDBMNTAgMTAuNDA0djEuNDE0TDYxLjgxOCAwaC0xLjQxNHpNNjUuOTYgMEw1MCAxNS45NnYxLjQxNEw2Ny4zNzQgMEg2NS45NnpNNzEuNTE1IDBMNTAgMjEuNTE1djEuNDE0TDcyLjkyOSAwaC0xLjQxNHpNNzcuMDcxIDBMNTAgMjcuMDcxdjEuNDE0TDc4LjQ4NSAwaC0xLjQxNHpNODIuNjI2IDBMNTAgMzIuNjI2djEuNDE0TDg0LjA0MSAwaC0xLjQxNXpNODguMTgyIDBMNTAgMzguMTgydjEuNDE0TDg5LjU5NiAwaC0xLjQxNHpNOTMuNzM3IDBMNTAgNDMuNzM3djEuNDE0TDk1LjE1MSAwaC0xLjQxNHpNMTAwIDBoLS43MDdMNTAgNDkuMjkzVjUwaC43MDdMMTAwIC43MDdWMHoiLz48L2c+PGc+PHBhdGggY2xhc3M9ImZjOTNhNTNiLTVmMzktNDNhNy05MTljLTZlMzI4YzhhMWM2OCIgZD0iTTAgMHYuNzA3TC43MDcgMEgwek00Ljg0OSAwTDAgNC44NDl2MS40MTRMNi4yNjMgMEg0Ljg0OXpNMTAuNDA0IDBMMCAxMC40MDR2MS40MTRMMTEuODE4IDBoLTEuNDE0ek0xNS45NiAwTDAgMTUuOTZ2MS40MTRMMTcuMzc0IDBIMTUuOTZ6TTIxLjUxNSAwTDAgMjEuNTE1djEuNDE0TDIyLjkyOSAwaC0xLjQxNHpNMjcuMDcxIDBMMCAyNy4wNzF2MS40MTRMMjguNDg1IDBoLTEuNDE0ek0zMi42MjYgMEwwIDMyLjYyNnYxLjQxNEwzNC4wNDEgMGgtMS40MTV6TTM4LjE4MiAwTDAgMzguMTgydjEuNDE0TDM5LjU5NiAwaC0xLjQxNHpNNDMuNzM3IDBMMCA0My43Mzd2MS40MTRMNDUuMTUxIDBoLTEuNDE0ek01MCAwaC0uNzA3TDAgNDkuMjkzVjUwaC43MDdMNTAgLjcwN1Ywek02LjI2MyA1MEw1MCA2LjI2MlY0Ljg0OEw0Ljg0OSA1MGgxLjQxNHpNMTEuODE4IDUwTDUwIDExLjgxOHYtMS40MTRMMTAuNDA0IDUwaDEuNDE0ek0xNy4zNzQgNTBMNTAgMTcuMzc0VjE1Ljk2TDE1Ljk2IDUwaDEuNDE0ek0yMi45MjkgNTBMNTAgMjIuOTI5di0xLjQxNEwyMS41MTUgNTBoMS40MTR6TTI4LjQ4NSA1MEw1MCAyOC40ODV2LTEuNDE0TDI3LjA3MSA1MGgxLjQxNHpNMzQuMDQgNTBMNTAgMzQuMDR2LTEuNDE0TDMyLjYyNiA1MGgxLjQxNHpNMzkuNTk2IDUwTDUwIDM5LjU5NnYtMS40MTRMMzguMTgyIDUwaDEuNDE0ek00NS4xNTEgNTBMNTAgNDUuMTUxdi0xLjQxNEw0My43MzcgNTBoMS40MTR6TTUwIDUwdi0uNzA3bC0uNzA3LjcwN0g1MHoiLz48L2c+PGc+PHBhdGggY2xhc3M9ImZjOTNhNTNiLTVmMzktNDNhNy05MTljLTZlMzI4YzhhMWM2OCIgZD0iTTAgMGgtLjcwN0wtNTAgNDkuMjkzVjUwaC43MDdMMCAuNzA3VjB6TS00My43MzcgNTBMMCA2LjI2MlY0Ljg0OEwtNDUuMTUxIDUwaDEuNDE0ek0tMzguMTgyIDUwTDAgMTEuODE4di0xLjQxNEwtMzkuNTk2IDUwaDEuNDE0ek0tMzIuNjI2IDUwTDAgMTcuMzc0VjE1Ljk2TC0zNC4wNCA1MGgxLjQxNHpNLTI3LjA3MSA1MEwwIDIyLjkyOXYtMS40MTRMLTI4LjQ4NSA1MGgxLjQxNHpNLTIxLjUxNSA1MEwwIDI4LjQ4NXYtMS40MTRMLTIyLjkyOSA1MGgxLjQxNHpNLTE1Ljk2IDUwTDAgMzQuMDR2LTEuNDE0TC0xNy4zNzQgNTBoMS40MTR6TS0xMC40MDQgNTBMMCAzOS41OTZ2LTEuNDE0TC0xMS44MTggNTBoMS40MTR6TS00Ljg0OSA1MEwwIDQ1LjE1MXYtMS40MTRMLTYuMjYzIDUwaDEuNDE0ek0wIDUwdi0uNzA3TC0uNzA3IDUwSDB6Ii8+PC9nPjxwYXRoIGNsYXNzPSJmYzkzYTUzYi01ZjM5LTQzYTctOTE5Yy02ZTMyOGM4YTFjNjgiIGQ9Ik0xMDAtNTBoLS43MDdMNTAtLjcwN1YwaC43MDdMMTAwLTQ5LjI5M1YtNTB6Ii8+PGc+PHBhdGggY2xhc3M9ImZjOTNhNTNiLTVmMzktNDNhNy05MTljLTZlMzI4YzhhMWM2OCIgZD0iTTUwLTUwaC0uNzA3TDAtLjcwN1YwaC43MDdMNTAtNDkuMjkzVi01MHpNNi4yNjMgMEw1MC00My43Mzh2LTEuNDE0TDQuODQ5IDBoMS40MTR6TTExLjgxOCAwTDUwLTM4LjE4MnYtMS40MTRMMTAuNDA0IDBoMS40MTR6TTE3LjM3NCAwTDUwLTMyLjYyNnYtMS40MTRMMTUuOTYgMGgxLjQxNHpNMjIuOTI5IDBMNTAtMjcuMDcxdi0xLjQxNEwyMS41MTUgMGgxLjQxNHpNMjguNDg1IDBMNTAtMjEuNTE1di0xLjQxNEwyNy4wNzEgMGgxLjQxNHpNMzQuMDQgMEw1MC0xNS45NnYtMS40MTRMMzIuNjI2IDBoMS40MTR6TTM5LjU5NiAwTDUwLTEwLjQwNHYtMS40MTRMMzguMTgyIDBoMS40MTR6TTQ1LjE1MSAwTDUwLTQuODQ5di0xLjQxNEw0My43MzcgMGgxLjQxNHpNNTAgMHYtLjcwN0w0OS4yOTMgMEg1MHoiLz48L2c+PGc+PHBhdGggY2xhc3M9ImZjOTNhNTNiLTVmMzktNDNhNy05MTljLTZlMzI4YzhhMWM2OCIgZD0iTTAtNTBoLS43MDdMLTUwLS43MDdWMGguNzA3TDAtNDkuMjkzVi01MHpNLTQzLjczNyAwTDAtNDMuNzM4di0xLjQxNEwtNDUuMTUxIDBoMS40MTR6TS0zOC4xODIgMEwwLTM4LjE4MnYtMS40MTRMLTM5LjU5NiAwaDEuNDE0ek0tMzIuNjI2IDBMMC0zMi42MjZ2LTEuNDE0TC0zNC4wNCAwaDEuNDE0ek0tMjcuMDcxIDBMMC0yNy4wNzF2LTEuNDE0TC0yOC40ODUgMGgxLjQxNHpNLTIxLjUxNSAwTDAtMjEuNTE1di0xLjQxNEwtMjIuOTI5IDBoMS40MTR6TS0xNS45NiAwTDAtMTUuOTZ2LTEuNDE0TC0xNy4zNzQgMGgxLjQxNHpNLTEwLjQwNCAwTDAtMTAuNDA0di0xLjQxNEwtMTEuODE4IDBoMS40MTR6TS00Ljg0OSAwTDAtNC44NDl2LTEuNDE0TC02LjI2MyAwaDEuNDE0ek0wIDB2LS43MDdMLS43MDcgMEgweiIvPjwvZz48L3BhdHRlcm4+PHBhdHRlcm4gaWQ9ImIwZDc1MzgzLTUxMWYtNDQ4OS05NjhlLTc4MzM4MDNjYjVjOSIgZGF0YS1uYW1lPSJkaWFnaW5hbCBoYXNoIChncmF5KSIgd2lkdGg9IjUwIiBoZWlnaHQ9IjUwIiBwYXR0ZXJuVHJhbnNmb3JtPSJ0cmFuc2xhdGUoLTEyNC41NjkgMTkwLjAyMykiIHBhdHRlcm5Vbml0cz0idXNlclNwYWNlT25Vc2UiPjxwYXRoIGNsYXNzPSJiZjBlNDA3Yy04YTJhLTQ1OGItOWY0My1kMjg3Y2MyNmI5MTMiIGQ9Ik0wIDBoNTB2NTBIMHoiLz48cGF0aCBjbGFzcz0iZmM5M2E1M2ItNWYzOS00M2E3LTkxOWMtNmUzMjhjOGExYzY4IiBkPSJNNTAgNTB2LjcwN2wuNzA3LS43MDdINTB6TTU0Ljg0OSA1MEw1MCA1NC44NDl2MS40MTRMNTYuMjYzIDUwaC0xLjQxNHpNNjAuNDA0IDUwTDUwIDYwLjQwNHYxLjQxNEw2MS44MTggNTBoLTEuNDE0ek02NS45NiA1MEw1MCA2NS45NnYxLjQxNEw2Ny4zNzQgNTBINjUuOTZ6TTcxLjUxNSA1MEw1MCA3MS41MTV2MS40MTRMNzIuOTI5IDUwaC0xLjQxNHpNNzcuMDcxIDUwTDUwIDc3LjA3MXYxLjQxNEw3OC40ODUgNTBoLTEuNDE0ek04Mi42MjYgNTBMNTAgODIuNjI2djEuNDE0TDg0LjA0MSA1MGgtMS40MTV6TTg4LjE4MiA1MEw1MCA4OC4xODJ2MS40MTRMODkuNTk2IDUwaC0xLjQxNHpNOTMuNzM3IDUwTDUwIDkzLjczN3YxLjQxNEw5NS4xNTEgNTBoLTEuNDE0ek0xMDAgNTBoLS43MDdMNTAgOTkuMjkzVjEwMGguNzA3TDEwMCA1MC43MDdWNTB6Ii8+PGc+PHBhdGggY2xhc3M9ImZjOTNhNTNiLTVmMzktNDNhNy05MTljLTZlMzI4YzhhMWM2OCIgZD0iTTAgNTB2LjcwN0wuNzA3IDUwSDB6TTQuODQ5IDUwTDAgNTQuODQ5djEuNDE0TDYuMjYzIDUwSDQuODQ5ek0xMC40MDQgNTBMMCA2MC40MDR2MS40MTRMMTEuODE4IDUwaC0xLjQxNHpNMTUuOTYgNTBMMCA2NS45NnYxLjQxNEwxNy4zNzQgNTBIMTUuOTZ6TTIxLjUxNSA1MEwwIDcxLjUxNXYxLjQxNEwyMi45MjkgNTBoLTEuNDE0ek0yNy4wNzEgNTBMMCA3Ny4wNzF2MS40MTRMMjguNDg1IDUwaC0xLjQxNHpNMzIuNjI2IDUwTDAgODIuNjI2djEuNDE0TDM0LjA0MSA1MGgtMS40MTV6TTM4LjE4MiA1MEwwIDg4LjE4MnYxLjQxNEwzOS41OTYgNTBoLTEuNDE0ek00My43MzcgNTBMMCA5My43Mzd2MS40MTRMNDUuMTUxIDUwaC0xLjQxNHpNNTAgNTBoLS43MDdMMCA5OS4yOTNWMTAwaC43MDdMNTAgNTAuNzA3VjUweiIvPjwvZz48cGF0aCBjbGFzcz0iZmM5M2E1M2ItNWYzOS00M2E3LTkxOWMtNmUzMjhjOGExYzY4IiBkPSJNMCA1MGgtLjcwN0wtNTAgOTkuMjkzVjEwMGguNzA3TDAgNTAuNzA3VjUweiIvPjxnPjxwYXRoIGNsYXNzPSJmYzkzYTUzYi01ZjM5LTQzYTctOTE5Yy02ZTMyOGM4YTFjNjgiIGQ9Ik01MCAwdi43MDdMNTAuNzA3IDBINTB6TTU0Ljg0OSAwTDUwIDQuODQ5djEuNDE0TDU2LjI2MyAwaC0xLjQxNHpNNjAuNDA0IDBMNTAgMTAuNDA0djEuNDE0TDYxLjgxOCAwaC0xLjQxNHpNNjUuOTYgMEw1MCAxNS45NnYxLjQxNEw2Ny4zNzQgMEg2NS45NnpNNzEuNTE1IDBMNTAgMjEuNTE1djEuNDE0TDcyLjkyOSAwaC0xLjQxNHpNNzcuMDcxIDBMNTAgMjcuMDcxdjEuNDE0TDc4LjQ4NSAwaC0xLjQxNHpNODIuNjI2IDBMNTAgMzIuNjI2djEuNDE0TDg0LjA0MSAwaC0xLjQxNXpNODguMTgyIDBMNTAgMzguMTgydjEuNDE0TDg5LjU5NiAwaC0xLjQxNHpNOTMuNzM3IDBMNTAgNDMuNzM3djEuNDE0TDk1LjE1MSAwaC0xLjQxNHpNMTAwIDBoLS43MDdMNTAgNDkuMjkzVjUwaC43MDdMMTAwIC43MDdWMHoiLz48L2c+PGc+PHBhdGggY2xhc3M9ImZjOTNhNTNiLTVmMzktNDNhNy05MTljLTZlMzI4YzhhMWM2OCIgZD0iTTAgMHYuNzA3TC43MDcgMEgwek00Ljg0OSAwTDAgNC44NDl2MS40MTRMNi4yNjMgMEg0Ljg0OXpNMTAuNDA0IDBMMCAxMC40MDR2MS40MTRMMTEuODE4IDBoLTEuNDE0ek0xNS45NiAwTDAgMTUuOTZ2MS40MTRMMTcuMzc0IDBIMTUuOTZ6TTIxLjUxNSAwTDAgMjEuNTE1djEuNDE0TDIyLjkyOSAwaC0xLjQxNHpNMjcuMDcxIDBMMCAyNy4wNzF2MS40MTRMMjguNDg1IDBoLTEuNDE0ek0zMi42MjYgMEwwIDMyLjYyNnYxLjQxNEwzNC4wNDEgMGgtMS40MTV6TTM4LjE4MiAwTDAgMzguMTgydjEuNDE0TDM5LjU5NiAwaC0xLjQxNHpNNDMuNzM3IDBMMCA0My43Mzd2MS40MTRMNDUuMTUxIDBoLTEuNDE0ek01MCAwaC0uNzA3TDAgNDkuMjkzVjUwaC43MDdMNTAgLjcwN1Ywek02LjI2MyA1MEw1MCA2LjI2MlY0Ljg0OEw0Ljg0OSA1MGgxLjQxNHpNMTEuODE4IDUwTDUwIDExLjgxOHYtMS40MTRMMTAuNDA0IDUwaDEuNDE0ek0xNy4zNzQgNTBMNTAgMTcuMzc0VjE1Ljk2TDE1Ljk2IDUwaDEuNDE0ek0yMi45MjkgNTBMNTAgMjIuOTI5di0xLjQxNEwyMS41MTUgNTBoMS40MTR6TTI4LjQ4NSA1MEw1MCAyOC40ODV2LTEuNDE0TDI3LjA3MSA1MGgxLjQxNHpNMzQuMDQgNTBMNTAgMzQuMDR2LTEuNDE0TDMyLjYyNiA1MGgxLjQxNHpNMzkuNTk2IDUwTDUwIDM5LjU5NnYtMS40MTRMMzguMTgyIDUwaDEuNDE0ek00NS4xNTEgNTBMNTAgNDUuMTUxdi0xLjQxNEw0My43MzcgNTBoMS40MTR6TTUwIDUwdi0uNzA3bC0uNzA3LjcwN0g1MHoiLz48L2c+PGc+PHBhdGggY2xhc3M9ImZjOTNhNTNiLTVmMzktNDNhNy05MTljLTZlMzI4YzhhMWM2OCIgZD0iTTAgMGgtLjcwN0wtNTAgNDkuMjkzVjUwaC43MDdMMCAuNzA3VjB6TS00My43MzcgNTBMMCA2LjI2MlY0Ljg0OEwtNDUuMTUxIDUwaDEuNDE0ek0tMzguMTgyIDUwTDAgMTEuODE4di0xLjQxNEwtMzkuNTk2IDUwaDEuNDE0ek0tMzIuNjI2IDUwTDAgMTcuMzc0VjE1Ljk2TC0zNC4wNCA1MGgxLjQxNHpNLTI3LjA3MSA1MEwwIDIyLjkyOXYtMS40MTRMLTI4LjQ4NSA1MGgxLjQxNHpNLTIxLjUxNSA1MEwwIDI4LjQ4NXYtMS40MTRMLTIyLjkyOSA1MGgxLjQxNHpNLTE1Ljk2IDUwTDAgMzQuMDR2LTEuNDE0TC0xNy4zNzQgNTBoMS40MTR6TS0xMC40MDQgNTBMMCAzOS41OTZ2LTEuNDE0TC0xMS44MTggNTBoMS40MTR6TS00Ljg0OSA1MEwwIDQ1LjE1MXYtMS40MTRMLTYuMjYzIDUwaDEuNDE0ek0wIDUwdi0uNzA3TC0uNzA3IDUwSDB6Ii8+PC9nPjxwYXRoIGNsYXNzPSJmYzkzYTUzYi01ZjM5LTQzYTctOTE5Yy02ZTMyOGM4YTFjNjgiIGQ9Ik0xMDAtNTBoLS43MDdMNTAtLjcwN1YwaC43MDdMMTAwLTQ5LjI5M1YtNTB6Ii8+PGc+PHBhdGggY2xhc3M9ImZjOTNhNTNiLTVmMzktNDNhNy05MTljLTZlMzI4YzhhMWM2OCIgZD0iTTUwLTUwaC0uNzA3TDAtLjcwN1YwaC43MDdMNTAtNDkuMjkzVi01MHpNNi4yNjMgMEw1MC00My43Mzh2LTEuNDE0TDQuODQ5IDBoMS40MTR6TTExLjgxOCAwTDUwLTM4LjE4MnYtMS40MTRMMTAuNDA0IDBoMS40MTR6TTE3LjM3NCAwTDUwLTMyLjYyNnYtMS40MTRMMTUuOTYgMGgxLjQxNHpNMjIuOTI5IDBMNTAtMjcuMDcxdi0xLjQxNEwyMS41MTUgMGgxLjQxNHpNMjguNDg1IDBMNTAtMjEuNTE1di0xLjQxNEwyNy4wNzEgMGgxLjQxNHpNMzQuMDQgMEw1MC0xNS45NnYtMS40MTRMMzIuNjI2IDBoMS40MTR6TTM5LjU5NiAwTDUwLTEwLjQwNHYtMS40MTRMMzguMTgyIDBoMS40MTR6TTQ1LjE1MSAwTDUwLTQuODQ5di0xLjQxNEw0My43MzcgMGgxLjQxNHpNNTAgMHYtLjcwN0w0OS4yOTMgMEg1MHoiLz48L2c+PGc+PHBhdGggY2xhc3M9ImZjOTNhNTNiLTVmMzktNDNhNy05MTljLTZlMzI4YzhhMWM2OCIgZD0iTTAtNTBoLS43MDdMLTUwLS43MDdWMGguNzA3TDAtNDkuMjkzVi01MHpNLTQzLjczNyAwTDAtNDMuNzM4di0xLjQxNEwtNDUuMTUxIDBoMS40MTR6TS0zOC4xODIgMEwwLTM4LjE4MnYtMS40MTRMLTM5LjU5NiAwaDEuNDE0ek0tMzIuNjI2IDBMMC0zMi42MjZ2LTEuNDE0TC0zNC4wNCAwaDEuNDE0ek0tMjcuMDcxIDBMMC0yNy4wNzF2LTEuNDE0TC0yOC40ODUgMGgxLjQxNHpNLTIxLjUxNSAwTDAtMjEuNTE1di0xLjQxNEwtMjIuOTI5IDBoMS40MTR6TS0xNS45NiAwTDAtMTUuOTZ2LTEuNDE0TC0xNy4zNzQgMGgxLjQxNHpNLTEwLjQwNCAwTDAtMTAuNDA0di0xLjQxNEwtMTEuODE4IDBoMS40MTR6TS00Ljg0OSAwTDAtNC44NDl2LTEuNDE0TC02LjI2MyAwaDEuNDE0ek0wIDB2LS43MDdMLS43MDcgMEgweiIvPjwvZz48L3BhdHRlcm4+PHN0eWxlPi5hMjIyNDk3Zi0yODkwLTQ5NzctYjRjYS0zODhlNzkzMTAyMTQsLmFhOWNjMWZhLWVmNzktNGM3Ni1hNWRhLWJmOTdkYjY1YjJmNCwuYWQyMDBjOTktZGRhYS00Mjk4LWI0MjgtN2RhODYwZjUzMTZhLC5iNzJjMjVmMy0xMWY0LTRjNTEtYjJmMS02NmI2MGI5ZDRjMDEsLmJjOTE3MGM5LTkxODUtNGM2NS1hYTFhLWUzYWNlYWU0ZDkzZCwuYmQzMWY1ZGQtOTE2MS00ODc4LWIyZGMtYTVmYjQxMzk5OWQ3LC5iZTVmZTI1Ny01ZjhhLTQ5MmItOWE4Ny0yOWE1MDAxY2NkMWQsLmJlYjZjOTJkLTAwZjgtNGRkYi04MTA1LTY4YmUwNzMzZDM3MywuYmYwZTQwN2MtOGEyYS00NThiLTlmNDMtZDI4N2NjMjZiOTEzLC5mNTM4ODI1NC1mYWE3LTQyZDktYTkwMi02Y2NjYTEzYWY5YWMsLmZhYzBhNDM2LTAxMzQtNDk0YS1iMjAzLTIyMGM0ZTNkZWM4MntmaWxsOm5vbmV9LmI1ZDljNjRlLTQzNjYtNGVlYi1hYzc3LTdkZDQyNTFmM2YwZSwuYjhiNTU2YWQtOTU1NS00YWYzLTk0ZTQtMWE2ZDI1ZTc3MThlLC5mYzkzYTUzYi01ZjM5LTQzYTctOTE5Yy02ZTMyOGM4YTFjNjh7ZmlsbDojMTUxNTE1fS5hYTljYzFmYS1lZjc5LTRjNzYtYTVkYS1iZjk3ZGI2NWIyZjQsLmI3MmMyNWYzLTExZjQtNGM1MS1iMmYxLTY2YjYwYjlkNGMwMSwuYmQzMWY1ZGQtOTE2MS00ODc4LWIyZGMtYTVmYjQxMzk5OWQ3LC5iZTVmZTI1Ny01ZjhhLTQ5MmItOWE4Ny0yOWE1MDAxY2NkMWQsLmZjOTNhNTNiLTVmMzktNDNhNy05MTljLTZlMzI4YzhhMWM2OHtzdHJva2U6IzE1MTUxNX0uZmM5M2E1M2ItNWYzOS00M2E3LTkxOWMtNmUzMjhjOGExYzY4e3N0cm9rZS1taXRlcmxpbWl0OjEwfS5hZDIwMGM5OS1kZGFhLTQyOTgtYjQyOC03ZGE4NjBmNTMxNmF7c3Ryb2tlOiM1ZTQwYmV9LmEyMjI0OTdmLTI4OTAtNDk3Ny1iNGNhLTM4OGU3OTMxMDIxNCwuYWE5Y2MxZmEtZWY3OS00Yzc2LWE1ZGEtYmY5N2RiNjViMmY0LC5hZDIwMGM5OS1kZGFhLTQyOTgtYjQyOC03ZGE4NjBmNTMxNmEsLmIwOTE1YjVmLTFkYTUtNDk1Mi05ZmM2LTEyMzY2MDAyZDllMSwuYjJhY2EwNGYtZDhhMi00OTEzLTkwNzgtMzFhZjVkMDI2ODIyLC5iNzJjMjVmMy0xMWY0LTRjNTEtYjJmMS02NmI2MGI5ZDRjMDEsLmJjOTE3MGM5LTkxODUtNGM2NS1hYTFhLWUzYWNlYWU0ZDkzZCwuYmQzMWY1ZGQtOTE2MS00ODc4LWIyZGMtYTVmYjQxMzk5OWQ3LC5iZTVmZTI1Ny01ZjhhLTQ5MmItOWE4Ny0yOWE1MDAxY2NkMWQsLmJlYjZjOTJkLTAwZjgtNGRkYi04MTA1LTY4YmUwNzMzZDM3MywuZjUzODgyNTQtZmFhNy00MmQ5LWE5MDItNmNjY2ExM2FmOWFjLC5mYWMwYTQzNi0wMTM0LTQ5NGEtYjIwMy0yMjBjNGUzZGVjODJ7c3Ryb2tlLWxpbmVjYXA6cm91bmQ7c3Ryb2tlLWxpbmVqb2luOnJvdW5kfS5hZDIwMGM5OS1kZGFhLTQyOTgtYjQyOC03ZGE4NjBmNTMxNmEsLmIyYWNhMDRmLWQ4YTItNDkxMy05MDc4LTMxYWY1ZDAyNjgyMiwuYmM5MTcwYzktOTE4NS00YzY1LWFhMWEtZTNhY2VhZTRkOTNkLC5iZWI2YzkyZC0wMGY4LTRkZGItODEwNS02OGJlMDczM2QzNzMsLmY1Mzg4MjU0LWZhYTctNDJkOS1hOTAyLTZjY2NhMTNhZjlhYywuZmFjMGE0MzYtMDEzNC00OTRhLWIyMDMtMjIwYzRlM2RlYzgye3N0cm9rZS13aWR0aDoycHh9LmVlYjRhYmJmLTAxMmMtNGIyOC1iYTZjLTJlN2Q4Njg5Yzk0Y3tmaWxsOiNlOGU4ZTh9LmIyYWNhMDRmLWQ4YTItNDkxMy05MDc4LTMxYWY1ZDAyNjgyMiwuYmM5MTcwYzktOTE4NS00YzY1LWFhMWEtZTNhY2VhZTRkOTNke3N0cm9rZTojMDZjfS5iOGI1NTZhZC05NTU1LTRhZjMtOTRlNC0xYTZkMjVlNzcxOGUsLmY3MDIyMzcwLTcyNDctNDAyYy1hNzQ1LWRlNmNhOTFmYjlhY3tmb250LXNpemU6MTFweDtmb250LWZhbWlseTpSZWRIYXRUZXh0LCZxdW90O1JlZCBIYXQgVGV4dCZxdW90OyxPdmVycGFzcywmcXVvdDtIZWx2ZXRpY2EgTmV1ZSZxdW90OyxBcmlhbCxzYW5zLXNlcmlmO2ZvbnQtd2VpZ2h0OjUwMH0uZmFjMGE0MzYtMDEzNC00OTRhLWIyMDMtMjIwYzRlM2RlYzgye3N0cm9rZTojNGNiNmQ2fS5hNTc5Yzc2ZC05OTU5LTRjMzAtOTE2Ni0yY2E2OTczYmY3YjB7Zm9udC1zaXplOjEycHg7Zm9udC1mYW1pbHk6UmVkSGF0VGV4dCwmcXVvdDtSZWQgSGF0IFRleHQmcXVvdDssT3ZlcnBhc3MsJnF1b3Q7SGVsdmV0aWNhIE5ldWUmcXVvdDssQXJpYWwsc2Fucy1zZXJpZjtmb250LXdlaWdodDo3MDB9LmFhOWNjMWZhLWVmNzktNGM3Ni1hNWRhLWJmOTdkYjY1YjJmNHtzdHJva2UtZGFzaGFycmF5OjIgMn0uYmQzMWY1ZGQtOTE2MS00ODc4LWIyZGMtYTVmYjQxMzk5OWQ3e3N0cm9rZS1kYXNoYXJyYXk6My4wNzEgMy4wNzF9LmI3MmMyNWYzLTExZjQtNGM1MS1iMmYxLTY2YjYwYjlkNGMwMXtzdHJva2UtZGFzaGFycmF5OjIuOTQxIDIuOTQxfS5iMDkxNWI1Zi0xZGE1LTQ5NTItOWZjNi0xMjM2NjAwMmQ5ZTEsLmIyYWNhMDRmLWQ4YTItNDkxMy05MDc4LTMxYWY1ZDAyNjgyMiwuZTYwYjYwYWQtYzM0OC00MmIzLWE2OGUtNWU5ZDUzOGZmZjMzLC5mNzAyMjM3MC03MjQ3LTQwMmMtYTc0NS1kZTZjYTkxZmI5YWN7ZmlsbDojZmZmfS5iZWI2YzkyZC0wMGY4LTRkZGItODEwNS02OGJlMDczM2QzNzN7c3Ryb2tlOiNjMGQ2ODJ9LmEyMjI0OTdmLTI4OTAtNDk3Ny1iNGNhLTM4OGU3OTMxMDIxNCwuYjA5MTViNWYtMWRhNS00OTUyLTlmYzYtMTIzNjYwMDJkOWUxLC5mNTM4ODI1NC1mYWE3LTQyZDktYTkwMi02Y2NjYTEzYWY5YWN7c3Ryb2tlOiM1YjViNWJ9LmEyMjI0OTdmLTI4OTAtNDk3Ny1iNGNhLTM4OGU3OTMxMDIxNCwuYjA5MTViNWYtMWRhNS00OTUyLTlmYzYtMTIzNjYwMDJkOWUxe3N0cm9rZS13aWR0aDoxLjVweH0uYTU3OWM3NmQtOTk1OS00YzMwLTkxNjYtMmNhNjk3M2JmN2Iwe2ZpbGw6I2RjZGNkY30uYTEzMTAxYjgtYTIwZC00NjhjLTlhODktYTRkMzhjM2Q2MTFme2ZpbGw6IzVlNDBiZX0uZjMzNmZmNTItYTBmYi00MTdmLTk4YmItNTI3YzJhNjMzZGUye29wYWNpdHk6LjM1O21peC1ibGVuZC1tb2RlOm11bHRpcGx5fS5lODNmNDhlNi1kZmYzLTQzNzktOGQwNS1hMzJlM2JiNzAwYzl7ZmlsbDojMDZjfTwvc3R5bGU+PC9kZWZzPjxnIHN0eWxlPSJpc29sYXRpb246aXNvbGF0ZSI+PGcgaWQ9ImY5ZmFjYjI3LWMwZTQtNDY0Yy1iNjlmLTZhZTc4ZGMwY2U3NSIgZGF0YS1uYW1lPSJhcnR3b3JrIj48cGF0aCBjbGFzcz0iYWQyMDBjOTktZGRhYS00Mjk4LWI0MjgtN2RhODYwZjUzMTZhIiBkPSJNNjQ5IDM3OHYyNU00MDkuNSAzNzh2MjUiLz48cGF0aCBjbGFzcz0iZWViNGFiYmYtMDEyYy00YjI4LWJhNmMtMmU3ZDg2ODljOTRjIiBkPSJNMCAyMDkuNWgyODFWMzc4SDB6Ii8+PHBhdGggY2xhc3M9ImFkMjAwYzk5LWRkYWEtNDI5OC1iNDI4LTdkYTg2MGY1MzE2YSIgZD0iTTAgNDAzaDc2MCIvPjxwYXRoIGNsYXNzPSJiYzkxNzBjOS05MTg1LTRjNjUtYWExYS1lM2FjZWFlNGQ5M2QiIGQ9Ik0wIDExNC4wMTdoNzYwIi8+PHRleHQgY2xhc3M9ImI4YjU1NmFkLTk1NTUtNGFmMy05NGU0LTFhNmQyNWU3NzE4ZSIgdHJhbnNmb3JtPSJ0cmFuc2xhdGUoMCAxMDQuMDE3KSI+QmFyZW1ldGFsIG5ldHdvcms8L3RleHQ+PHRleHQgY2xhc3M9ImI4YjU1NmFkLTk1NTUtNGFmMy05NGU0LTFhNmQyNWU3NzE4ZSIgdHJhbnNmb3JtPSJ0cmFuc2xhdGUoMSA0MTkuODE3KSI+UHJvdmlzaW9uaW5nIG5ldHdvcmsgKG9wdGlvbmFsKTwvdGV4dD48cGF0aCBjbGFzcz0iYWQyMDBjOTktZGRhYS00Mjk4LWI0MjgtN2RhODYwZjUzMTZhIiBkPSJNMjIuNzI3IDQwM3YtNTAuMjUiLz48cGF0aCBjbGFzcz0iYmM5MTcwYzktOTE4NS00YzY1LWFhMWEtZTNhY2VhZTRkOTNkIiBkPSJNMjIuNzI3IDExNC4wMDlWMjY0LjI1Ii8+PHRleHQgdHJhbnNmb3JtPSJ0cmFuc2xhdGUoNjczLjk4MSA0MjIuODM0KSIgZm9udC1zaXplPSIxMCIgZmlsbD0iI2YzZjNmMyIgZm9udC1mYW1pbHk9IlJlZEhhdFRleHQsJnF1b3Q7UmVkIEhhdCBUZXh0JnF1b3Q7LE92ZXJwYXNzLCZxdW90O0hlbHZldGljYSBOZXVlJnF1b3Q7LEFyaWFsLHNhbnMtc2VyaWYiPjcxX09wZW5TaGlmdF8xMDIwPC90ZXh0PjxwYXRoIGNsYXNzPSJiZjBlNDA3Yy04YTJhLTQ1OGItOWY0My1kMjg3Y2MyNmI5MTMiIGQ9Ik0wIDM5OS44MTdoNzYwdjQwSDB6Ii8+PHBhdGggY2xhc3M9ImZhYzBhNDM2LTAxMzQtNDk0YS1iMjAzLTIyMGM0ZTNkZWM4MiIgZD0iTTAgMzguNjcyaDc2MCIvPjx0ZXh0IGNsYXNzPSJiOGI1NTZhZC05NTU1LTRhZjMtOTRlNC0xYTZkMjVlNzcxOGUiIHRyYW5zZm9ybT0idHJhbnNsYXRlKC41IDI4LjY3MSkiPkludGVybmV0IGFjY2VzczwvdGV4dD48cGF0aCBjbGFzcz0iYWQyMDBjOTktZGRhYS00Mjk4LWI0MjgtN2RhODYwZjUzMTZhIiBkPSJNMTgzLjIxNyAzMjcuNXYyNS4yNWgtMTcuMjkzIi8+PHBhdGggY2xhc3M9ImJjOTE3MGM5LTkxODUtNGM2NS1hYTFhLWUzYWNlYWU0ZDkzZCIgZD0iTTE4My4yMTcgMjg5LjV2LTI1LjI1aC0xNy4yOTMiLz48cGF0aCBjbGFzcz0iZWViNGFiYmYtMDEyYy00YjI4LWJhNmMtMmU3ZDg2ODljOTRjIiBkPSJNNDEuMjA5IDIxOS41SDBWMjQwaDQxLjIwOWM1LjY2MSAwIDUuNjYxLTIwLjUgMC0yMC41eiIvPjxwYXRoIGZpbGw9IiNkMGQwZDAiIGQ9Ik0xNSAyODkuNWgyNDZ2MzhIMTV6Ii8+PHRleHQgY2xhc3M9ImI4YjU1NmFkLTk1NTUtNGFmMy05NGU0LTFhNmQyNWU3NzE4ZSIgdHJhbnNmb3JtPSJ0cmFuc2xhdGUoMTAxLjg5MyAzMTEuNTQ3KSI+Qm9vdHN0cmFwIFZNPC90ZXh0Pjx0ZXh0IHRyYW5zZm9ybT0idHJhbnNsYXRlKDE1IDIzNC42MDQpIiBmb250LXNpemU9IjEyIiBmb250LWZhbWlseT0iUmVkSGF0VGV4dCwmcXVvdDtSZWQgSGF0IFRleHQmcXVvdDssT3ZlcnBhc3MsJnF1b3Q7SGVsdmV0aWNhIE5ldWUmcXVvdDssQXJpYWwsc2Fucy1zZXJpZiIgZm9udC13ZWlnaHQ9IjcwMCIgZmlsbD0iIzE1MTUxNSI+UHJvdmlzaW9uaW5nIG5vZGU8L3RleHQ+PHBhdGggY2xhc3M9ImJlNWZlMjU3LTVmOGEtNDkyYi05YTg3LTI5YTUwMDFjY2QxZCIgZD0iTTE5MS45NzIgMTIzLjcyNnYxLjUiLz48cGF0aCBjbGFzcz0iYWE5Y2MxZmEtZWY3OS00Yzc2LWE1ZGEtYmY5N2RiNjViMmY0IiBkPSJNMTkxLjk3MiAxMjcuMjI2djMiLz48cGF0aCBjbGFzcz0iYmU1ZmUyNTctNWY4YS00OTJiLTlhODctMjlhNTAwMWNjZDFkIiBkPSJNMTkxLjk3MiAxMzEuMjI2djEuNWgxLjUiLz48cGF0aCBjbGFzcz0iYmQzMWY1ZGQtOTE2MS00ODc4LWIyZGMtYTVmYjQxMzk5OWQ3IiBkPSJNMTk2LjU0MyAxMzIuNzI2aDIzLjAzNSIvPjxwYXRoIGNsYXNzPSJiZTVmZTI1Ny01ZjhhLTQ5MmItOWE4Ny0yOWE1MDAxY2NkMWQiIGQ9Ik0yMjEuMTE0IDEzMi43MjZoMS41djEuNSIvPjxwYXRoIGNsYXNzPSJiNzJjMjVmMy0xMWY0LTRjNTEtYjJmMS02NmI2MGI5ZDRjMDEiIGQ9Ik0yMjIuNjE0IDEzNy4xNjd2MTM5LjY4NiIvPjxwYXRoIGNsYXNzPSJiZTVmZTI1Ny01ZjhhLTQ5MmItOWE4Ny0yOWE1MDAxY2NkMWQiIGQ9Ik0yMjIuNjE0IDI3OC4zMjR2MS41Ii8+PHBhdGggY2xhc3M9ImI1ZDljNjRlLTQzNjYtNGVlYi1hYzc3LTdkZDQyNTFmM2YwZSIgZD0iTTIxNy42MjcgMjc4LjM2NWw0Ljk4NyA4LjYzNSA0Ljk4Ni04LjYzNWgtOS45NzN6Ii8+PHBhdGggY2xhc3M9ImJlNWZlMjU3LTVmOGEtNDkyYi05YTg3LTI5YTUwMDFjY2QxZCIgZD0iTTI2OC4yNTUgMTIzLjcyNnYxLjUiLz48cGF0aCBjbGFzcz0iYWE5Y2MxZmEtZWY3OS00Yzc2LWE1ZGEtYmY5N2RiNjViMmY0IiBkPSJNMjY4LjI1NSAxMjcuMjI2djMiLz48cGF0aCBjbGFzcz0iYmU1ZmUyNTctNWY4YS00OTJiLTlhODctMjlhNTAwMWNjZDFkIiBkPSJNMjY4LjI1NSAxMzEuMjI2djEuNWgtMS41Ii8+PHBhdGggY2xhc3M9ImJkMzFmNWRkLTkxNjEtNDg3OC1iMmRjLWE1ZmI0MTM5OTlkNyIgZD0iTTI2My42ODQgMTMyLjcyNmgtMjMuMDM1Ii8+PHBhdGggY2xhc3M9ImJlNWZlMjU3LTVmOGEtNDkyYi05YTg3LTI5YTUwMDFjY2QxZCIgZD0iTTIzOS4xMTQgMTMyLjcyNmgtMS41djEuNSIvPjxwYXRoIGNsYXNzPSJiNzJjMjVmMy0xMWY0LTRjNTEtYjJmMS02NmI2MGI5ZDRjMDEiIGQ9Ik0yMzcuNjE0IDEzNy4xNjd2MTM5LjY4NiIvPjxwYXRoIGNsYXNzPSJiZTVmZTI1Ny01ZjhhLTQ5MmItOWE4Ny0yOWE1MDAxY2NkMWQiIGQ9Ik0yMzcuNjE0IDI3OC4zMjR2MS41Ii8+PHBhdGggY2xhc3M9ImI1ZDljNjRlLTQzNjYtNGVlYi1hYzc3LTdkZDQyNTFmM2YwZSIgZD0iTTIzMi42MjcgMjc4LjM2NWw0Ljk4NyA4LjYzNSA0Ljk4Ni04LjYzNWgtOS45NzN6Ii8+PGNpcmNsZSBjbGFzcz0iYjJhY2EwNGYtZDhhMi00OTEzLTkwNzgtMzFhZjVkMDI2ODIyIiBjeD0iMjY4LjI1NSIgY3k9IjExMy4zNzEiIHI9IjkuMzU1Ii8+PHRleHQgY2xhc3M9ImI4YjU1NmFkLTk1NTUtNGFmMy05NGU0LTFhNmQyNWU3NzE4ZSIgdHJhbnNmb3JtPSJ0cmFuc2xhdGUoMjM5LjI3MSA5OC4wMTYpIj5JbmdyZXNzIFZJUDwvdGV4dD48Y2lyY2xlIGNsYXNzPSJiMmFjYTA0Zi1kOGEyLTQ5MTMtOTA3OC0zMWFmNWQwMjY4MjIiIGN4PSIxOTEuOTcyIiBjeT0iMTEzLjM3MSIgcj0iOS4zNTUiLz48dGV4dCBjbGFzcz0iYjhiNTU2YWQtOTU1NS00YWYzLTk0ZTQtMWE2ZDI1ZTc3MThlIiB0cmFuc2Zvcm09InRyYW5zbGF0ZSgxNzIuNTUyIDk4LjAxNikiPkFQSSBWSVA8L3RleHQ+PHBhdGggY2xhc3M9ImJjOTE3MGM5LTkxODUtNGM2NS1hYTFhLWUzYWNlYWU0ZDkzZCIgZD0iTTYzOSAxMTQuMDE3VjIwOS41Ii8+PHBhdGggc3Ryb2tlPSIjZmZmIiBzdHJva2Utd2lkdGg9IjEwIiBzdHJva2UtbGluZWNhcD0icm91bmQiIHN0cm9rZS1saW5lam9pbj0icm91bmQiIGZpbGw9Im5vbmUiIGQ9Ik02MTcuNDI1IDE4OS41SDY0NS41Ii8+PHBhdGggY2xhc3M9ImJlYjZjOTJkLTAwZjgtNGRkYi04MTA1LTY4YmUwNzMzZDM3MyIgZD0iTTc2MCAxODkuNUg0MTkuODMydjIwTTY1OSAxODkuNXYyMCIvPjxwYXRoIGNsYXNzPSJiYzkxNzBjOS05MTg1LTRjNjUtYWExYS1lM2FjZWFlNGQ5M2QiIGQ9Ik0zOTkuNSAxMTQuMDE3VjIwOS41Ii8+PHRleHQgY2xhc3M9ImI4YjU1NmFkLTk1NTUtNGFmMy05NGU0LTFhNmQyNWU3NzE4ZSIgdHJhbnNmb3JtPSJ0cmFuc2xhdGUoNDE4LjgzMiAxNjcuNTAxKSI+T3V0LW9mLUJhbmQgTWFuYWdlbWVudDx0c3BhbiB4PSIwIiB5PSIxMiI+bmV0d29yayAob3B0aW9uYWwpPC90c3Bhbj48L3RleHQ+PHBhdGggY2xhc3M9ImJjOTE3MGM5LTkxODUtNGM2NS1hYTFhLWUzYWNlYWU0ZDkzZCIgZD0iTTY4OS43NzggMTE0LjA2OXYyMCIvPjxnPjx0ZXh0IGNsYXNzPSJiOGI1NTZhZC05NTU1LTRhZjMtOTRlNC0xYTZkMjVlNzcxOGUiIHRyYW5zZm9ybT0idHJhbnNsYXRlKDY3Mi4wMDEgMTY0LjQxNCkiPlJvdXRlcjwvdGV4dD48cGF0aCBjbGFzcz0iYjA5MTViNWYtMWRhNS00OTUyLTlmYzYtMTIzNjYwMDJkOWUxIiBkPSJNNjYyLjI3OCAxMzQuMDY5aDU1djEzLjc1aC01NXoiLz48cGF0aCBjbGFzcz0iZjUzODgyNTQtZmFhNy00MmQ5LWE5MDItNmNjY2ExM2FmOWFjIiBkPSJNNzExLjM5OCAxMzkuOTY2Ii8+PHBhdGggY2xhc3M9ImEyMjI0OTdmLTI4OTAtNDk3Ny1iNGNhLTM4OGU3OTMxMDIxNCIgZD0iTTY2OC4xNyAxMzguOTMxdjMuOTY1TTY3NC4wNjMgMTM4LjkzMXYzLjk2NU02NzkuOTU2IDEzOC45MzF2My45NjVNNjg1Ljg0OSAxMzguOTMxdjMuOTY1TTY5MS43NDIgMTM4LjkzMXYzLjk2NU02OTcuNjM1IDEzOC45MzF2My45NjUiLz48L2c+PHBhdGggY2xhc3M9ImJlYjZjOTJkLTAwZjgtNGRkYi04MTA1LTY4YmUwNzMzZDM3MyIgZD0iTTY4OS43NzggMTY5LjV2MjAiLz48Zz48cGF0aCBjbGFzcz0iZTYwYjYwYWQtYzM0OC00MmIzLWE2OGUtNWU5ZDUzOGZmZjMzIiBkPSJNMjk5LjUgMjEwaDIyMHYxNjcuNWgtMjIweiIvPjxwYXRoIGNsYXNzPSJlZWI0YWJiZi0wMTJjLTRiMjgtYmE2Yy0yZTdkODY4OWM5NGMiIGQ9Ik01MTkgMjEwLjVWMzc3SDMwMFYyMTAuNWgyMTltMS0xSDI5OVYzNzhoMjIxVjIwOS41eiIvPjx0ZXh0IGNsYXNzPSJhNTc5Yzc2ZC05OTU5LTRjMzAtOTE2Ni0yY2E2OTczYmY3YjAiIHRyYW5zZm9ybT0idHJhbnNsYXRlKDMxNCAyMzQuNjA0KSI+PHRzcGFuPkNvbnRyb2wgcGxhbmUgbm9kZXMgeDM8L3RzcGFuPjwvdGV4dD48L2c+PGc+PHBhdGggY2xhc3M9ImU2MGI2MGFkLWMzNDgtNDJiMy1hNjhlLTVlOWQ1MzhmZmYzMyIgZD0iTTUzOSAyMTBoMjIwdjE2Ny41SDUzOXoiLz48cGF0aCBjbGFzcz0iZWViNGFiYmYtMDEyYy00YjI4LWJhNmMtMmU3ZDg2ODljOTRjIiBkPSJNNzU4LjUgMjEwLjVWMzc3aC0yMTlWMjEwLjVoMjE5bTEtMWgtMjIxVjM3OGgyMjFWMjA5LjV6Ii8+PHRleHQgY2xhc3M9ImE1NzljNzZkLTk5NTktNGMzMC05MTY2LTJjYTY5NzNiZjdiMCIgdHJhbnNmb3JtPSJ0cmFuc2xhdGUoNTUyLjQ2NyAyMzQuNjA0KSI+PHRzcGFuPldvcmtlciBub2RlcyB4TjwvdHNwYW4+PC90ZXh0PjwvZz48cGF0aCBjbGFzcz0iYmM5MTcwYzktOTE4NS00YzY1LWFhMWEtZTNhY2VhZTRkOTNkIiBkPSJNNDM2LjQzOSA5NC4wMTd2MjAiLz48cGF0aCBjbGFzcz0iZmFjMGE0MzYtMDEzNC00OTRhLWIyMDMtMjIwYzRlM2RlYzgyIiBkPSJNNDM2LjQzOSAzOC42NzJ2MjAiLz48Zz48dGV4dCBjbGFzcz0iYjhiNTU2YWQtOTU1NS00YWYzLTk0ZTQtMWE2ZDI1ZTc3MThlIiB0cmFuc2Zvcm09InRyYW5zbGF0ZSg0MTguNjYzIDg5LjAxNykiPlJvdXRlcjwvdGV4dD48cGF0aCBjbGFzcz0iYjA5MTViNWYtMWRhNS00OTUyLTlmYzYtMTIzNjYwMDJkOWUxIiBkPSJNNDA4LjkzOSA1OC42NzJoNTV2MTMuNzVoLTU1eiIvPjxwYXRoIGNsYXNzPSJmNTM4ODI1NC1mYWE3LTQyZDktYTkwMi02Y2NjYTEzYWY5YWMiIGQ9Ik00NTguMDYgNjQuNTY5Ii8+PHBhdGggY2xhc3M9ImEyMjI0OTdmLTI4OTAtNDk3Ny1iNGNhLTM4OGU3OTMxMDIxNCIgZD0iTTQxNC44MzIgNjMuNTM1djMuOTY0TTQyMC43MjUgNjMuNTM1djMuOTY0TTQyNi42MTggNjMuNTM1djMuOTY0TTQzMi41MTEgNjMuNTM1djMuOTY0TTQzOC40MDMgNjMuNTM1djMuOTY0TTQ0NC4yOTYgNjMuNTM1djMuOTY0Ii8+PC9nPjxwYXRoIGNsYXNzPSJiYzkxNzBjOS05MTg1LTRjNjUtYWExYS1lM2FjZWFlNGQ5M2QiIGQ9Ik01MTguMjUyIDk0LjAxN3YyMCIvPjxnPjx0ZXh0IGNsYXNzPSJiOGI1NTZhZC05NTU1LTRhZjMtOTRlNC0xYTZkMjVlNzcxOGUiIHRyYW5zZm9ybT0idHJhbnNsYXRlKDQ4NC44NzggODkuODM4KSI+REhDUCBzZXJ2ZXI8L3RleHQ+PHBhdGggY2xhc3M9ImIwOTE1YjVmLTFkYTUtNDk1Mi05ZmM2LTEyMzY2MDAyZDllMSIgZD0iTTQ5MC42ODQgNTkuNDkzaDU1djEzLjc1aC01NXoiLz48cGF0aCBjbGFzcz0iZjUzODgyNTQtZmFhNy00MmQ5LWE5MDItNmNjY2ExM2FmOWFjIiBkPSJNNTM5LjgwNSA2NS4zOSIvPjxwYXRoIGNsYXNzPSJhMjIyNDk3Zi0yODkwLTQ5NzctYjRjYS0zODhlNzkzMTAyMTQiIGQ9Ik00OTcuNDIgNjcuMzVoOC4yNSIvPjwvZz48cGF0aCBjbGFzcz0iYmM5MTcwYzktOTE4NS00YzY1LWFhMWEtZTNhY2VhZTRkOTNkIiBkPSJNNjAxLjA2MyA5NC4wMTd2MjAiLz48Zz48dGV4dCBjbGFzcz0iYjhiNTU2YWQtOTU1NS00YWYzLTk0ZTQtMWE2ZDI1ZTc3MThlIiB0cmFuc2Zvcm09InRyYW5zbGF0ZSg1NzEuODE0IDg5LjgzOCkiPkROUyBzZXJ2ZXI8L3RleHQ+PHBhdGggY2xhc3M9ImIwOTE1YjVmLTFkYTUtNDk1Mi05ZmM2LTEyMzY2MDAyZDllMSIgZD0iTTU3My40OTUgNTkuNDkzaDU1djEzLjc1aC01NXoiLz48cGF0aCBjbGFzcz0iZjUzODgyNTQtZmFhNy00MmQ5LWE5MDItNmNjY2ExM2FmOWFjIiBkPSJNNjIyLjYxNiA2NS4zOSIvPjxwYXRoIGNsYXNzPSJhMjIyNDk3Zi0yODkwLTQ5NzctYjRjYS0zODhlNzkzMTAyMTQiIGQ9Ik01ODAuMjMgNjcuMzVoOC4yNSIvPjwvZz48Zz48cGF0aCBjbGFzcz0iYTEzMTAxYjgtYTIwZC00NjhjLTlhODktYTRkMzhjM2Q2MTFmIiBkPSJNMTYxLjY3OCAzNDIuNUguNDU1VjM2M2gxNjEuMjIzYzUuNjYxIDAgNS42NjEtMjAuNSAwLTIwLjV6Ii8+PHBhdGggZD0iTTE2MS42NzggMzQyLjVILjQ1NVYzNjNoMTYxLjIyM2M1LjY2MSAwIDUuNjYxLTIwLjUgMC0yMC41eiIgZmlsbD0idXJsKCNiMDlmZjA4ZS1kM2U4LTQ2Y2UtYjY5NS0zYjY4OThmZmJlZjApIi8+PHRleHQgY2xhc3M9ImY3MDIyMzcwLTcyNDctNDAyYy1hNzQ1LWRlNmNhOTFmYjlhYyIgdHJhbnNmb3JtPSJ0cmFuc2xhdGUoNTUuNjYxIDM1Ni4wNzQpIj5Qcm92aXNpb25pbmcgYnJpZGdlPC90ZXh0PjxwYXRoIGNsYXNzPSJhMTMxMDFiOC1hMjBkLTQ2OGMtOWE4OS1hNGQzOGMzZDYxMWYiIGQ9Ik00MS4yMjMgMzQyLjVIMFYzNjNoNDEuMjIzYzUuNjYxIDAgNS42NjEtMjAuNSAwLTIwLjV6Ii8+PHRleHQgY2xhc3M9ImY3MDIyMzcwLTcyNDctNDAyYy1hNzQ1LWRlNmNhOTFmYjlhYyIgdHJhbnNmb3JtPSJ0cmFuc2xhdGUoMTEuNjcxIDM1Ni4wNzQpIj5lbm8xPC90ZXh0PjwvZz48Zz48cGF0aCBjbGFzcz0iZTgzZjQ4ZTYtZGZmMy00Mzc5LThkMDUtYTMyZTNiYjcwMGM5IiBkPSJNMTYxLjY2NCAyNTQuNUguNDU1VjI3NWgxNjEuMjA5YzUuNjYxIDAgNS42NjEtMjAuNSAwLTIwLjV6Ii8+PHBhdGggZD0iTTE2MS42NjQgMjU0LjVILjQ1NVYyNzVoMTYxLjIwOWM1LjY2MSAwIDUuNjYxLTIwLjUgMC0yMC41eiIgZmlsbD0idXJsKCNiMGQ3NTM4My01MTFmLTQ0ODktOTY4ZS03ODMzODAzY2I1YzkpIi8+PHRleHQgY2xhc3M9ImY3MDIyMzcwLTcyNDctNDAyYy1hNzQ1LWRlNmNhOTFmYjlhYyIgdHJhbnNmb3JtPSJ0cmFuc2xhdGUoNTUuNjc3IDI2OS4zNDkpIj5CYXJlbWV0YWwgYnJpZGdlPC90ZXh0PjxnPjxwYXRoIGNsYXNzPSJlODNmNDhlNi1kZmYzLTQzNzktOGQwNS1hMzJlM2JiNzAwYzkiIGQ9Ik00MS4yMDkgMjU0LjVIMFYyNzVoNDEuMjA5YzUuNjYxIDAgNS42NjEtMjAuNSAwLTIwLjV6Ii8+PHRleHQgY2xhc3M9ImY3MDIyMzcwLTcyNDctNDAyYy1hNzQ1LWRlNmNhOTFmYjlhYyIgdHJhbnNmb3JtPSJ0cmFuc2xhdGUoMTEuNjcxIDI2OS4zNDkpIj5lbm8yPC90ZXh0PjwvZz48L2c+PC9nPjwvZz48L3N2Zz4K" alt="Deployment phase one"/>
</div>
</div>
<div class="paragraph">
<p>When the installation of OpenShift control plane nodes is complete and fully operational, the installer destroys the bootstrap VM automatically and moves the virtual IP addresses (VIPs) to
the appropriate nodes. The API VIP moves to the control plane nodes and the Ingress VIP moves to the worker nodes.</p>
</div>
<div class="imageblock">
<div class="content">
<img src="data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSI3NjAiIGhlaWdodD0iNDQzIj48ZGVmcz48cGF0dGVybiBpZD0iYTkxZjlmYmMtZmJkMS00OWNkLTg3OWEtMjczYThhZTUyMThkIiBkYXRhLW5hbWU9ImRpYWdpbmFsIGhhc2ggKGdyYXkpIiB3aWR0aD0iNTAiIGhlaWdodD0iNTAiIHBhdHRlcm5UcmFuc2Zvcm09InRyYW5zbGF0ZSgtMTE0LjU2OSA3NS4wMjMpIiBwYXR0ZXJuVW5pdHM9InVzZXJTcGFjZU9uVXNlIj48cGF0aCBjbGFzcz0iYjdjODJiNWQtNzY3NS00MDljLTgzZDctY2IyM2I3NWZjN2QzIiBkPSJNMCAwaDUwdjUwSDB6Ii8+PHBhdGggY2xhc3M9ImY3YmRhNTg2LTMzNWUtNGNhMC05OWZiLTkxNWJiOGEyM2YyZCIgZD0iTTUwIDUwdi43MDdsLjcwNy0uNzA3SDUwek01NC44NDkgNTBMNTAgNTQuODQ5djEuNDE0TDU2LjI2MyA1MGgtMS40MTR6TTYwLjQwNCA1MEw1MCA2MC40MDR2MS40MTRMNjEuODE4IDUwaC0xLjQxNHpNNjUuOTYgNTBMNTAgNjUuOTZ2MS40MTRMNjcuMzc0IDUwSDY1Ljk2ek03MS41MTUgNTBMNTAgNzEuNTE1djEuNDE0TDcyLjkyOSA1MGgtMS40MTR6TTc3LjA3MSA1MEw1MCA3Ny4wNzF2MS40MTRMNzguNDg1IDUwaC0xLjQxNHpNODIuNjI2IDUwTDUwIDgyLjYyNnYxLjQxNEw4NC4wNDEgNTBoLTEuNDE1ek04OC4xODIgNTBMNTAgODguMTgydjEuNDE0TDg5LjU5NiA1MGgtMS40MTR6TTkzLjczNyA1MEw1MCA5My43Mzd2MS40MTRMOTUuMTUxIDUwaC0xLjQxNHpNMTAwIDUwaC0uNzA3TDUwIDk5LjI5M1YxMDBoLjcwN0wxMDAgNTAuNzA3VjUweiIvPjxnPjxwYXRoIGNsYXNzPSJmN2JkYTU4Ni0zMzVlLTRjYTAtOTlmYi05MTViYjhhMjNmMmQiIGQ9Ik0wIDUwdi43MDdMLjcwNyA1MEgwek00Ljg0OSA1MEwwIDU0Ljg0OXYxLjQxNEw2LjI2MyA1MEg0Ljg0OXpNMTAuNDA0IDUwTDAgNjAuNDA0djEuNDE0TDExLjgxOCA1MGgtMS40MTR6TTE1Ljk2IDUwTDAgNjUuOTZ2MS40MTRMMTcuMzc0IDUwSDE1Ljk2ek0yMS41MTUgNTBMMCA3MS41MTV2MS40MTRMMjIuOTI5IDUwaC0xLjQxNHpNMjcuMDcxIDUwTDAgNzcuMDcxdjEuNDE0TDI4LjQ4NSA1MGgtMS40MTR6TTMyLjYyNiA1MEwwIDgyLjYyNnYxLjQxNEwzNC4wNDEgNTBoLTEuNDE1ek0zOC4xODIgNTBMMCA4OC4xODJ2MS40MTRMMzkuNTk2IDUwaC0xLjQxNHpNNDMuNzM3IDUwTDAgOTMuNzM3djEuNDE0TDQ1LjE1MSA1MGgtMS40MTR6TTUwIDUwaC0uNzA3TDAgOTkuMjkzVjEwMGguNzA3TDUwIDUwLjcwN1Y1MHoiLz48L2c+PHBhdGggY2xhc3M9ImY3YmRhNTg2LTMzNWUtNGNhMC05OWZiLTkxNWJiOGEyM2YyZCIgZD0iTTAgNTBoLS43MDdMLTUwIDk5LjI5M1YxMDBoLjcwN0wwIDUwLjcwN1Y1MHoiLz48Zz48cGF0aCBjbGFzcz0iZjdiZGE1ODYtMzM1ZS00Y2EwLTk5ZmItOTE1YmI4YTIzZjJkIiBkPSJNNTAgMHYuNzA3TDUwLjcwNyAwSDUwek01NC44NDkgMEw1MCA0Ljg0OXYxLjQxNEw1Ni4yNjMgMGgtMS40MTR6TTYwLjQwNCAwTDUwIDEwLjQwNHYxLjQxNEw2MS44MTggMGgtMS40MTR6TTY1Ljk2IDBMNTAgMTUuOTZ2MS40MTRMNjcuMzc0IDBINjUuOTZ6TTcxLjUxNSAwTDUwIDIxLjUxNXYxLjQxNEw3Mi45MjkgMGgtMS40MTR6TTc3LjA3MSAwTDUwIDI3LjA3MXYxLjQxNEw3OC40ODUgMGgtMS40MTR6TTgyLjYyNiAwTDUwIDMyLjYyNnYxLjQxNEw4NC4wNDEgMGgtMS40MTV6TTg4LjE4MiAwTDUwIDM4LjE4MnYxLjQxNEw4OS41OTYgMGgtMS40MTR6TTkzLjczNyAwTDUwIDQzLjczN3YxLjQxNEw5NS4xNTEgMGgtMS40MTR6TTEwMCAwaC0uNzA3TDUwIDQ5LjI5M1Y1MGguNzA3TDEwMCAuNzA3VjB6Ii8+PC9nPjxnPjxwYXRoIGNsYXNzPSJmN2JkYTU4Ni0zMzVlLTRjYTAtOTlmYi05MTViYjhhMjNmMmQiIGQ9Ik0wIDB2LjcwN0wuNzA3IDBIMHpNNC44NDkgMEwwIDQuODQ5djEuNDE0TDYuMjYzIDBINC44NDl6TTEwLjQwNCAwTDAgMTAuNDA0djEuNDE0TDExLjgxOCAwaC0xLjQxNHpNMTUuOTYgMEwwIDE1Ljk2djEuNDE0TDE3LjM3NCAwSDE1Ljk2ek0yMS41MTUgMEwwIDIxLjUxNXYxLjQxNEwyMi45MjkgMGgtMS40MTR6TTI3LjA3MSAwTDAgMjcuMDcxdjEuNDE0TDI4LjQ4NSAwaC0xLjQxNHpNMzIuNjI2IDBMMCAzMi42MjZ2MS40MTRMMzQuMDQxIDBoLTEuNDE1ek0zOC4xODIgMEwwIDM4LjE4MnYxLjQxNEwzOS41OTYgMGgtMS40MTR6TTQzLjczNyAwTDAgNDMuNzM3djEuNDE0TDQ1LjE1MSAwaC0xLjQxNHpNNTAgMGgtLjcwN0wwIDQ5LjI5M1Y1MGguNzA3TDUwIC43MDdWMHpNNi4yNjMgNTBMNTAgNi4yNjJWNC44NDhMNC44NDkgNTBoMS40MTR6TTExLjgxOCA1MEw1MCAxMS44MTh2LTEuNDE0TDEwLjQwNCA1MGgxLjQxNHpNMTcuMzc0IDUwTDUwIDE3LjM3NFYxNS45NkwxNS45NiA1MGgxLjQxNHpNMjIuOTI5IDUwTDUwIDIyLjkyOXYtMS40MTRMMjEuNTE1IDUwaDEuNDE0ek0yOC40ODUgNTBMNTAgMjguNDg1di0xLjQxNEwyNy4wNzEgNTBoMS40MTR6TTM0LjA0IDUwTDUwIDM0LjA0di0xLjQxNEwzMi42MjYgNTBoMS40MTR6TTM5LjU5NiA1MEw1MCAzOS41OTZ2LTEuNDE0TDM4LjE4MiA1MGgxLjQxNHpNNDUuMTUxIDUwTDUwIDQ1LjE1MXYtMS40MTRMNDMuNzM3IDUwaDEuNDE0ek01MCA1MHYtLjcwN2wtLjcwNy43MDdINTB6Ii8+PC9nPjxnPjxwYXRoIGNsYXNzPSJmN2JkYTU4Ni0zMzVlLTRjYTAtOTlmYi05MTViYjhhMjNmMmQiIGQ9Ik0wIDBoLS43MDdMLTUwIDQ5LjI5M1Y1MGguNzA3TDAgLjcwN1Ywek0tNDMuNzM3IDUwTDAgNi4yNjJWNC44NDhMLTQ1LjE1MSA1MGgxLjQxNHpNLTM4LjE4MiA1MEwwIDExLjgxOHYtMS40MTRMLTM5LjU5NiA1MGgxLjQxNHpNLTMyLjYyNiA1MEwwIDE3LjM3NFYxNS45NkwtMzQuMDQgNTBoMS40MTR6TS0yNy4wNzEgNTBMMCAyMi45Mjl2LTEuNDE0TC0yOC40ODUgNTBoMS40MTR6TS0yMS41MTUgNTBMMCAyOC40ODV2LTEuNDE0TC0yMi45MjkgNTBoMS40MTR6TS0xNS45NiA1MEwwIDM0LjA0di0xLjQxNEwtMTcuMzc0IDUwaDEuNDE0ek0tMTAuNDA0IDUwTDAgMzkuNTk2di0xLjQxNEwtMTEuODE4IDUwaDEuNDE0ek0tNC44NDkgNTBMMCA0NS4xNTF2LTEuNDE0TC02LjI2MyA1MGgxLjQxNHpNMCA1MHYtLjcwN0wtLjcwNyA1MEgweiIvPjwvZz48cGF0aCBjbGFzcz0iZjdiZGE1ODYtMzM1ZS00Y2EwLTk5ZmItOTE1YmI4YTIzZjJkIiBkPSJNMTAwLTUwaC0uNzA3TDUwLS43MDdWMGguNzA3TDEwMC00OS4yOTNWLTUweiIvPjxnPjxwYXRoIGNsYXNzPSJmN2JkYTU4Ni0zMzVlLTRjYTAtOTlmYi05MTViYjhhMjNmMmQiIGQ9Ik01MC01MGgtLjcwN0wwLS43MDdWMGguNzA3TDUwLTQ5LjI5M1YtNTB6TTYuMjYzIDBMNTAtNDMuNzM4di0xLjQxNEw0Ljg0OSAwaDEuNDE0ek0xMS44MTggMEw1MC0zOC4xODJ2LTEuNDE0TDEwLjQwNCAwaDEuNDE0ek0xNy4zNzQgMEw1MC0zMi42MjZ2LTEuNDE0TDE1Ljk2IDBoMS40MTR6TTIyLjkyOSAwTDUwLTI3LjA3MXYtMS40MTRMMjEuNTE1IDBoMS40MTR6TTI4LjQ4NSAwTDUwLTIxLjUxNXYtMS40MTRMMjcuMDcxIDBoMS40MTR6TTM0LjA0IDBMNTAtMTUuOTZ2LTEuNDE0TDMyLjYyNiAwaDEuNDE0ek0zOS41OTYgMEw1MC0xMC40MDR2LTEuNDE0TDM4LjE4MiAwaDEuNDE0ek00NS4xNTEgMEw1MC00Ljg0OXYtMS40MTRMNDMuNzM3IDBoMS40MTR6TTUwIDB2LS43MDdMNDkuMjkzIDBINTB6Ii8+PC9nPjxnPjxwYXRoIGNsYXNzPSJmN2JkYTU4Ni0zMzVlLTRjYTAtOTlmYi05MTViYjhhMjNmMmQiIGQ9Ik0wLTUwaC0uNzA3TC01MC0uNzA3VjBoLjcwN0wwLTQ5LjI5M1YtNTB6TS00My43MzcgMEwwLTQzLjczOHYtMS40MTRMLTQ1LjE1MSAwaDEuNDE0ek0tMzguMTgyIDBMMC0zOC4xODJ2LTEuNDE0TC0zOS41OTYgMGgxLjQxNHpNLTMyLjYyNiAwTDAtMzIuNjI2di0xLjQxNEwtMzQuMDQgMGgxLjQxNHpNLTI3LjA3MSAwTDAtMjcuMDcxdi0xLjQxNEwtMjguNDg1IDBoMS40MTR6TS0yMS41MTUgMEwwLTIxLjUxNXYtMS40MTRMLTIyLjkyOSAwaDEuNDE0ek0tMTUuOTYgMEwwLTE1Ljk2di0xLjQxNEwtMTcuMzc0IDBoMS40MTR6TS0xMC40MDQgMEwwLTEwLjQwNHYtMS40MTRMLTExLjgxOCAwaDEuNDE0ek0tNC44NDkgMEwwLTQuODQ5di0xLjQxNEwtNi4yNjMgMGgxLjQxNHpNMCAwdi0uNzA3TC0uNzA3IDBIMHoiLz48L2c+PC9wYXR0ZXJuPjxwYXR0ZXJuIGlkPSJhZTk3ZTc5NS0zYzQ4LTQ0MjQtODlhNC0xMGJiZDgxNjliZmUiIGRhdGEtbmFtZT0iZGlhZ2luYWwgaGFzaCAoZ3JheSkiIHdpZHRoPSI1MCIgaGVpZ2h0PSI1MCIgcGF0dGVyblRyYW5zZm9ybT0idHJhbnNsYXRlKC0xMTQuNTY5IDE5MC4wMjMpIiBwYXR0ZXJuVW5pdHM9InVzZXJTcGFjZU9uVXNlIj48cGF0aCBjbGFzcz0iYjdjODJiNWQtNzY3NS00MDljLTgzZDctY2IyM2I3NWZjN2QzIiBkPSJNMCAwaDUwdjUwSDB6Ii8+PHBhdGggY2xhc3M9ImY3YmRhNTg2LTMzNWUtNGNhMC05OWZiLTkxNWJiOGEyM2YyZCIgZD0iTTUwIDUwdi43MDdsLjcwNy0uNzA3SDUwek01NC44NDkgNTBMNTAgNTQuODQ5djEuNDE0TDU2LjI2MyA1MGgtMS40MTR6TTYwLjQwNCA1MEw1MCA2MC40MDR2MS40MTRMNjEuODE4IDUwaC0xLjQxNHpNNjUuOTYgNTBMNTAgNjUuOTZ2MS40MTRMNjcuMzc0IDUwSDY1Ljk2ek03MS41MTUgNTBMNTAgNzEuNTE1djEuNDE0TDcyLjkyOSA1MGgtMS40MTR6TTc3LjA3MSA1MEw1MCA3Ny4wNzF2MS40MTRMNzguNDg1IDUwaC0xLjQxNHpNODIuNjI2IDUwTDUwIDgyLjYyNnYxLjQxNEw4NC4wNDEgNTBoLTEuNDE1ek04OC4xODIgNTBMNTAgODguMTgydjEuNDE0TDg5LjU5NiA1MGgtMS40MTR6TTkzLjczNyA1MEw1MCA5My43Mzd2MS40MTRMOTUuMTUxIDUwaC0xLjQxNHpNMTAwIDUwaC0uNzA3TDUwIDk5LjI5M1YxMDBoLjcwN0wxMDAgNTAuNzA3VjUweiIvPjxnPjxwYXRoIGNsYXNzPSJmN2JkYTU4Ni0zMzVlLTRjYTAtOTlmYi05MTViYjhhMjNmMmQiIGQ9Ik0wIDUwdi43MDdMLjcwNyA1MEgwek00Ljg0OSA1MEwwIDU0Ljg0OXYxLjQxNEw2LjI2MyA1MEg0Ljg0OXpNMTAuNDA0IDUwTDAgNjAuNDA0djEuNDE0TDExLjgxOCA1MGgtMS40MTR6TTE1Ljk2IDUwTDAgNjUuOTZ2MS40MTRMMTcuMzc0IDUwSDE1Ljk2ek0yMS41MTUgNTBMMCA3MS41MTV2MS40MTRMMjIuOTI5IDUwaC0xLjQxNHpNMjcuMDcxIDUwTDAgNzcuMDcxdjEuNDE0TDI4LjQ4NSA1MGgtMS40MTR6TTMyLjYyNiA1MEwwIDgyLjYyNnYxLjQxNEwzNC4wNDEgNTBoLTEuNDE1ek0zOC4xODIgNTBMMCA4OC4xODJ2MS40MTRMMzkuNTk2IDUwaC0xLjQxNHpNNDMuNzM3IDUwTDAgOTMuNzM3djEuNDE0TDQ1LjE1MSA1MGgtMS40MTR6TTUwIDUwaC0uNzA3TDAgOTkuMjkzVjEwMGguNzA3TDUwIDUwLjcwN1Y1MHoiLz48L2c+PHBhdGggY2xhc3M9ImY3YmRhNTg2LTMzNWUtNGNhMC05OWZiLTkxNWJiOGEyM2YyZCIgZD0iTTAgNTBoLS43MDdMLTUwIDk5LjI5M1YxMDBoLjcwN0wwIDUwLjcwN1Y1MHoiLz48Zz48cGF0aCBjbGFzcz0iZjdiZGE1ODYtMzM1ZS00Y2EwLTk5ZmItOTE1YmI4YTIzZjJkIiBkPSJNNTAgMHYuNzA3TDUwLjcwNyAwSDUwek01NC44NDkgMEw1MCA0Ljg0OXYxLjQxNEw1Ni4yNjMgMGgtMS40MTR6TTYwLjQwNCAwTDUwIDEwLjQwNHYxLjQxNEw2MS44MTggMGgtMS40MTR6TTY1Ljk2IDBMNTAgMTUuOTZ2MS40MTRMNjcuMzc0IDBINjUuOTZ6TTcxLjUxNSAwTDUwIDIxLjUxNXYxLjQxNEw3Mi45MjkgMGgtMS40MTR6TTc3LjA3MSAwTDUwIDI3LjA3MXYxLjQxNEw3OC40ODUgMGgtMS40MTR6TTgyLjYyNiAwTDUwIDMyLjYyNnYxLjQxNEw4NC4wNDEgMGgtMS40MTV6TTg4LjE4MiAwTDUwIDM4LjE4MnYxLjQxNEw4OS41OTYgMGgtMS40MTR6TTkzLjczNyAwTDUwIDQzLjczN3YxLjQxNEw5NS4xNTEgMGgtMS40MTR6TTEwMCAwaC0uNzA3TDUwIDQ5LjI5M1Y1MGguNzA3TDEwMCAuNzA3VjB6Ii8+PC9nPjxnPjxwYXRoIGNsYXNzPSJmN2JkYTU4Ni0zMzVlLTRjYTAtOTlmYi05MTViYjhhMjNmMmQiIGQ9Ik0wIDB2LjcwN0wuNzA3IDBIMHpNNC44NDkgMEwwIDQuODQ5djEuNDE0TDYuMjYzIDBINC44NDl6TTEwLjQwNCAwTDAgMTAuNDA0djEuNDE0TDExLjgxOCAwaC0xLjQxNHpNMTUuOTYgMEwwIDE1Ljk2djEuNDE0TDE3LjM3NCAwSDE1Ljk2ek0yMS41MTUgMEwwIDIxLjUxNXYxLjQxNEwyMi45MjkgMGgtMS40MTR6TTI3LjA3MSAwTDAgMjcuMDcxdjEuNDE0TDI4LjQ4NSAwaC0xLjQxNHpNMzIuNjI2IDBMMCAzMi42MjZ2MS40MTRMMzQuMDQxIDBoLTEuNDE1ek0zOC4xODIgMEwwIDM4LjE4MnYxLjQxNEwzOS41OTYgMGgtMS40MTR6TTQzLjczNyAwTDAgNDMuNzM3djEuNDE0TDQ1LjE1MSAwaC0xLjQxNHpNNTAgMGgtLjcwN0wwIDQ5LjI5M1Y1MGguNzA3TDUwIC43MDdWMHpNNi4yNjMgNTBMNTAgNi4yNjJWNC44NDhMNC44NDkgNTBoMS40MTR6TTExLjgxOCA1MEw1MCAxMS44MTh2LTEuNDE0TDEwLjQwNCA1MGgxLjQxNHpNMTcuMzc0IDUwTDUwIDE3LjM3NFYxNS45NkwxNS45NiA1MGgxLjQxNHpNMjIuOTI5IDUwTDUwIDIyLjkyOXYtMS40MTRMMjEuNTE1IDUwaDEuNDE0ek0yOC40ODUgNTBMNTAgMjguNDg1di0xLjQxNEwyNy4wNzEgNTBoMS40MTR6TTM0LjA0IDUwTDUwIDM0LjA0di0xLjQxNEwzMi42MjYgNTBoMS40MTR6TTM5LjU5NiA1MEw1MCAzOS41OTZ2LTEuNDE0TDM4LjE4MiA1MGgxLjQxNHpNNDUuMTUxIDUwTDUwIDQ1LjE1MXYtMS40MTRMNDMuNzM3IDUwaDEuNDE0ek01MCA1MHYtLjcwN2wtLjcwNy43MDdINTB6Ii8+PC9nPjxnPjxwYXRoIGNsYXNzPSJmN2JkYTU4Ni0zMzVlLTRjYTAtOTlmYi05MTViYjhhMjNmMmQiIGQ9Ik0wIDBoLS43MDdMLTUwIDQ5LjI5M1Y1MGguNzA3TDAgLjcwN1Ywek0tNDMuNzM3IDUwTDAgNi4yNjJWNC44NDhMLTQ1LjE1MSA1MGgxLjQxNHpNLTM4LjE4MiA1MEwwIDExLjgxOHYtMS40MTRMLTM5LjU5NiA1MGgxLjQxNHpNLTMyLjYyNiA1MEwwIDE3LjM3NFYxNS45NkwtMzQuMDQgNTBoMS40MTR6TS0yNy4wNzEgNTBMMCAyMi45Mjl2LTEuNDE0TC0yOC40ODUgNTBoMS40MTR6TS0yMS41MTUgNTBMMCAyOC40ODV2LTEuNDE0TC0yMi45MjkgNTBoMS40MTR6TS0xNS45NiA1MEwwIDM0LjA0di0xLjQxNEwtMTcuMzc0IDUwaDEuNDE0ek0tMTAuNDA0IDUwTDAgMzkuNTk2di0xLjQxNEwtMTEuODE4IDUwaDEuNDE0ek0tNC44NDkgNTBMMCA0NS4xNTF2LTEuNDE0TC02LjI2MyA1MGgxLjQxNHpNMCA1MHYtLjcwN0wtLjcwNyA1MEgweiIvPjwvZz48cGF0aCBjbGFzcz0iZjdiZGE1ODYtMzM1ZS00Y2EwLTk5ZmItOTE1YmI4YTIzZjJkIiBkPSJNMTAwLTUwaC0uNzA3TDUwLS43MDdWMGguNzA3TDEwMC00OS4yOTNWLTUweiIvPjxnPjxwYXRoIGNsYXNzPSJmN2JkYTU4Ni0zMzVlLTRjYTAtOTlmYi05MTViYjhhMjNmMmQiIGQ9Ik01MC01MGgtLjcwN0wwLS43MDdWMGguNzA3TDUwLTQ5LjI5M1YtNTB6TTYuMjYzIDBMNTAtNDMuNzM4di0xLjQxNEw0Ljg0OSAwaDEuNDE0ek0xMS44MTggMEw1MC0zOC4xODJ2LTEuNDE0TDEwLjQwNCAwaDEuNDE0ek0xNy4zNzQgMEw1MC0zMi42MjZ2LTEuNDE0TDE1Ljk2IDBoMS40MTR6TTIyLjkyOSAwTDUwLTI3LjA3MXYtMS40MTRMMjEuNTE1IDBoMS40MTR6TTI4LjQ4NSAwTDUwLTIxLjUxNXYtMS40MTRMMjcuMDcxIDBoMS40MTR6TTM0LjA0IDBMNTAtMTUuOTZ2LTEuNDE0TDMyLjYyNiAwaDEuNDE0ek0zOS41OTYgMEw1MC0xMC40MDR2LTEuNDE0TDM4LjE4MiAwaDEuNDE0ek00NS4xNTEgMEw1MC00Ljg0OXYtMS40MTRMNDMuNzM3IDBoMS40MTR6TTUwIDB2LS43MDdMNDkuMjkzIDBINTB6Ii8+PC9nPjxnPjxwYXRoIGNsYXNzPSJmN2JkYTU4Ni0zMzVlLTRjYTAtOTlmYi05MTViYjhhMjNmMmQiIGQ9Ik0wLTUwaC0uNzA3TC01MC0uNzA3VjBoLjcwN0wwLTQ5LjI5M1YtNTB6TS00My43MzcgMEwwLTQzLjczOHYtMS40MTRMLTQ1LjE1MSAwaDEuNDE0ek0tMzguMTgyIDBMMC0zOC4xODJ2LTEuNDE0TC0zOS41OTYgMGgxLjQxNHpNLTMyLjYyNiAwTDAtMzIuNjI2di0xLjQxNEwtMzQuMDQgMGgxLjQxNHpNLTI3LjA3MSAwTDAtMjcuMDcxdi0xLjQxNEwtMjguNDg1IDBoMS40MTR6TS0yMS41MTUgMEwwLTIxLjUxNXYtMS40MTRMLTIyLjkyOSAwaDEuNDE0ek0tMTUuOTYgMEwwLTE1Ljk2di0xLjQxNEwtMTcuMzc0IDBoMS40MTR6TS0xMC40MDQgMEwwLTEwLjQwNHYtMS40MTRMLTExLjgxOCAwaDEuNDE0ek0tNC44NDkgMEwwLTQuODQ5di0xLjQxNEwtNi4yNjMgMGgxLjQxNHpNMCAwdi0uNzA3TC0uNzA3IDBIMHoiLz48L2c+PC9wYXR0ZXJuPjxzdHlsZT4uYWUwZTA4NjYtMjYwZC00NWM1LWJmNTUtZmQ4NGI4NDVmZjZmLC5iN2M4MmI1ZC03Njc1LTQwOWMtODNkNy1jYjIzYjc1ZmM3ZDMsLmI4YTA5MDVkLWIyOTMtNDBlNy1hMWVhLTEyZmMxOTBkZDg4NywuYmE0Y2VmYmEtMTEzZC00YmJhLWI2ZTYtNTMxMDk0NDNiY2I3LC5iZGE4NDRlNi1mZmY4LTQwY2UtOGQ1NC1kZGVlZGYxNThmYTUsLmJmZTBiZjliLTg3ZDEtNDRkNy05YjFkLWUxNTc2MTE0NDUwMSwuZjhkOGRkMmEtMjVkZS00NGYyLTg0OWEtNmVmNTQ1ZWE3ZjBkLC5mYzUxOWU5ZC1hNzliLTRiZGMtYmYxNS0xZDMwYjMzYWVjYTV7ZmlsbDpub25lfS5hOWNlYmY0NS1lOWQ1LTQ2ZTYtOWZiYy01ZGIyZGFhZGM3ZGEsLmFjZDhmYmVhLTIyMDgtNGNlNy05Y2YwLWMzZmZhMWQ5MjExMCwuZjJmMTI5YWMtZDE2My00MzhjLTlmNGEtZDNkMjA3MzY4ZTgwLC5mN2JkYTU4Ni0zMzVlLTRjYTAtOTlmYi05MTViYjhhMjNmMmR7ZmlsbDojMTUxNTE1fS5iZmUwYmY5Yi04N2QxLTQ0ZDctOWIxZC1lMTU3NjExNDQ1MDEsLmY3YmRhNTg2LTMzNWUtNGNhMC05OWZiLTkxNWJiOGEyM2YyZHtzdHJva2U6IzE1MTUxNX0uZjdiZGE1ODYtMzM1ZS00Y2EwLTk5ZmItOTE1YmI4YTIzZjJke3N0cm9rZS1taXRlcmxpbWl0OjEwfS5iY2U3OTFjZC1kODMzLTQwNWItODQ0OS0zOTViMDlkMGZmOWMsLmY4ZDhkZDJhLTI1ZGUtNDRmMi04NDlhLTZlZjU0NWVhN2YwZHtzdHJva2U6IzA2Y30uYTQ0NzgxZTEtMDdmOS00YjIxLWE4MTMtNWM3Mzc5NTNkNjRhLC5hZTBlMDg2Ni0yNjBkLTQ1YzUtYmY1NS1mZDg0Yjg0NWZmNmYsLmI4YTA5MDVkLWIyOTMtNDBlNy1hMWVhLTEyZmMxOTBkZDg4NywuYmE0Y2VmYmEtMTEzZC00YmJhLWI2ZTYtNTMxMDk0NDNiY2I3LC5iY2U3OTFjZC1kODMzLTQwNWItODQ0OS0zOTViMDlkMGZmOWMsLmJkYTg0NGU2LWZmZjgtNDBjZS04ZDU0LWRkZWVkZjE1OGZhNSwuYmZlMGJmOWItODdkMS00NGQ3LTliMWQtZTE1NzYxMTQ0NTAxLC5mOGQ4ZGQyYS0yNWRlLTQ0ZjItODQ5YS02ZWY1NDVlYTdmMGQsLmZjNTE5ZTlkLWE3OWItNGJkYy1iZjE1LTFkMzBiMzNhZWNhNXtzdHJva2UtbGluZWNhcDpyb3VuZDtzdHJva2UtbGluZWpvaW46cm91bmR9LmFlMGUwODY2LTI2MGQtNDVjNS1iZjU1LWZkODRiODQ1ZmY2ZiwuYjhhMDkwNWQtYjI5My00MGU3LWExZWEtMTJmYzE5MGRkODg3LC5iYTRjZWZiYS0xMTNkLTRiYmEtYjZlNi01MzEwOTQ0M2JjYjcsLmJjZTc5MWNkLWQ4MzMtNDA1Yi04NDQ5LTM5NWIwOWQwZmY5YywuYmRhODQ0ZTYtZmZmOC00MGNlLThkNTQtZGRlZWRmMTU4ZmE1LC5mOGQ4ZGQyYS0yNWRlLTQ0ZjItODQ5YS02ZWY1NDVlYTdmMGR7c3Ryb2tlLXdpZHRoOjJweH0uYWUwZTA4NjYtMjYwZC00NWM1LWJmNTUtZmQ4NGI4NDVmZjZme3N0cm9rZTojYzBkNjgyfS5hNmU1NGQwYi0xYjE5LTQ5NTItYjYzOC1iYWRhMmZjNjkxYjAsLmYyZjEyOWFjLWQxNjMtNDM4Yy05ZjRhLWQzZDIwNzM2OGU4MHtmb250LXNpemU6MTFweDtmb250LWZhbWlseTpSZWRIYXRUZXh0LCZxdW90O1JlZCBIYXQgVGV4dCZxdW90OyxPdmVycGFzcywmcXVvdDtIZWx2ZXRpY2EgTmV1ZSZxdW90OyxBcmlhbCxzYW5zLXNlcmlmO2ZvbnQtd2VpZ2h0OjUwMH0uYTQ0NzgxZTEtMDdmOS00YjIxLWE4MTMtNWM3Mzc5NTNkNjRhLC5hNmU1NGQwYi0xYjE5LTQ5NTItYjYzOC1iYWRhMmZjNjkxYjAsLmJjZTc5MWNkLWQ4MzMtNDA1Yi04NDQ5LTM5NWIwOWQwZmY5Y3tmaWxsOiNmZmZ9LmE0NDc4MWUxLTA3ZjktNGIyMS1hODEzLTVjNzM3OTUzZDY0YSwuYmRhODQ0ZTYtZmZmOC00MGNlLThkNTQtZGRlZWRmMTU4ZmE1LC5mYzUxOWU5ZC1hNzliLTRiZGMtYmYxNS0xZDMwYjMzYWVjYTV7c3Ryb2tlOiM1YjViNWJ9LmE0NDc4MWUxLTA3ZjktNGIyMS1hODEzLTVjNzM3OTUzZDY0YSwuZmM1MTllOWQtYTc5Yi00YmRjLWJmMTUtMWQzMGIzM2FlY2E1e3N0cm9rZS13aWR0aDoxLjVweH0uYjhhMDkwNWQtYjI5My00MGU3LWExZWEtMTJmYzE5MGRkODg3e3N0cm9rZTojNWU0MGJlfS5mYzljMDA0ZS0zNGY1LTQwYmUtYmEzNy0wNzRhN2Q5Y2EyMWN7ZmlsbDojZThlOGU4fS5hY2Q4ZmJlYS0yMjA4LTRjZTctOWNmMC1jM2ZmYTFkOTIxMTB7Zm9udC1zaXplOjEycHg7Zm9udC1mYW1pbHk6UmVkSGF0VGV4dCwmcXVvdDtSZWQgSGF0IFRleHQmcXVvdDssT3ZlcnBhc3MsJnF1b3Q7SGVsdmV0aWNhIE5ldWUmcXVvdDssQXJpYWwsc2Fucy1zZXJpZjtmb250LXdlaWdodDo3MDB9LmJhNGNlZmJhLTExM2QtNGJiYS1iNmU2LTUzMTA5NDQzYmNiN3tzdHJva2U6IzRjYjZkNn0uZjMwN2VlMDQtNzQ5ZC00OGNkLWE2ZjYtZmUxYjgzZDUwODRke2ZpbGw6IzVlNDBiZX0uYjVjODk0MDItYTZkOS00OWMwLThkZWYtNGQ3MGUzNDRlMmM4e29wYWNpdHk6LjM1O21peC1ibGVuZC1tb2RlOm11bHRpcGx5fS5iNDRmZTg2Yi1kODE0LTQ4MmUtOTlkZC1mOTE5NmUyMWEyNTl7ZmlsbDojMDZjfTwvc3R5bGU+PC9kZWZzPjxnIHN0eWxlPSJpc29sYXRpb246aXNvbGF0ZSI+PGcgaWQ9ImI5OTM2YTZjLWZjZTMtNDI2Yi1hMDA1LTM3ZTdiMWUwYTViYiIgZGF0YS1uYW1lPSJhcnR3b3JrIj48cGF0aCBjbGFzcz0iZjhkOGRkMmEtMjVkZS00NGYyLTg0OWEtNmVmNTQ1ZWE3ZjBkIiBkPSJNNjM5IDExNC4wMTdWMjA5LjUiLz48cGF0aCBzdHJva2Utd2lkdGg9IjEwIiBzdHJva2U9IiNmZmYiIHN0cm9rZS1saW5lY2FwPSJyb3VuZCIgc3Ryb2tlLWxpbmVqb2luPSJyb3VuZCIgZmlsbD0ibm9uZSIgZD0iTTYxNy40MjUgMTg5LjVINjQ1LjUiLz48cGF0aCBjbGFzcz0iYWUwZTA4NjYtMjYwZC00NWM1LWJmNTUtZmQ4NGI4NDVmZjZmIiBkPSJNNzYwIDE4OS41SDQxOS44MzJ2MjBNNjU5IDE4OS41djIwIi8+PHBhdGggY2xhc3M9ImY4ZDhkZDJhLTI1ZGUtNDRmMi04NDlhLTZlZjU0NWVhN2YwZCIgZD0iTTM5OS41IDExNC4wMTdWMjA5LjUiLz48dGV4dCBjbGFzcz0iZjJmMTI5YWMtZDE2My00MzhjLTlmNGEtZDNkMjA3MzY4ZTgwIiB0cmFuc2Zvcm09InRyYW5zbGF0ZSg0MTguODMyIDE2Ny41MDEpIj5PdXQtb2YtQmFuZCBNYW5hZ2VtZW50PHRzcGFuIHg9IjAiIHk9IjEyIj5uZXR3b3JrIChvcHRpb25hbCk8L3RzcGFuPjwvdGV4dD48cGF0aCBjbGFzcz0iZjhkOGRkMmEtMjVkZS00NGYyLTg0OWEtNmVmNTQ1ZWE3ZjBkIiBkPSJNNjg5Ljc3OCAxMTQuMDY5djIwIi8+PHRleHQgY2xhc3M9ImYyZjEyOWFjLWQxNjMtNDM4Yy05ZjRhLWQzZDIwNzM2OGU4MCIgdHJhbnNmb3JtPSJ0cmFuc2xhdGUoNjcyLjAwMSAxNjQuNDE0KSI+Um91dGVyPC90ZXh0PjxwYXRoIGNsYXNzPSJhNDQ3ODFlMS0wN2Y5LTRiMjEtYTgxMy01YzczNzk1M2Q2NGEiIGQ9Ik02NjIuMjc4IDEzNC4wNjloNTV2MTMuNzVoLTU1eiIvPjxwYXRoIGNsYXNzPSJiZGE4NDRlNi1mZmY4LTQwY2UtOGQ1NC1kZGVlZGYxNThmYTUiIGQ9Ik03MTEuMzk4IDEzOS45NjYiLz48cGF0aCBjbGFzcz0iZmM1MTllOWQtYTc5Yi00YmRjLWJmMTUtMWQzMGIzM2FlY2E1IiBkPSJNNjY4LjE3IDEzOC45MzF2My45NjVNNjc0LjA2MyAxMzguOTMxdjMuOTY1TTY3OS45NTYgMTM4LjkzMXYzLjk2NU02ODUuODQ5IDEzOC45MzF2My45NjVNNjkxLjc0MiAxMzguOTMxdjMuOTY1TTY5Ny42MzUgMTM4LjkzMXYzLjk2NSIvPjxwYXRoIGNsYXNzPSJhZTBlMDg2Ni0yNjBkLTQ1YzUtYmY1NS1mZDg0Yjg0NWZmNmYiIGQ9Ik02ODkuNzc4IDE2OS41djIwIi8+PHBhdGggY2xhc3M9ImI4YTA5MDVkLWIyOTMtNDBlNy1hMWVhLTEyZmMxOTBkZDg4NyIgZD0iTTY0OSAzNzh2MjVNNDA5LjUgMzc4djI1Ii8+PHBhdGggY2xhc3M9ImZjOWMwMDRlLTM0ZjUtNDBiZS1iYTM3LTA3NGE3ZDljYTIxYyIgZD0iTTI5OSAyMDkuNWgyMjFWMzc4SDI5OXoiLz48dGV4dCBjbGFzcz0iYWNkOGZiZWEtMjIwOC00Y2U3LTljZjAtYzNmZmExZDkyMTEwIiB0cmFuc2Zvcm09InRyYW5zbGF0ZSgzMTQgMjM0LjYwNCkiPjx0c3Bhbj5Db250cm9sIHBsYW5lIG5vZGVzIHgzPC90c3Bhbj48L3RleHQ+PHBhdGggY2xhc3M9ImZjOWMwMDRlLTM0ZjUtNDBiZS1iYTM3LTA3NGE3ZDljYTIxYyIgZD0iTTAgMjA5LjVoMjgxVjM3OEgweiIvPjxwYXRoIGNsYXNzPSJiOGEwOTA1ZC1iMjkzLTQwZTctYTFlYS0xMmZjMTkwZGQ4ODciIGQ9Ik0wIDQwM2g3NjAiLz48cGF0aCBjbGFzcz0iZjhkOGRkMmEtMjVkZS00NGYyLTg0OWEtNmVmNTQ1ZWE3ZjBkIiBkPSJNMCAxMTQuMDE3aDc2MCIvPjx0ZXh0IGNsYXNzPSJmMmYxMjlhYy1kMTYzLTQzOGMtOWY0YS1kM2QyMDczNjhlODAiIHRyYW5zZm9ybT0idHJhbnNsYXRlKDAgMTA0LjAxNykiPkJhcmVtZXRhbCBuZXR3b3JrPC90ZXh0Pjx0ZXh0IGNsYXNzPSJmMmYxMjlhYy1kMTYzLTQzOGMtOWY0YS1kM2QyMDczNjhlODAiIHRyYW5zZm9ybT0idHJhbnNsYXRlKDEgNDE5LjgxNykiPlByb3Zpc2lvbmluZyBuZXR3b3JrIChvcHRpb25hbCk8L3RleHQ+PHBhdGggY2xhc3M9ImI4YTA5MDVkLWIyOTMtNDBlNy1hMWVhLTEyZmMxOTBkZDg4NyIgZD0iTTIyLjcyNyA0MDN2LTUwLjI1Ii8+PHBhdGggY2xhc3M9ImY4ZDhkZDJhLTI1ZGUtNDRmMi04NDlhLTZlZjU0NWVhN2YwZCIgZD0iTTIyLjcyNyAxMTQuMDA5VjI2NC4yNU00MzYuNDM5IDk0LjAxN3YyMCIvPjxwYXRoIGNsYXNzPSJiYTRjZWZiYS0xMTNkLTRiYmEtYjZlNi01MzEwOTQ0M2JjYjciIGQ9Ik00MzYuNDM5IDM4LjY3MnYyMCIvPjx0ZXh0IGNsYXNzPSJmMmYxMjlhYy1kMTYzLTQzOGMtOWY0YS1kM2QyMDczNjhlODAiIHRyYW5zZm9ybT0idHJhbnNsYXRlKDQxOC42NjMgODkuMDE3KSI+Um91dGVyPC90ZXh0PjxwYXRoIGNsYXNzPSJhNDQ3ODFlMS0wN2Y5LTRiMjEtYTgxMy01YzczNzk1M2Q2NGEiIGQ9Ik00MDguOTM5IDU4LjY3Mmg1NXYxMy43NWgtNTV6Ii8+PHBhdGggY2xhc3M9ImJkYTg0NGU2LWZmZjgtNDBjZS04ZDU0LWRkZWVkZjE1OGZhNSIgZD0iTTQ1OC4wNiA2NC41NjkiLz48cGF0aCBjbGFzcz0iZmM1MTllOWQtYTc5Yi00YmRjLWJmMTUtMWQzMGIzM2FlY2E1IiBkPSJNNDE0LjgzMiA2My41MzV2My45NjRNNDIwLjcyNSA2My41MzV2My45NjRNNDI2LjYxOCA2My41MzV2My45NjRNNDMyLjUxMSA2My41MzV2My45NjRNNDM4LjQwMyA2My41MzV2My45NjRNNDQ0LjI5NiA2My41MzV2My45NjQiLz48cGF0aCBjbGFzcz0iZjhkOGRkMmEtMjVkZS00NGYyLTg0OWEtNmVmNTQ1ZWE3ZjBkIiBkPSJNNTE4LjI1MiA5NC4wMTd2MjAiLz48Zz48dGV4dCBjbGFzcz0iZjJmMTI5YWMtZDE2My00MzhjLTlmNGEtZDNkMjA3MzY4ZTgwIiB0cmFuc2Zvcm09InRyYW5zbGF0ZSg0ODQuODc4IDg5LjgzOCkiPkRIQ1Agc2VydmVyPC90ZXh0PjxwYXRoIGNsYXNzPSJhNDQ3ODFlMS0wN2Y5LTRiMjEtYTgxMy01YzczNzk1M2Q2NGEiIGQ9Ik00OTAuNjg0IDU5LjQ5M2g1NXYxMy43NWgtNTV6Ii8+PHBhdGggY2xhc3M9ImJkYTg0NGU2LWZmZjgtNDBjZS04ZDU0LWRkZWVkZjE1OGZhNSIgZD0iTTUzOS44MDUgNjUuMzkiLz48cGF0aCBjbGFzcz0iZmM1MTllOWQtYTc5Yi00YmRjLWJmMTUtMWQzMGIzM2FlY2E1IiBkPSJNNDk3LjQyIDY3LjM1aDguMjUiLz48L2c+PHBhdGggY2xhc3M9ImY4ZDhkZDJhLTI1ZGUtNDRmMi04NDlhLTZlZjU0NWVhN2YwZCIgZD0iTTYwMS4wNjMgOTQuMDE3djIwIi8+PGc+PHRleHQgY2xhc3M9ImYyZjEyOWFjLWQxNjMtNDM4Yy05ZjRhLWQzZDIwNzM2OGU4MCIgdHJhbnNmb3JtPSJ0cmFuc2xhdGUoNTcxLjgxNCA4OS44MzgpIj5ETlMgc2VydmVyPC90ZXh0PjxwYXRoIGNsYXNzPSJhNDQ3ODFlMS0wN2Y5LTRiMjEtYTgxMy01YzczNzk1M2Q2NGEiIGQ9Ik01NzMuNDk1IDU5LjQ5M2g1NXYxMy43NWgtNTV6Ii8+PHBhdGggY2xhc3M9ImJkYTg0NGU2LWZmZjgtNDBjZS04ZDU0LWRkZWVkZjE1OGZhNSIgZD0iTTYyMi42MTYgNjUuMzkiLz48cGF0aCBjbGFzcz0iZmM1MTllOWQtYTc5Yi00YmRjLWJmMTUtMWQzMGIzM2FlY2E1IiBkPSJNNTgwLjIzIDY3LjM1aDguMjUiLz48L2c+PGc+PHRleHQgdHJhbnNmb3JtPSJ0cmFuc2xhdGUoNjczLjk4MSA0MjYuMDE3KSIgZm9udC1zaXplPSIxMCIgZmlsbD0iI2YzZjNmMyIgZm9udC1mYW1pbHk9IlJlZEhhdFRleHQsJnF1b3Q7UmVkIEhhdCBUZXh0JnF1b3Q7LE92ZXJwYXNzLCZxdW90O0hlbHZldGljYSBOZXVlJnF1b3Q7LEFyaWFsLHNhbnMtc2VyaWYiPjcxX09wZW5TaGlmdF8xMDIwPC90ZXh0PjxwYXRoIGNsYXNzPSJiN2M4MmI1ZC03Njc1LTQwOWMtODNkNy1jYjIzYjc1ZmM3ZDMiIGQ9Ik0wIDQwM2g3NjB2NDBIMHoiLz48L2c+PHBhdGggY2xhc3M9ImJhNGNlZmJhLTExM2QtNGJiYS1iNmU2LTUzMTA5NDQzYmNiNyIgZD0iTTAgMzguNjcyaDc2MCIvPjx0ZXh0IGNsYXNzPSJmMmYxMjlhYy1kMTYzLTQzOGMtOWY0YS1kM2QyMDczNjhlODAiIHRyYW5zZm9ybT0idHJhbnNsYXRlKC41IDI4LjY3MSkiPkludGVybmV0IGFjY2VzczwvdGV4dD48cGF0aCBjbGFzcz0iZmM5YzAwNGUtMzRmNS00MGJlLWJhMzctMDc0YTdkOWNhMjFjIiBkPSJNNDEuMjA5IDIxOS41SDBWMjQwaDQxLjIwOWM1LjY2MSAwIDUuNjYxLTIwLjUgMC0yMC41eiIvPjx0ZXh0IGNsYXNzPSJhY2Q4ZmJlYS0yMjA4LTRjZTctOWNmMC1jM2ZmYTFkOTIxMTAiIHRyYW5zZm9ybT0idHJhbnNsYXRlKDE1IDIzNC42MDQpIj5Qcm92aXNpb25pbmcgbm9kZTwvdGV4dD48Zz48cGF0aCBjbGFzcz0iYmZlMGJmOWItODdkMS00NGQ3LTliMWQtZTE1NzYxMTQ0NTAxIiBkPSJNMTkxLjk3MiAxMjMuNzI2djEuNSIvPjxwYXRoIHN0cm9rZS1kYXNoYXJyYXk9IjMgMyIgc3Ryb2tlLWxpbmVjYXA9InJvdW5kIiBzdHJva2UtbGluZWpvaW49InJvdW5kIiBzdHJva2U9IiMxNTE1MTUiIGZpbGw9Im5vbmUiIGQ9Ik0xOTEuOTcyIDEyOC4yMjZ2MTYuNSIvPjxwYXRoIGNsYXNzPSJiZmUwYmY5Yi04N2QxLTQ0ZDctOWIxZC1lMTU3NjExNDQ1MDEiIGQ9Ik0xOTEuOTcyIDE0Ni4yMjZ2MS41aDEuNSIvPjxwYXRoIHN0cm9rZS1kYXNoYXJyYXk9IjIuOTkxIDIuOTkxIiBzdHJva2UtbGluZWNhcD0icm91bmQiIHN0cm9rZS1saW5lam9pbj0icm91bmQiIHN0cm9rZT0iIzE1MTUxNSIgZmlsbD0ibm9uZSIgZD0iTTE5Ni40NjMgMTQ3LjcyNmgxNjAuMDQxIi8+PHBhdGggY2xhc3M9ImJmZTBiZjliLTg3ZDEtNDRkNy05YjFkLWUxNTc2MTE0NDUwMSIgZD0iTTM1OCAxNDcuNzI2aDEuNXYxLjUiLz48cGF0aCBzdHJva2UtZGFzaGFycmF5PSIyLjg4OCAyLjg4OCIgc3Ryb2tlLWxpbmVjYXA9InJvdW5kIiBzdHJva2UtbGluZWpvaW49InJvdW5kIiBzdHJva2U9IiMxNTE1MTUiIGZpbGw9Im5vbmUiIGQ9Ik0zNTkuNSAxNTIuMTE0djQ0Ljc2NiIvPjxwYXRoIGNsYXNzPSJiZmUwYmY5Yi04N2QxLTQ0ZDctOWIxZC1lMTU3NjExNDQ1MDEiIGQ9Ik0zNTkuNSAxOTguMzI0djEuNSIvPjxwYXRoIGNsYXNzPSJhOWNlYmY0NS1lOWQ1LTQ2ZTYtOWZiYy01ZGIyZGFhZGM3ZGEiIGQ9Ik0zNTQuNTE0IDE5OC4zNjVMMzU5LjUgMjA3bDQuOTg2LTguNjM1aC05Ljk3MnoiLz48L2c+PHBhdGggc3Ryb2tlLXdpZHRoPSI4IiBzdHJva2U9IiNmZmYiIHN0cm9rZS1saW5lY2FwPSJyb3VuZCIgc3Ryb2tlLWxpbmVqb2luPSJyb3VuZCIgZmlsbD0ibm9uZSIgZD0iTTI2OC4yNTUgMTIzLjcyNnY5aDM1MC44NTlWMjA3Ii8+PGc+PHBhdGggY2xhc3M9ImJmZTBiZjliLTg3ZDEtNDRkNy05YjFkLWUxNTc2MTE0NDUwMSIgZD0iTTI2OC4yNTUgMTIzLjcyNnYxLjUiLz48cGF0aCBzdHJva2UtZGFzaGFycmF5PSIyIDIiIHN0cm9rZS1saW5lY2FwPSJyb3VuZCIgc3Ryb2tlLWxpbmVqb2luPSJyb3VuZCIgc3Ryb2tlPSIjMTUxNTE1IiBmaWxsPSJub25lIiBkPSJNMjY4LjI1NSAxMjcuMjI2djMiLz48cGF0aCBjbGFzcz0iYmZlMGJmOWItODdkMS00NGQ3LTliMWQtZTE1NzYxMTQ0NTAxIiBkPSJNMjY4LjI1NSAxMzEuMjI2djEuNWgxLjUiLz48cGF0aCBzdHJva2UtZGFzaGFycmF5PSIzLjAyNSAzLjAyNSIgc3Ryb2tlLWxpbmVjYXA9InJvdW5kIiBzdHJva2UtbGluZWpvaW49InJvdW5kIiBzdHJva2U9IiMxNTE1MTUiIGZpbGw9Im5vbmUiIGQ9Ik0yNzIuNzggMTMyLjcyNmgzNDMuMzIxIi8+PHBhdGggY2xhc3M9ImJmZTBiZjliLTg3ZDEtNDRkNy05YjFkLWUxNTc2MTE0NDUwMSIgZD0iTTYxNy42MTQgMTMyLjcyNmgxLjV2MS41Ii8+PHBhdGggc3Ryb2tlLWRhc2hhcnJheT0iMy4wNTIgMy4wNTIiIHN0cm9rZS1saW5lY2FwPSJyb3VuZCIgc3Ryb2tlLWxpbmVqb2luPSJyb3VuZCIgc3Ryb2tlPSIjMTUxNTE1IiBmaWxsPSJub25lIiBkPSJNNjE5LjExNCAxMzcuMjc4djU5LjUyIi8+PHBhdGggY2xhc3M9ImJmZTBiZjliLTg3ZDEtNDRkNy05YjFkLWUxNTc2MTE0NDUwMSIgZD0iTTYxOS4xMTQgMTk4LjMyNHYxLjUiLz48cGF0aCBjbGFzcz0iYTljZWJmNDUtZTlkNS00NmU2LTlmYmMtNWRiMmRhYWRjN2RhIiBkPSJNNjE0LjEyNyAxOTguMzY1bDQuOTg3IDguNjM1IDQuOTg2LTguNjM1aC05Ljk3M3oiLz48L2c+PHBhdGggZD0iTTI2MCAyOTAuNXYzNkgxNnYtMzZoMjQ0bTEtMUgxNXYzOGgyNDZ2LTM4eiIgZmlsbD0iI2Q1ZDVkNSIvPjx0ZXh0IHRyYW5zZm9ybT0idHJhbnNsYXRlKDEwMS44OTMgMzExLjU0NykiIGZpbGw9IiNjNGM0YzQiIGZvbnQtc2l6ZT0iMTEiIGZvbnQtZmFtaWx5PSJSZWRIYXRUZXh0LCZxdW90O1JlZCBIYXQgVGV4dCZxdW90OyxPdmVycGFzcywmcXVvdDtIZWx2ZXRpY2EgTmV1ZSZxdW90OyxBcmlhbCxzYW5zLXNlcmlmIiBmb250LXdlaWdodD0iNTAwIj5Cb290c3RyYXAgVk08L3RleHQ+PGc+PHBhdGggY2xhc3M9ImZjOWMwMDRlLTM0ZjUtNDBiZS1iYTM3LTA3NGE3ZDljYTIxYyIgZD0iTTUzOC41IDIwOS41aDIyMVYzNzhoLTIyMXoiLz48dGV4dCBjbGFzcz0iYWNkOGZiZWEtMjIwOC00Y2U3LTljZjAtYzNmZmExZDkyMTEwIiB0cmFuc2Zvcm09InRyYW5zbGF0ZSg1NTIuNDY3IDIzNC42MDQpIj48dHNwYW4+V29ya2VyIG5vZGVzIHhOPC90c3Bhbj48L3RleHQ+PC9nPjxnPjxwYXRoIGNsYXNzPSJmMzA3ZWUwNC03NDlkLTQ4Y2QtYTZmNi1mZTFiODNkNTA4NGQiIGQ9Ik0xNjEuNjc4IDM0Mi41SC40NTVWMzYzaDE2MS4yMjNjNS42NjEgMCA1LjY2MS0yMC41IDAtMjAuNXoiLz48cGF0aCBkPSJNMTYxLjY3OCAzNDIuNUguNDU1VjM2M2gxNjEuMjIzYzUuNjYxIDAgNS42NjEtMjAuNSAwLTIwLjV6IiBmaWxsPSJ1cmwoI2E5MWY5ZmJjLWZiZDEtNDljZC04NzlhLTI3M2E4YWU1MjE4ZCkiLz48dGV4dCBjbGFzcz0iYTZlNTRkMGItMWIxOS00OTUyLWI2MzgtYmFkYTJmYzY5MWIwIiB0cmFuc2Zvcm09InRyYW5zbGF0ZSg1NS42NjEgMzU2LjA3NCkiPlByb3Zpc2lvbmluZyBicmlkZ2U8L3RleHQ+PHBhdGggY2xhc3M9ImYzMDdlZTA0LTc0OWQtNDhjZC1hNmY2LWZlMWI4M2Q1MDg0ZCIgZD0iTTQxLjIyMyAzNDIuNUgwVjM2M2g0MS4yMjNjNS42NjEgMCA1LjY2MS0yMC41IDAtMjAuNXoiLz48dGV4dCBjbGFzcz0iYTZlNTRkMGItMWIxOS00OTUyLWI2MzgtYmFkYTJmYzY5MWIwIiB0cmFuc2Zvcm09InRyYW5zbGF0ZSgxMS42NzEgMzU2LjA3NCkiPmVubzE8L3RleHQ+PGc+PHBhdGggY2xhc3M9ImI0NGZlODZiLWQ4MTQtNDgyZS05OWRkLWY5MTk2ZTIxYTI1OSIgZD0iTTE2MS42NjQgMjU0LjVILjQ1NVYyNzVoMTYxLjIwOWM1LjY2MSAwIDUuNjYxLTIwLjUgMC0yMC41eiIvPjxwYXRoIGQ9Ik0xNjEuNjY0IDI1NC41SC40NTVWMjc1aDE2MS4yMDljNS42NjEgMCA1LjY2MS0yMC41IDAtMjAuNXoiIGZpbGw9InVybCgjYWU5N2U3OTUtM2M0OC00NDI0LTg5YTQtMTBiYmQ4MTY5YmZlKSIvPjx0ZXh0IGNsYXNzPSJhNmU1NGQwYi0xYjE5LTQ5NTItYjYzOC1iYWRhMmZjNjkxYjAiIHRyYW5zZm9ybT0idHJhbnNsYXRlKDU1LjY3NyAyNjkuMzQ5KSI+QmFyZW1ldGFsIGJyaWRnZTwvdGV4dD48Zz48cGF0aCBjbGFzcz0iYjQ0ZmU4NmItZDgxNC00ODJlLTk5ZGQtZjkxOTZlMjFhMjU5IiBkPSJNNDEuMjA5IDI1NC41SDBWMjc1aDQxLjIwOWM1LjY2MSAwIDUuNjYxLTIwLjUgMC0yMC41eiIvPjx0ZXh0IGNsYXNzPSJhNmU1NGQwYi0xYjE5LTQ5NTItYjYzOC1iYWRhMmZjNjkxYjAiIHRyYW5zZm9ybT0idHJhbnNsYXRlKDExLjY3MSAyNjkuMzQ5KSI+ZW5vMjwvdGV4dD48L2c+PC9nPjwvZz48Y2lyY2xlIGNsYXNzPSJiY2U3OTFjZC1kODMzLTQwNWItODQ0OS0zOTViMDlkMGZmOWMiIGN4PSIyNjguMjU1IiBjeT0iMTEzLjM3MSIgcj0iOS4zNTUiLz48dGV4dCBjbGFzcz0iZjJmMTI5YWMtZDE2My00MzhjLTlmNGEtZDNkMjA3MzY4ZTgwIiB0cmFuc2Zvcm09InRyYW5zbGF0ZSgyMzkuMjcxIDk4LjAxNikiPkluZ3Jlc3MgVklQPC90ZXh0PjxjaXJjbGUgY2xhc3M9ImJjZTc5MWNkLWQ4MzMtNDA1Yi04NDQ5LTM5NWIwOWQwZmY5YyIgY3g9IjE5MS45NzIiIGN5PSIxMTMuMzcxIiByPSI5LjM1NSIvPjx0ZXh0IGNsYXNzPSJmMmYxMjlhYy1kMTYzLTQzOGMtOWY0YS1kM2QyMDczNjhlODAiIHRyYW5zZm9ybT0idHJhbnNsYXRlKDE3Mi41NTIgOTguMDE2KSI+QVBJIFZJUDwvdGV4dD48L2c+PC9nPjwvc3ZnPgo=" alt="Deployment phase two"/>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="ipi-install-prerequisites"><a class="link" href="#ipi-install-prerequisites">2. Prerequisites</a></h2>
<div class="sectionbody">
<!-- toc disabled -->
<div class="paragraph">
<p>Installer-provisioned installation of OpenShift Container Platform requires:</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>One provisioner node with Red Hat Enterprise Linux (RHEL) 8.x installed.</p>
</li>
<li>
<p>Three control plane nodes.</p>
</li>
<li>
<p>Baseboard Management Controller (BMC) access to each node.</p>
</li>
<li>
<p>At least one network:</p>
<div class="olist loweralpha">
<ol class="loweralpha" type="a">
<li>
<p>One <strong>required</strong> routable network</p>
</li>
<li>
<p>One <strong>optional</strong> network for provisioning nodes; and,</p>
</li>
<li>
<p>One <strong>optional</strong> management network.</p>
</li>
</ol>
</div>
</li>
</ol>
</div>
<div class="paragraph">
<p>Before starting an installer-provisioned installation of OpenShift Container Platform, ensure the hardware environment meets the following requirements.</p>
</div>
<div class="sect2">
<h3 id="node-requirements_ipi-install-prerequisites"><a class="link" href="#node-requirements_ipi-install-prerequisites">2.1. Node requirements</a></h3>
<div class="paragraph">
<p>Installer-provisioned installation involves a number of hardware node requirements:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><strong>CPU architecture:</strong> All nodes must use <code>x86_64</code> CPU architecture.</p>
</li>
<li>
<p><strong>Similar nodes:</strong> Red Hat recommends nodes have an identical configuration per role. That is, Red Hat recommends nodes be the same brand and model with the same CPU, memory and storage configuration.</p>
</li>
<li>
<p><strong>Baseboard Management Controller:</strong> The <code>provisioner</code> node must be able to access the baseboard management controller (BMC) of each OpenShift Container Platform cluster node. You may use IPMI, Redfish, or a proprietary protocol.</p>
</li>
<li>
<p><strong>Latest generation:</strong> Nodes must be of the most recent generation. Installer-provisioned installation relies on BMC protocols, which must be compatible across nodes. Additionally, RHEL 8 ships with the most recent drivers for RAID controllers. Ensure that the nodes are recent enough to support RHEL 8 for the <code>provisioner</code> node and RHCOS 8 for the control plane and worker nodes.</p>
</li>
<li>
<p><strong>Registry node:</strong> (Optional) If setting up a disconnected mirrored registry, it is recommended the registry reside in its own node.</p>
</li>
<li>
<p><strong>Provisioner node:</strong> Installer-provisioned installation requires one <code>provisioner</code> node.</p>
</li>
<li>
<p><strong>Control plane:</strong> Installer-provisioned installation requires three control plane nodes for high availability.</p>
</li>
<li>
<p><strong>Worker nodes:</strong> While not required, a typical production cluster has one or more worker nodes. Smaller clusters are more resource efficient for administrators and developers during development, production, and testing.</p>
</li>
<li>
<p><strong>Network interfaces:</strong> Each node must have at least one 10GB network interface for the routable <code>baremetal</code> network. Each node must have one 10GB network interface for a <code>provisioning</code> network <strong>when using the <code>provisioning</code> network</strong> for deployment. Using the <code>provisioning</code> network is the default configuration. Network interface names must follow the same naming convention across all nodes. For example, the first NIC name on a node, such as <code>eth0</code> or <code>eno1</code>, must be the same name on all of the other nodes. The same principle applies to the remaining NICs on each node.</p>
</li>
<li>
<p><strong>Unified Extensible Firmware Interface (UEFI):</strong> Installer-provisioned installation requires UEFI boot on all OpenShift Container Platform nodes when using IPv6 addressing on the <code>provisioning</code> network. In addition, UEFI Device PXE Settings must be set to use the IPv6 protocol on the <code>provisioning</code> network NIC, but omitting the <code>provisioning</code> network removes this requirement.</p>
</li>
</ul>
</div>
</div>
<div class="sect2">
<h3 id="ipi-install-firmware-requirements-for-installing-with-virtual-media_ipi-install-prerequisites"><a class="link" href="#ipi-install-firmware-requirements-for-installing-with-virtual-media_ipi-install-prerequisites">2.2. Firmware requirements for installing with virtual media</a></h3>
<div class="paragraph">
<p>The installer for installer-provisioned OpenShift Container Platform clusters validates the hardware and firmware compatibility with Redfish virtual media. The following table lists supported firmware for installer-provisioned OpenShift Container Platform clusters deployed with Redfish virtual media.</p>
</div>
<table class="tableblock frame-ends grid-all stretch">
<caption class="title">Table 1. Firmware compatibility for Redfish virtual media</caption>
<colgroup>
<col style="width: 25%;"/>
<col style="width: 25%;"/>
<col style="width: 25%;"/>
<col style="width: 25%;"/>
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Hardware</th>
<th class="tableblock halign-left valign-top">Model</th>
<th class="tableblock halign-left valign-top">Management</th>
<th class="tableblock halign-left valign-top">Firmware Versions</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top" rowspan="2"><p class="tableblock">HP</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">10th Generation</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">iLO5</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">N/A</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">9th Generation</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">iLO4</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">N/A</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top" rowspan="2"><p class="tableblock">Dell</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">14th Generation</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">iDRAC 9</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">v4.20.20.20 - 04.40.00.00</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">13th Generation</p></td>
<td class="tableblock halign-left valign-top" rowspan="2"><p class="tableblock">iDRAC 8</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">v2.75.75.75+</p></td>
</tr>
</tbody>
</table>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
<div class="paragraph">
<p>Refer to the hardware documentation for the nodes or contact the hardware vendor for information on updating the firmware.</p>
</div>
<div class="paragraph">
<p>There are no known firmware limitations for HP servers.</p>
</div>
<div class="paragraph">
<p>For Dell servers, ensure the OpenShift Container Platform cluster nodes have AutoAttach Enabled through the iDRAC console. The menu path is: <strong>Configuration</strong> &#8594; <strong>Virtual Media</strong> &#8594; <strong>Attach Mode</strong> &#8594; <strong>AutoAttach</strong> . With iDRAC 9 firmware version <code>04.40.00.00</code>, the Virtual Console plug-in defaults to <code>eHTML5</code>, which causes problems with the <strong>InsertVirtualMedia</strong> workflow. Set the plug-in to <code>HTML5</code> to avoid this issue. The menu path is: <strong>Configuration</strong> &#8594; <strong>Virtual console</strong> &#8594; <strong>Plug-in Type</strong> &#8594; <strong>HTML5</strong> .</p>
</div>
</td>
</tr>
</table>
</div>
<div class="admonitionblock important">
<table>
<tr>
<td class="icon">
<i class="fa icon-important" title="Important"></i>
</td>
<td class="content">
<div class="paragraph">
<p>The installer will not initiate installation on a node if the node firmware is below the foregoing versions when installing with virtual media.</p>
</div>
</td>
</tr>
</table>
</div>
</div>
<div class="sect2">
<h3 id="network-requirements_ipi-install-prerequisites"><a class="link" href="#network-requirements_ipi-install-prerequisites">2.3. Network requirements</a></h3>
<div class="paragraph">
<p>Installer-provisioned installation of OpenShift Container Platform involves several network requirements by default. First, installer-provisioned installation involves a non-routable <code>provisioning</code> network for provisioning the operating system on each bare metal node and a routable <code>baremetal</code> network. Since installer-provisioned installation deploys <code>ironic-dnsmasq</code>, the networks should have no other DHCP servers running on the same broadcast domain. Network administrators must reserve IP addresses for each node in the OpenShift Container Platform cluster.</p>
</div>
<div class="paragraph">
<div class="title">Network Time Protocol (NTP)</div>
<p>Each OpenShift Container Platform node in the cluster must have access to an NTP server. OpenShift Container Platform nodes use NTP to synchronize their clocks. For example, cluster nodes use SSL certificates that require validation, which might fail if the date and time between the nodes are not in sync.</p>
</div>
<div class="admonitionblock important">
<table>
<tr>
<td class="icon">
<i class="fa icon-important" title="Important"></i>
</td>
<td class="content">
<div class="paragraph">
<p>Define a consistent clock date and time format in each cluster node&#8217;s BIOS settings, or installation might fail.</p>
</div>
</td>
</tr>
</table>
</div>
<div class="paragraph">
<div class="title">Configuring NICs</div>
<p>OpenShift Container Platform deploys with two networks:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><code>provisioning</code>: The <code>provisioning</code> network is an <strong>optional</strong> non-routable network used for provisioning the underlying operating system on each node that is a part of the OpenShift Container Platform cluster. The network interface for the <code>provisioning</code> network on each cluster node must have the BIOS or UEFI configured to PXE boot. In OpenShift Container Platform 4.3, when deploying using the <code>provisioning</code> network, the first NIC on each node, such as <code>eth0</code> or <code>eno1</code>, <strong>must</strong> interface with the <code>provisioning</code> network. In OpenShift Container Platform 4.4 and later releases, you can specify the provisioning network NIC with the <code>provisioningNetworkInterface</code> configuration setting.</p>
</li>
<li>
<p><code>baremetal</code>: The <code>baremetal</code> network is a routable network. In OpenShift Container Platform 4.3, when deploying using the <code>provisioning</code> network, the second NIC on each node, such as <code>eth1</code> or <code>eno2</code>, <strong>must</strong> interface with the <code>baremetal</code> network. In OpenShift Container Platform 4.4 and later releases, you can use any NIC order to interface with the <code>baremetal</code> network, provided it is the same NIC order across worker and control plane nodes and not the NIC specified in the <code>provisioningNetworkInterface</code> configuration setting for the <code>provisioning</code> network.</p>
</li>
</ul>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
<div class="paragraph">
<p>Use a compatible approach such that cluster nodes use the same NIC ordering on all cluster nodes. NICs must have heterogeneous hardware with the same NIC naming convention such as <code>eth0</code> or <code>eno1</code>.</p>
</div>
</td>
</tr>
</table>
</div>
<div class="admonitionblock important">
<table>
<tr>
<td class="icon">
<i class="fa icon-important" title="Important"></i>
</td>
<td class="content">
<div class="paragraph">
<p>When using a VLAN, each NIC must be on a separate VLAN corresponding to the appropriate network.</p>
</div>
</td>
</tr>
</table>
</div>
<div class="paragraph">
<div class="title">Configuring the DNS server</div>
<p>Clients access the OpenShift Container Platform cluster nodes over the <code>baremetal</code> network. A network administrator must configure a subdomain or subzone where the canonical name extension is the cluster name.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="nowrap">&lt;cluster-name&gt;.&lt;domain-name&gt;</pre>
</div>
</div>
<div class="paragraph">
<p>For example:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="nowrap">test-cluster.example.com</pre>
</div>
</div>
<div class="paragraph">
<p>For assistance in configuring the DNS server, check <a href="#ipi-install-upstream-appendix">Appendix</a> section for:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><a href="#creating-dns-records-on-a-dns-server-option1_ipi-install-prerequisites">Creating DNS Records with Bind (Option 1)</a></p>
</li>
<li>
<p><a href="#creating-dns-records-using-dnsmasq-option2_ipi-install-prerequisites">Creating DNS Records with dnsmasq (Option 2)</a></p>
</li>
</ul>
</div>
<div class="paragraph">
<div class="title">Reserving IP addresses for nodes with the DHCP server</div>
<p>For the <code>baremetal</code> network, a network administrator must reserve a number of IP addresses, including:</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Two virtual IP addresses.</p>
<div class="ulist">
<ul>
<li>
<p>One IP address for the API endpoint</p>
</li>
<li>
<p>One IP address for the wildcard ingress endpoint</p>
</li>
</ul>
</div>
</li>
<li>
<p>One IP address for the provisioner node.</p>
</li>
<li>
<p>One IP address for each control plane (master) node.</p>
</li>
<li>
<p>One IP address for each worker node, if applicable.</p>
</li>
</ol>
</div>
<div class="paragraph">
<p>The following table provides an exemplary embodiment of fully qualified domain names. The API and Nameserver addresses begin with canonical name extensions. The host names of the control plane and worker nodes are exemplary, so you can use any host naming convention you prefer.</p>
</div>
<table class="tableblock frame-ends grid-all stretch">
<colgroup>
<col style="width: 30%;"/>
<col style="width: 50%;"/>
<col style="width: 20%;"/>
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Usage</th>
<th class="tableblock halign-left valign-top">Host Name</th>
<th class="tableblock halign-left valign-top">IP</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">API</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><em>api.&lt;cluster-name&gt;.&lt;domain&gt;</em></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><em>&lt;ip&gt;</em></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Ingress LB (apps)</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><em>*.apps.&lt;cluster-name&gt;.&lt;domain&gt;</em></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><em>&lt;ip&gt;</em></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Provisioner node</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><em>provisioner.&lt;cluster-name&gt;.&lt;domain&gt;</em></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><em>&lt;ip&gt;</em></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Master-0</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><em>openshift-master-0.&lt;cluster-name&gt;.&lt;domain&gt;</em></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><em>&lt;ip&gt;</em></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Master-1</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><em>openshift-master-1.&lt;cluster-name&gt;-.&lt;domain&gt;</em></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><em>&lt;ip&gt;</em></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Master-2</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><em>openshift-master-2.&lt;cluster-name&gt;.&lt;domain&gt;</em></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><em>&lt;ip&gt;</em></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Worker-0</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><em>openshift-worker-0.&lt;cluster-name&gt;.&lt;domain&gt;</em></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><em>&lt;ip&gt;</em></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Worker-1</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><em>openshift-worker-1.&lt;cluster-name&gt;.&lt;domain&gt;</em></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><em>&lt;ip&gt;</em></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Worker-n</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><em>openshift-worker-n.&lt;cluster-name&gt;.&lt;domain&gt;</em></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><em>&lt;ip&gt;</em></p></td>
</tr>
</tbody>
</table>
<div class="paragraph">
<p>For assistance in configuring the DHCP server, check <a href="#ipi-install-upstream-appendix">Appendix</a> section for:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><a href="#creating-dhcp-reservations-option1_ipi-install-prerequisites">Creating DHCP reservations with dhcpd (Option 1)</a></p>
</li>
<li>
<p><a href="#creating-dhcp-reservations-using-dnsmasq-option2_ipi-install-prerequisites">Creating DHCP reservations with dnsmasq (Option 2)</a></p>
</li>
</ul>
</div>
<div class="paragraph">
<div class="title">Additional requirements with no provisioning network</div>
<p>All installer-provisioned installations require a <code>baremetal</code> network. The <code>baremetal</code> network is a routable network used for external network access to the outside world. In addition to the IP address supplied to the OpenShift Container Platform cluster node, installations without a <code>provisioning</code> network require the following:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Setting an available IP address from the <code>baremetal</code> network to the <code>bootstrapProvisioningIP</code> configuration setting within the <code>install-config.yaml</code> configuration file.</p>
</li>
<li>
<p>Setting an available IP address from the <code>baremetal</code> network to the <code>provisioningHostIP</code> configuration setting within the <code>install-config.yaml</code> configuration file.</p>
</li>
<li>
<p>Deploying the OpenShift Container Platform cluster using RedFish Virtual Media/iDRAC Virtual Media.</p>
</li>
</ul>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
<div class="paragraph">
<p>Configuring additional IP addresses for <code>bootstrapProvisioningIP</code> and <code>provisioningHostIP</code> is not required when using a <code>provisioning</code> network.</p>
</div>
</td>
</tr>
</table>
</div>
<h4 id="_ipv6_considerations" class="discrete">IPv6 considerations</h4>
<div class="paragraph">
<div class="title">SLAAC Addressing</div>
<p>If you do not plan to use SLAAC <sup class="footnote">[<a id="_footnoteref_1" class="footnote" href="#_footnotedef_1" title="View footnote.">1</a>]</sup> addresses on your OpenShift Container Platform node, then it should be disabled for <code>baremetal</code> networks, that means that if your network equipment is configured to send SLAAC addresses when replying to Route Advertisements that behavior should be changed, so it only sends the route and not the SLAAC address.</p>
</div>
<div class="paragraph">
<p>Install <code>ndptool</code> on your system in order to check what your RAs look like:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight nowrap"><code data-lang="shell"><span class="c"># Turn down/up baremetal iface on a master Node</span>
<span class="nv">$ </span><span class="nb">sudo </span>nmcli con down <span class="s2">"Wired connection 5"</span> <span class="o">&amp;&amp;</span> <span class="nb">sudo </span>nmcli con up <span class="s2">"Wired connection 5"</span>
Connection <span class="s1">'Wired connection 5'</span> successfully deactivated <span class="o">(</span>D-Bus active path: /org/freedesktop/NetworkManager/ActiveConnection/1983<span class="o">)</span>
Connection successfully activated <span class="o">(</span>D-Bus active path: /org/freedesktop/NetworkManager/ActiveConnection/2044<span class="o">)</span>

<span class="c"># ndptool monitor on Helper node</span>
<span class="nv">$ </span><span class="nb">sudo </span>ndptool monitor <span class="nt">-t</span> ra
NDP payload len 80, from addr: fe80::c0a4:6464:bcb3:d657, iface: baremetal.153
  Type: RA
  Hop limit: 64
  Managed address configuration: <span class="nb">yes
  </span>Other configuration: no
  Default router preference: medium
  Router lifetime: 0s
  Reachable <span class="nb">time</span>: unspecified
  Retransmit <span class="nb">time</span>: unspecified
  Source linkaddr: 1c:40:24:1b:0c:34
  Prefix: 2620:52:0:1303::/64, valid_time: 86400s, preferred_time: 14400s, on_link: <span class="nb">yes</span>, autonomous_addr_conf: no, router_addr: no
  Route: ::/0, lifetime: 0s, preference: low</code></pre>
</div>
</div>
<div class="paragraph">
<p>The <code>ndptool monitor</code> should report <code>Managed address configuration: yes</code>.</p>
</div>
<div class="paragraph">
<div class="title">Network Ranges and Configurations</div>
<p>Different <code>baremetal</code> and <code>provisioning</code> networks are required for each environment; each environment will have a different IPv6 range for each one of those networks.</p>
</div>
<div class="paragraph">
<p>In our configuration we used subinterfaces attached to two different physical interfaces, VLAN tagging was done at O.S. level (this required switch ports configured with <code>trunk</code> mode).</p>
</div>
<div class="paragraph">
<p>Our different IPv6 networks were all routable but usually, the only routable networks are the <code>baremetal</code> ones.</p>
</div>
<div class="paragraph">
<p>Keep in mind that <code>provisioning</code> networks cannot be in the same broadcast domain, since services such as DHCP are running.</p>
</div>
<div class="admonitionblock important">
<table>
<tr>
<td class="icon">
<i class="fa icon-important" title="Important"></i>
</td>
<td class="content">
<div class="title">Route Advertisement</div>
<div class="paragraph">
<p>Route Advertisement must be enabled for both networks <code>baremetal</code> and <code>provisioning</code>.</p>
</div>
</td>
</tr>
</table>
</div>
<div class="paragraph">
<div class="title">Route Advertisements</div>
<p>As mentioned previously, both the <code>baremetal</code> and the <code>provisioning</code> networks must have Route Advertisement enabled. For the <code>baremetal</code> network, the <code>radvd</code> daemon was used, while the <code>provisioning</code> network has RA enabled in the Metal³ dnsmasq, so no configuration is needed.</p>
</div>
</div>
<div class="sect2">
<h3 id="configuring-nodes_ipi-install-prerequisites"><a class="link" href="#configuring-nodes_ipi-install-prerequisites">2.4. Configuring nodes</a></h3>
<div class="paragraph">
<div class="title">Configuring nodes when using the <code>provisioning</code> network</div>
<p>Each node in the cluster requires the following configuration for proper installation.</p>
</div>
<div class="admonitionblock warning">
<table>
<tr>
<td class="icon">
<i class="fa icon-warning" title="Warning"></i>
</td>
<td class="content">
<div class="paragraph">
<p>A mismatch between nodes will cause an installation failure.</p>
</div>
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>While the cluster nodes can contain more than two NICs, the installation process only focuses on the first two NICs:</p>
</div>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 33.3333%;"/>
<col style="width: 33.3333%;"/>
<col style="width: 33.3334%;"/>
</colgroup>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">NIC</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Network</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">VLAN</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">NIC1</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>provisioning</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">&lt;provisioning-vlan&gt;</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">NIC2</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>baremetal</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">&lt;baremetal-vlan&gt;</p></td>
</tr>
</tbody>
</table>
<div class="paragraph">
<p>NIC1 is a non-routable network (<code>provisioning</code>) that is only used for the installation of the OpenShift Container Platform cluster.</p>
</div>
<div class="paragraph">
<p>The Red Hat Enterprise Linux (RHEL) 8.x installation process on the provisioner node might vary. To install Red Hat Enterprise Linux (RHEL) 8.x using a local Satellite server or a PXE server, PXE-enable NIC2.</p>
</div>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 50%;"/>
<col style="width: 50%;"/>
</colgroup>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">PXE</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Boot order</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">NIC1 PXE-enabled <code>provisioning</code> network</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">1</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">NIC2 <code>baremetal</code> network. PXE-enabled is optional.</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">2</p></td>
</tr>
</tbody>
</table>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
<div class="paragraph">
<p>Ensure PXE is disabled on all other NICs.</p>
</div>
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>Configure the control plane and worker nodes as follows:</p>
</div>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 50%;"/>
<col style="width: 50%;"/>
</colgroup>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">PXE</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Boot order</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">NIC1 PXE-enabled (provisioning network)</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">1</p></td>
</tr>
</tbody>
</table>
<div class="paragraph">
<div class="title">Configuring nodes without the <code>provisioning</code> network</div>
<p>The installation process requires one NIC:</p>
</div>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 33.3333%;"/>
<col style="width: 33.3333%;"/>
<col style="width: 33.3334%;"/>
</colgroup>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">NIC</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Network</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">VLAN</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">NICx</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>baremetal</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">&lt;baremetal-vlan&gt;</p></td>
</tr>
</tbody>
</table>
<div class="paragraph">
<p>NICx is a routable network (<code>baremetal</code>) that is used for the installation of the OpenShift Container Platform cluster, and routable to the internet.</p>
</div>
</div>
<div class="sect2">
<h3 id="out-of-band-management_ipi-install-prerequisites"><a class="link" href="#out-of-band-management_ipi-install-prerequisites">2.5. Out-of-band management</a></h3>
<div class="paragraph">
<p>Nodes will typically have an additional NIC used by the Baseboard Management Controllers (BMCs). These BMCs must be accessible from the <code>provisioner</code> node.</p>
</div>
<div class="paragraph">
<p>Each node must be accessible via out-of-band management. When using an out-of-band management network, the <code>provisioner</code> node requires access to the out-of-band management network for a successful OpenShift Container Platform 4 installation.</p>
</div>
<div class="paragraph">
<p>The out-of-band management setup is out of scope for this document. We recommend setting up a separate management network for out-of-band management. However, using the <code>provisioning</code> network or the <code>baremetal</code> network are valid options.</p>
</div>
</div>
<div class="sect2">
<h3 id="required-data-for-installation_ipi-install-prerequisites"><a class="link" href="#required-data-for-installation_ipi-install-prerequisites">2.6. Required data for installation</a></h3>
<div class="paragraph">
<p>Prior to the installation of the OpenShift Container Platform cluster, gather the following information from all cluster nodes:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Out-of-band management IP</p>
<div class="ulist">
<ul>
<li>
<p>Examples</p>
<div class="ulist">
<ul>
<li>
<p>Dell (iDRAC) IP</p>
</li>
<li>
<p>HP (iLO) IP</p>
</li>
</ul>
</div>
</li>
</ul>
</div>
</li>
</ul>
</div>
<div class="ulist">
<div class="title">When using the <code>provisioning</code> network</div>
<ul>
<li>
<p>NIC1 (<code>provisioning</code>) MAC address</p>
</li>
<li>
<p>NIC2 (<code>baremetal</code>) MAC address</p>
</li>
</ul>
</div>
<div class="ulist">
<div class="title">When omitting the <code>provisioning</code> network</div>
<ul>
<li>
<p>NICx (<code>baremetal</code>) MAC address</p>
</li>
</ul>
</div>
</div>
<div class="sect2">
<h3 id="validation-checklist-for-nodes_ipi-install-prerequisites"><a class="link" href="#validation-checklist-for-nodes_ipi-install-prerequisites">2.7. Validation checklist for nodes</a></h3>
<div class="ulist checklist">
<div class="title">When using the <code>provisioning</code> network</div>
<ul class="checklist">
<li>
<p><i class="fa fa-square-o"></i> NIC1 VLAN is configured for the <code>provisioning</code> network.</p>
</li>
<li>
<p><i class="fa fa-square-o"></i> NIC2 VLAN is configured for the <code>baremetal</code> network.</p>
</li>
<li>
<p><i class="fa fa-square-o"></i> NIC1 is PXE-enabled on the provisioner, Control Plane (master), and worker nodes.</p>
</li>
<li>
<p><i class="fa fa-square-o"></i> PXE has been disabled on all other NICs.</p>
</li>
<li>
<p><i class="fa fa-square-o"></i> Control plane and worker nodes are configured.</p>
</li>
<li>
<p><i class="fa fa-square-o"></i> All nodes accessible via out-of-band management.</p>
</li>
<li>
<p><i class="fa fa-square-o"></i> A separate management network has been created. (optional)</p>
</li>
<li>
<p><i class="fa fa-square-o"></i> Required data for installation.</p>
</li>
</ul>
</div>
<div class="ulist checklist">
<div class="title">When omitting the <code>provisioning</code> network</div>
<ul class="checklist">
<li>
<p><i class="fa fa-square-o"></i> NICx VLAN is configured for the <code>baremetal</code> network.</p>
</li>
<li>
<p><i class="fa fa-square-o"></i> Control plane and worker nodes are configured.</p>
</li>
<li>
<p><i class="fa fa-square-o"></i> All nodes accessible via out-of-band management.</p>
</li>
<li>
<p><i class="fa fa-square-o"></i> A separate management network has been created. (optional)</p>
</li>
<li>
<p><i class="fa fa-square-o"></i> Required data for installation.</p>
</li>
</ul>
</div>
<div class="paragraph">
<div class="title">Summary</div>
<p>After an environment has been prepared according to the documented prerequisites, the installation process is the same as other installer-provisioned platforms.</p>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="ipi-install-installation-workflow"><a class="link" href="#ipi-install-installation-workflow">3. Setting up the environment for an OpenShift installation</a></h2>
<div class="sectionbody">
<!-- toc disabled -->
<div class="sect2">
<h3 id="installing-rhel-on-the-provisioner-node_ipi-install-installation-workflow"><a class="link" href="#installing-rhel-on-the-provisioner-node_ipi-install-installation-workflow">3.1. Installing RHEL on the provisioner node</a></h3>
<div class="paragraph">
<p>With the networking configuration complete, the next step is to install RHEL 8.X on the provisioner node. The installer uses the provisioner node as the orchestrator while installing the OpenShift Container Platform cluster. For the purposes of this document, installing RHEL on the provisioner node is out of scope. However, options include but are not limited to using a RHEL Satellite server, PXE, or installation media.</p>
</div>
</div>
<div class="sect2">
<h3 id="preparing-the-provisioner-node-for-openshift-install_ipi-install-installation-workflow"><a class="link" href="#preparing-the-provisioner-node-for-openshift-install_ipi-install-installation-workflow">3.2. Preparing the provisioner node for OpenShift Container Platform installation</a></h3>
<div class="paragraph">
<p>Perform the following steps to prepare the environment.</p>
</div>
<div class="olist arabic">
<div class="title">Procedure</div>
<ol class="arabic">
<li>
<p>Log in to the provisioner node via <code>ssh</code>.</p>
</li>
<li>
<p>Create a non-root user (<code>kni</code>) and provide that user with <code>sudo</code> privileges.</p>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight nowrap"><code data-lang="terminal"><span class="gp">[root@provisioner ~]#</span><span class="w"> </span>useradd kni
<span class="gp">[root@provisioner ~]#</span><span class="w"> </span>passwd kni
<span class="gp">[root@provisioner ~]#</span><span class="w"> </span><span class="nb">echo</span> <span class="s2">"kni ALL=(root) NOPASSWD:ALL"</span> | <span class="nb">tee</span> <span class="nt">-a</span> /etc/sudoers.d/kni
<span class="gp">[root@provisioner ~]#</span><span class="w"> </span><span class="nb">chmod </span>0440 /etc/sudoers.d/kni</code></pre>
</div>
</div>
</li>
<li>
<p>Create an <code>ssh</code> key for the new user.</p>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight nowrap"><code data-lang="terminal"><span class="gp">[root@provisioner ~]#</span><span class="w"> </span>su - kni <span class="nt">-c</span> <span class="s2">"ssh-keygen -t rsa -f /home/kni/.ssh/id_rsa -N ''"</span></code></pre>
</div>
</div>
</li>
<li>
<p>Log in as the new user on the provisioner node.</p>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight nowrap"><code data-lang="terminal"><span class="gp">[root@provisioner ~]#</span><span class="w"> </span>su - kni
<span class="gp">[kni@provisioner ~]$</span></code></pre>
</div>
</div>
</li>
<li>
<p>Use Red Hat Subscription Manager to register the provisioner node.</p>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight nowrap"><code data-lang="terminal"><span class="gp">[kni@provisioner ~]$</span><span class="w"> </span><span class="nb">sudo </span>subscription-manager register <span class="nt">--username</span><span class="o">=</span>&lt;user&gt; <span class="nt">--password</span><span class="o">=</span>&lt;pass&gt; <span class="nt">--auto-attach</span>
<span class="gp">[kni@provisioner ~]$</span><span class="w"> </span><span class="nb">sudo </span>subscription-manager repos <span class="nt">--enable</span><span class="o">=</span>rhel-8-for-x86_64-appstream-rpms <span class="nt">--enable</span><span class="o">=</span>rhel-8-for-x86_64-baseos-rpms</code></pre>
</div>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
<div class="paragraph">
<p>For more information about Red Hat Subscription Manager, see <a href="https://access.redhat.com/documentation/en-us/red_hat_subscription_management/1/html-single/rhsm/index">Using and Configuring Red Hat Subscription Manager</a>.</p>
</div>
</td>
</tr>
</table>
</div>
</li>
<li>
<p>Install the following packages.</p>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight nowrap"><code data-lang="terminal"><span class="gp">[kni@provisioner ~]$</span><span class="w"> </span><span class="nb">sudo </span>dnf <span class="nb">install</span> <span class="nt">-y</span> libvirt qemu-kvm mkisofs python3-devel jq ipmitool</code></pre>
</div>
</div>
</li>
<li>
<p>Modify the user to add the <code>libvirt</code> group to the newly created user.</p>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight nowrap"><code data-lang="terminal"><span class="gp">[kni@provisioner ~]$</span><span class="w"> </span><span class="nb">sudo </span>usermod <span class="nt">--append</span> <span class="nt">--groups</span> libvirt &lt;user&gt;</code></pre>
</div>
</div>
</li>
<li>
<p>Restart <code>firewalld</code> and enable the <code>http</code> service.</p>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight nowrap"><code data-lang="terminal"><span class="gp">[kni@provisioner ~]$</span><span class="w"> </span><span class="nb">sudo </span>systemctl start firewalld
<span class="gp">[kni@provisioner ~]$</span><span class="w"> </span><span class="nb">sudo </span>firewall-cmd <span class="nt">--zone</span><span class="o">=</span>public <span class="nt">--add-service</span><span class="o">=</span>http <span class="nt">--permanent</span>
<span class="gp">[kni@provisioner ~]$</span><span class="w"> </span><span class="nb">sudo </span>firewall-cmd <span class="nt">--add-port</span><span class="o">=</span>5000/tcp <span class="nt">--zone</span><span class="o">=</span>libvirt  <span class="nt">--permanent</span>
<span class="gp">[kni@provisioner ~]$</span><span class="w"> </span><span class="nb">sudo </span>firewall-cmd <span class="nt">--add-port</span><span class="o">=</span>5000/tcp <span class="nt">--zone</span><span class="o">=</span>public   <span class="nt">--permanent</span>
<span class="gp">[kni@provisioner ~]$</span><span class="w"> </span><span class="nb">sudo </span>firewall-cmd <span class="nt">--reload</span></code></pre>
</div>
</div>
</li>
<li>
<p>Start and enable the <code>libvirtd</code> service.</p>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight nowrap"><code data-lang="terminal"><span class="gp">[kni@provisioner ~]$</span><span class="w"> </span><span class="nb">sudo </span>systemctl start libvirtd
<span class="gp">[kni@provisioner ~]$</span><span class="w"> </span><span class="nb">sudo </span>systemctl <span class="nb">enable </span>libvirtd <span class="nt">--now</span></code></pre>
</div>
</div>
</li>
<li>
<p>Create the <code>default</code> storage pool and start it.</p>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight nowrap"><code data-lang="terminal"><span class="gp">[kni@provisioner ~]$</span><span class="w"> </span><span class="nb">sudo </span>virsh pool-define-as <span class="nt">--name</span> default <span class="nt">--type</span> <span class="nb">dir</span> <span class="nt">--target</span> /var/lib/libvirt/images
<span class="gp">[kni@provisioner ~]$</span><span class="w"> </span><span class="nb">sudo </span>virsh pool-start default
<span class="gp">[kni@provisioner ~]$</span><span class="w"> </span><span class="nb">sudo </span>virsh pool-autostart default</code></pre>
</div>
</div>
</li>
<li>
<p>Configure networking.</p>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
<div class="paragraph">
<p>This step can also be run from the web console.</p>
</div>
</td>
</tr>
</table>
</div>
<div class="listingblock">
<div class="title">Provisioning Network (IPv4 address)</div>
<div class="content">
<pre class="rouge highlight nowrap"><code data-lang="terminal"><span class="gp">[kni@provisioner ~]$</span><span class="w"> </span><span class="nb">sudo nohup </span>bash <span class="nt">-c</span> <span class="s2">"""
</span><span class="gp">    nmcli con down "$</span><span class="s2">PROV_CONN"</span>
<span class="gp">    nmcli con delete "$</span>PROV_CONN<span class="s2">"
</span><span class="gp">    #</span><span class="w"> </span><span class="s2">RHEL 8.1 appends the word "</span>System<span class="s2">" in front of the connection, delete in case it exists
</span><span class="gp">    nmcli con down "System $</span><span class="s2">PROV_CONN"</span>
<span class="gp">    nmcli con delete "System $</span>PROV_CONN<span class="s2">"
</span><span class="go">    nmcli connection add ifname provisioning type bridge con-name provisioning
</span><span class="gp">    nmcli con add type bridge-slave ifname "$</span>PROV_CONN<span class="s2">" master provisioning
</span><span class="go">    nmcli connection modify provisioning ipv4.addresses 172.22.0.1/24 ipv4.method manual
    nmcli con down provisioning
    nmcli con up provisioning"""</span></code></pre>
</div>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
<div class="paragraph">
<p>The <code>ssh</code> connection might disconnect after executing this step.</p>
</div>
<div class="paragraph">
<p>The IPv4 address may be any address as long as it is not routable via the <code>baremetal</code> network.</p>
</div>
</td>
</tr>
</table>
</div>
<div class="listingblock">
<div class="title">Provisioning Network (IPv6 address)</div>
<div class="content">
<pre class="rouge highlight nowrap"><code data-lang="terminal"><span class="gp">[kni@provisioner ~]$</span><span class="w"> </span><span class="nb">sudo nohup </span>bash <span class="nt">-c</span> <span class="s2">"""
</span><span class="gp">    nmcli con down "$</span><span class="s2">PROV_CONN"</span>
<span class="gp">    nmcli con delete "$</span>PROV_CONN<span class="s2">"
</span><span class="gp">    #</span><span class="w"> </span><span class="s2">RHEL 8.1 appends the word "</span>System<span class="s2">" in front of the connection, delete in case it exists
</span><span class="gp">    nmcli con down "System $</span><span class="s2">PROV_CONN"</span>
<span class="gp">    nmcli con delete "System $</span>PROV_CONN<span class="s2">"
</span><span class="go">    nmcli connection add ifname provisioning type bridge con-name provisioning
</span><span class="gp">    nmcli con add type bridge-slave ifname "$</span>PROV_CONN<span class="s2">" master provisioning
</span><span class="go">    nmcli connection modify provisioning ipv6.addresses fd00:1101::1/64 ipv6.method manual
    nmcli con down provisioning
    nmcli con up provisioning"""</span></code></pre>
</div>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
<div class="paragraph">
<p>The <code>ssh</code> connection might disconnect after executing this step.</p>
</div>
<div class="paragraph">
<p>The IPv6 address may be any address as long as it is not routable via the <code>baremetal</code> network.</p>
</div>
</td>
</tr>
</table>
</div>
<div class="admonitionblock warning">
<table>
<tr>
<td class="icon">
<i class="fa icon-warning" title="Warning"></i>
</td>
<td class="content">
<div class="paragraph">
<p>Ensure that UEFI is enabled and UEFI PXE settings are set to the IPv6 protocol when using IPv6 addressing.</p>
</div>
</td>
</tr>
</table>
</div>
</li>
<li>
<p><code>ssh</code> back into the <code>provisioner</code> node (if required).</p>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight nowrap"><code data-lang="terminal"><span class="gp">#</span><span class="w"> </span>ssh kni@provisioner.&lt;cluster-name&gt;.&lt;domain&gt;</code></pre>
</div>
</div>
</li>
<li>
<p>Verify the connection bridges have been properly created.</p>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight nowrap"><code data-lang="terminal"><span class="gp">[kni@provisioner ~]$</span><span class="w"> </span>nmcli con show</code></pre>
</div>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight nowrap"><code data-lang="terminal"><span class="go">NAME               UUID                                  TYPE      DEVICE
baremetal          4d5133a5-8351-4bb9-bfd4-3af264801530  bridge    baremetal
provisioning       43942805-017f-4d7d-a2c2-7cb3324482ed  bridge    provisioning
virbr0             d9bca40f-eee1-410b-8879-a2d4bb0465e7  bridge    virbr0
bridge-slave-eno1  76a8ed50-c7e5-4999-b4f6-6d9014dd0812  ethernet  eno1
bridge-slave-eno2  f31c3353-54b7-48de-893a-02d2b34c4736  ethernet  eno2</span></code></pre>
</div>
</div>
</li>
<li>
<p>Create a <code>pull-secret.txt</code> file.</p>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight nowrap"><code data-lang="terminal"><span class="gp">[kni@provisioner ~]$</span><span class="w"> </span>vim pull-secret.txt</code></pre>
</div>
</div>
<div class="paragraph">
<p>In a web browser, navigate to <a href="https://cloud.redhat.com/openshift/install/metal/user-provisioned">Install on Bare Metal with user-provisioned infrastructure</a>, and scroll down to the <strong>Downloads</strong> section. Click <strong>Copy pull secret</strong>. Paste the contents into the <code>pull-secret.txt</code> file and save the contents in the <code>kni</code> user&#8217;s home directory.</p>
</div>
</li>
</ol>
</div>
</div>
<div class="sect2">
<h3 id="retrieving-the-openshift-installer_ipi-install-installation-workflow"><a class="link" href="#retrieving-the-openshift-installer_ipi-install-installation-workflow">3.3. Retrieving the OpenShift Container Platform installer (GA Release)</a></h3>
<div class="paragraph">
<p>Use the <code>latest-4.x</code> version of the installer to deploy the latest generally
available version of OpenShift Container Platform:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight nowrap"><code data-lang="terminal">[kni@provisioner ~]$ export VERSION=latest-4.6
export RELEASE_IMAGE=$(curl -s https://mirror.openshift.com/pub/openshift-v4/clients/ocp/$VERSION/release.txt | grep 'Pull From: quay.io' | awk -F ' ' '{print $3}')</code></pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="extracting-the-openshift-installer_ipi-install-installation-workflow"><a class="link" href="#extracting-the-openshift-installer_ipi-install-installation-workflow">3.4. Extracting the OpenShift Container Platform installer (GA Release)</a></h3>
<div class="paragraph">
<p>After retrieving the installer, the next step is to extract it.</p>
</div>
<div class="olist arabic">
<div class="title">Procedure</div>
<ol class="arabic">
<li>
<p>Set the environment variables:</p>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight nowrap"><code data-lang="terminal"><span class="gp">[kni@provisioner ~]$</span><span class="w"> </span><span class="nb">export </span><span class="nv">cmd</span><span class="o">=</span>openshift-baremetal-install
<span class="gp">[kni@provisioner ~]$</span><span class="w"> </span><span class="nb">export </span><span class="nv">pullsecret_file</span><span class="o">=</span>~/pull-secret.txt
<span class="gp">[kni@provisioner ~]$</span><span class="w"> </span><span class="nb">export </span><span class="nv">extract_dir</span><span class="o">=</span><span class="si">$(</span><span class="nb">pwd</span><span class="si">)</span></code></pre>
</div>
</div>
</li>
<li>
<p>Get the <code>oc</code> binary:</p>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight nowrap"><code data-lang="terminal"><span class="gp">[kni@provisioner ~]$</span><span class="w"> </span>curl <span class="nt">-s</span> https://mirror.openshift.com/pub/openshift-v4/clients/ocp/<span class="nv">$VERSION</span>/openshift-client-linux.tar.gz | <span class="nb">tar </span>zxvf - oc</code></pre>
</div>
</div>
</li>
<li>
<p>Extract the installer:</p>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight nowrap"><code data-lang="terminal"><span class="gp">[kni@provisioner ~]$</span><span class="w"> </span><span class="nb">sudo cp </span>oc /usr/local/bin
<span class="gp">[kni@provisioner ~]$</span><span class="w"> </span>oc adm release extract <span class="nt">--registry-config</span> <span class="s2">"</span><span class="k">${</span><span class="nv">pullsecret_file</span><span class="k">}</span><span class="s2">"</span> <span class="nt">--command</span><span class="o">=</span><span class="nv">$cmd</span> <span class="nt">--to</span> <span class="s2">"</span><span class="k">${</span><span class="nv">extract_dir</span><span class="k">}</span><span class="s2">"</span> <span class="k">${</span><span class="nv">RELEASE_IMAGE</span><span class="k">}</span>
<span class="gp">[kni@provisioner ~]$</span><span class="w"> </span><span class="nb">sudo cp </span>openshift-baremetal-install /usr/local/bin</code></pre>
</div>
</div>
</li>
</ol>
</div>
</div>
<div class="sect2">
<h3 id="ipi-install-creating-an-rhcos-images-cache_ipi-install-installation-workflow"><a class="link" href="#ipi-install-creating-an-rhcos-images-cache_ipi-install-installation-workflow">3.5. Creating an RHCOS images cache (optional)</a></h3>
<div class="paragraph">
<p>To employ image caching, you must download two images: the Red Hat Enterprise Linux CoreOS (RHCOS) image used by the bootstrap VM and the RHCOS image used by the installer to provision the different nodes. Image caching is optional, but especially useful when running the installer on a network with limited bandwidth.</p>
</div>
<div class="paragraph">
<p>If you are running the installer on a network with limited bandwidth and the RHCOS images download takes more than 15 to 20 minutes, the installer will timeout. Caching images on a web server will help in such scenarios.</p>
</div>
<div class="paragraph">
<p>Use the following steps to install a container that contains the images.</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Install <code>podman</code>.</p>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight nowrap"><code data-lang="terminal"><span class="gp">$</span><span class="w"> </span><span class="nb">sudo </span>dnf <span class="nb">install</span> <span class="nt">-y</span> podman</code></pre>
</div>
</div>
</li>
<li>
<p>Open firewall port <code>8080</code> to be used for RHCOS image caching.</p>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight nowrap"><code data-lang="terminal"><span class="gp">$</span><span class="w"> </span><span class="nb">sudo </span>firewall-cmd <span class="nt">--add-port</span><span class="o">=</span>8080/tcp <span class="nt">--zone</span><span class="o">=</span>public <span class="nt">--permanent</span>
<span class="gp">$</span><span class="w"> </span><span class="nb">sudo </span>firewall-cmd <span class="nt">--reload</span></code></pre>
</div>
</div>
</li>
<li>
<p>Create a directory to store the <code>bootstraposimage</code> and <code>clusterosimage</code>.</p>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight nowrap"><code data-lang="terminal"><span class="gp">$</span><span class="w"> </span><span class="nb">mkdir</span> /home/kni/rhcos_image_cache</code></pre>
</div>
</div>
</li>
<li>
<p>Set the appropriate SELinux context for the newly created directory.</p>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight nowrap"><code data-lang="terminal"><span class="gp">$</span><span class="w"> </span><span class="nb">sudo </span>semanage fcontext <span class="nt">-a</span> <span class="nt">-t</span> httpd_sys_content_t <span class="s2">"/home/kni/rhcos_image_cache(/.*)?"</span>
<span class="gp">$</span><span class="w"> </span><span class="nb">sudo </span>restorecon <span class="nt">-Rv</span> rhcos_image_cache/</code></pre>
</div>
</div>
</li>
<li>
<p>Get the commit ID from the installer. The ID determines which images the installer needs to download.</p>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight nowrap"><code data-lang="terminal"><span class="gp">$</span><span class="w"> </span><span class="nb">export </span><span class="nv">COMMIT_ID</span><span class="o">=</span><span class="si">$(</span>/usr/local/bin/openshift-baremetal-install version | <span class="nb">grep</span> <span class="s1">'^built from commit'</span> | <span class="nb">awk</span> <span class="s1">'{print $4}'</span><span class="si">)</span></code></pre>
</div>
</div>
</li>
<li>
<p>Get the URI for the RHCOS image that the installer will deploy on the nodes.</p>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight nowrap"><code data-lang="terminal"><span class="gp">$</span><span class="w"> </span><span class="nb">export </span><span class="nv">RHCOS_OPENSTACK_URI</span><span class="o">=</span><span class="si">$(</span>curl <span class="nt">-s</span> <span class="nt">-S</span> https://raw.githubusercontent.com/openshift/installer/<span class="nv">$COMMIT_ID</span>/data/data/rhcos.json  | jq .images.openstack.path | <span class="nb">sed</span> <span class="s1">'s/"//g'</span><span class="si">)</span></code></pre>
</div>
</div>
</li>
<li>
<p>Get the URI for the RHCOS image that the installer will deploy on the bootstrap VM.</p>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight nowrap"><code data-lang="terminal"><span class="gp">$</span><span class="w"> </span><span class="nb">export </span><span class="nv">RHCOS_QEMU_URI</span><span class="o">=</span><span class="si">$(</span>curl <span class="nt">-s</span> <span class="nt">-S</span> https://raw.githubusercontent.com/openshift/installer/<span class="nv">$COMMIT_ID</span>/data/data/rhcos.json  | jq .images.qemu.path | <span class="nb">sed</span> <span class="s1">'s/"//g'</span><span class="si">)</span></code></pre>
</div>
</div>
</li>
<li>
<p>Get the path where the images are published.</p>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight nowrap"><code data-lang="terminal"><span class="gp">$</span><span class="w"> </span><span class="nb">export </span><span class="nv">RHCOS_PATH</span><span class="o">=</span><span class="si">$(</span>curl <span class="nt">-s</span> <span class="nt">-S</span> https://raw.githubusercontent.com/openshift/installer/<span class="nv">$COMMIT_ID</span>/data/data/rhcos.json | jq .baseURI | <span class="nb">sed</span> <span class="s1">'s/"//g'</span><span class="si">)</span></code></pre>
</div>
</div>
</li>
<li>
<p>Get the SHA hash for the RHCOS image that will be deployed on the bootstrap VM.</p>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight nowrap"><code data-lang="terminal"><span class="gp">$</span><span class="w"> </span><span class="nb">export </span><span class="nv">RHCOS_QEMU_SHA_UNCOMPRESSED</span><span class="o">=</span><span class="si">$(</span>curl <span class="nt">-s</span> <span class="nt">-S</span> https://raw.githubusercontent.com/openshift/installer/<span class="nv">$COMMIT_ID</span>/data/data/rhcos.json  | jq <span class="nt">-r</span> <span class="s1">'.images.qemu["uncompressed-sha256"]'</span><span class="si">)</span></code></pre>
</div>
</div>
</li>
<li>
<p>Get the SHA hash for the RHCOS image that will be deployed on the nodes.</p>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight nowrap"><code data-lang="terminal"><span class="gp">$</span><span class="w"> </span><span class="nb">export </span><span class="nv">RHCOS_OPENSTACK_SHA_COMPRESSED</span><span class="o">=</span><span class="si">$(</span>curl <span class="nt">-s</span> <span class="nt">-S</span> https://raw.githubusercontent.com/openshift/installer/<span class="nv">$COMMIT_ID</span>/data/data/rhcos.json  | jq <span class="nt">-r</span> <span class="s1">'.images.openstack.sha256'</span><span class="si">)</span></code></pre>
</div>
</div>
</li>
<li>
<p>Download the images and place them in the <code>/home/kni/rhcos_image_cache</code> directory.</p>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight nowrap"><code data-lang="terminal"><span class="gp">$</span><span class="w"> </span>curl <span class="nt">-L</span> <span class="k">${</span><span class="nv">RHCOS_PATH</span><span class="k">}${</span><span class="nv">RHCOS_QEMU_URI</span><span class="k">}</span> <span class="nt">-o</span> /home/kni/rhcos_image_cache/<span class="k">${</span><span class="nv">RHCOS_QEMU_URI</span><span class="k">}</span>
<span class="gp">$</span><span class="w"> </span>curl <span class="nt">-L</span> <span class="k">${</span><span class="nv">RHCOS_PATH</span><span class="k">}${</span><span class="nv">RHCOS_OPENSTACK_URI</span><span class="k">}</span> <span class="nt">-o</span> /home/kni/rhcos_image_cache/<span class="k">${</span><span class="nv">RHCOS_OPENSTACK_URI</span><span class="k">}</span></code></pre>
</div>
</div>
</li>
<li>
<p>Confirm SELinux type is of <code>httpd_sys_content_t</code> for the newly created files.</p>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight nowrap"><code data-lang="terminal"><span class="gp">$</span><span class="w"> </span><span class="nb">ls</span> <span class="nt">-Z</span> /home/kni/rhcos_image_cache</code></pre>
</div>
</div>
</li>
<li>
<p>Create the pod.</p>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight nowrap"><code data-lang="terminal"><span class="gp">$</span><span class="w"> </span>podman run <span class="nt">-d</span> <span class="nt">--name</span> rhcos_image_cache <span class="se">\</span>
<span class="go">-v /home/kni/rhcos_image_cache:/var/www/html \
-p 8080:8080/tcp \
quay.io/centos7/httpd-24-centos7:latest</span></code></pre>
</div>
</div>
</li>
<li>
<p>Generate the <code>bootstrapOSImage</code> and <code>clusterOSImage</code> configuration.</p>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight nowrap"><code data-lang="terminal"><span class="gp">$</span><span class="w"> </span><span class="nb">export </span><span class="nv">BAREMETAL_IP</span><span class="o">=</span><span class="si">$(</span>ip addr show dev baremetal | <span class="nb">awk</span> <span class="s1">'/inet /{print $2}'</span> | <span class="nb">cut</span> <span class="nt">-d</span><span class="s2">"/"</span> <span class="nt">-f1</span><span class="si">)</span>
<span class="gp">$</span><span class="w"> </span><span class="nb">export </span><span class="nv">RHCOS_OPENSTACK_SHA256</span><span class="o">=</span><span class="si">$(</span>zcat /home/kni/rhcos_image_cache/<span class="k">${</span><span class="nv">RHCOS_OPENSTACK_URI</span><span class="k">}</span> | <span class="nb">sha256sum</span> | <span class="nb">awk</span> <span class="s1">'{print $1}'</span><span class="si">)</span>
<span class="gp">$</span><span class="w"> </span><span class="nb">export </span><span class="nv">RHCOS_QEMU_SHA256</span><span class="o">=</span><span class="si">$(</span>zcat /home/kni/rhcos_image_cache/<span class="k">${</span><span class="nv">RHCOS_QEMU_URI</span><span class="k">}</span> | <span class="nb">sha256sum</span> | <span class="nb">awk</span> <span class="s1">'{print $1}'</span><span class="si">)</span>
<span class="gp">$</span><span class="w"> </span><span class="nb">export </span><span class="nv">CLUSTER_OS_IMAGE</span><span class="o">=</span><span class="s2">"http://</span><span class="k">${</span><span class="nv">BAREMETAL_IP</span><span class="k">}</span><span class="s2">:8080/</span><span class="k">${</span><span class="nv">RHCOS_OPENSTACK_URI</span><span class="k">}</span><span class="s2">?sha256=</span><span class="k">${</span><span class="nv">RHCOS_OPENSTACK_SHA256</span><span class="k">}</span><span class="s2">"</span>
<span class="gp">$</span><span class="w"> </span><span class="nb">export </span><span class="nv">BOOTSTRAP_OS_IMAGE</span><span class="o">=</span><span class="s2">"http://</span><span class="k">${</span><span class="nv">BAREMETAL_IP</span><span class="k">}</span><span class="s2">:8080/</span><span class="k">${</span><span class="nv">RHCOS_QEMU_URI</span><span class="k">}</span><span class="s2">?sha256=</span><span class="k">${</span><span class="nv">RHCOS_QEMU_SHA256</span><span class="k">}</span><span class="s2">"</span>
<span class="gp">$</span><span class="w"> </span><span class="nb">echo</span> <span class="s2">"</span><span class="k">${</span><span class="nv">RHCOS_OPENSTACK_SHA256</span><span class="k">}</span><span class="s2">  </span><span class="k">${</span><span class="nv">RHCOS_OPENSTACK_URI</span><span class="k">}</span><span class="s2">"</span> <span class="o">&gt;</span> /home/kni/rhcos_image_cache/rhcos-ootpa-latest.qcow2.md5sum
<span class="gp">$</span><span class="w"> </span><span class="nb">echo</span> <span class="s2">"    bootstrapOSImage=</span><span class="k">${</span><span class="nv">BOOTSTRAP_OS_IMAGE</span><span class="k">}</span><span class="s2">"</span>
<span class="gp">$</span><span class="w"> </span><span class="nb">echo</span> <span class="s2">"    clusterOSImage=</span><span class="k">${</span><span class="nv">CLUSTER_OS_IMAGE</span><span class="k">}</span><span class="s2">"</span></code></pre>
</div>
</div>
</li>
<li>
<p>Add the required configuration to the <code>install-config.yaml</code> file under <code>platform.baremetal</code>.</p>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight nowrap"><code data-lang="terminal"><span class="go">platform:
  baremetal:
</span><span class="gp">    bootstrapOSImage: http://&lt;BAREMETAL_IP&gt;</span>:8080/&lt;RHCOS_QEMU_URI&gt;?sha256<span class="o">=</span>&lt;RHCOS_QEMU_SHA256&gt;
<span class="gp">    clusterOSImage: http://&lt;BAREMETAL_IP&gt;</span>:8080/&lt;RHCOS_OPENSTACK_URI&gt;?sha256<span class="o">=</span>&lt;RHCOS_OPENSTACK_SHA256&gt;</code></pre>
</div>
</div>
<div class="paragraph">
<p>See the <strong>Configuring the install-config.yaml file</strong> section for additional details.</p>
</div>
</li>
</ol>
</div>
</div>
<div class="sect2">
<h3 id="ipi-install-configuration-files"><a class="link" href="#ipi-install-configuration-files">3.6. Configuration files</a></h3>
<div class="sect3">
<h4 id="configuring-the-install-config-file_ipi-install-configuration-files"><a class="link" href="#configuring-the-install-config-file_ipi-install-configuration-files">3.6.1. Configuring the <code>install-config.yaml</code> file</a></h4>
<div class="paragraph">
<p>The <code>install-config.yaml</code> file requires some additional details.
Most of the information is teaching the installer and the resulting cluster enough about the available hardware so that it is able to fully manage it.</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Configure <code>install-config.yaml</code>. Change the appropriate variables to match the environment, including <code>pullSecret</code> and <code>sshKey</code>.</p>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight nowrap"><code data-lang="yaml"><span class="na">apiVersion</span><span class="pi">:</span> <span class="s">v1</span>
<span class="s"><a href="#basedomain">basedomain</a>: &lt;domain&gt;</span>
<span class="na">metadata</span><span class="pi">:</span>
  <span class="s"><a href="#metadataname">name</a>: &lt;cluster-name&gt;</span>
<span class="na">networking</span><span class="pi">:</span>
  <span class="s"><a href="#machinecidr">machineCIDR</a>: &lt;public-cidr&gt;</span>
  <span class="s">networkType</span><span class="err">:</span> <span class="s">OVNKubernetes</span>
<span class="na">compute</span><span class="pi">:</span>
<span class="pi">-</span> <span class="s"><a href="#workername">name</a>: worker</span>
  <span class="s"><a href="#computereplicas">replicas</a>: 2</span> <i class="conum" data-value="1"></i><b>(1)</b>
<span class="na">controlPlane</span><span class="pi">:</span>
  <span class="s"><a href="#controlplanename">name</a>: master</span>
  <span class="s"><a href="#controlplanereplicas">replicas</a>: </span><span class="m">3</span>
  <span class="na">platform</span><span class="pi">:</span>
    <span class="na">baremetal</span><span class="pi">:</span> <span class="pi">{}</span>
<span class="na">platform</span><span class="pi">:</span>
  <span class="na">baremetal</span><span class="pi">:</span>
    <span class="s"><a href="#apivip">apiVIP</a>: &lt;api-ip&gt;</span>
    <span class="s"><a href="#ingressvip">ingressVIP</a>: &lt;wildcard-ip&gt;</span>
    <span class="s"><a href="#provisioningNetworkInterface">provisioningNetworkInterface</a>: &lt;NIC1&gt;</span>
    <span class="s"><a href="#provisioningNetworkCIDR">provisioningNetworkCIDR</a>: &lt;CIDR&gt;</span>
    <span class="s"><a href="#hoststable">hosts</a>:</span>
      <span class="s">- <a href="#name">name</a>: openshift-master-0</span>
        <span class="s"><a href="#role">role</a>: master</span>
        <span class="s"><a href="#bmc-addressing_ipi-install-configuration-files">bmc</a>:</span>
          <span class="s">address</span><span class="err">:</span> <span class="s">ipmi://&lt;out-of-band-ip&gt;</span> <i class="conum" data-value="2"></i><b>(2)</b>
          <span class="s">username</span><span class="err">:</span> <span class="s">&lt;user&gt;</span>
          <span class="s">password</span><span class="err">:</span> <span class="s">&lt;password&gt;</span>
        <span class="s"><a href="#bootMACAddress">bootMACAddress</a>: &lt;NIC1-mac-address&gt;</span>
        <span class="s"><a href="#hardwareProfile">hardwareProfile</a>: default</span>
      <span class="s">- <a href="#name">name</a>: openshift-master-1</span>
        <span class="s"><a href="#role">role</a>: master</span>
        <span class="s"><a href="#bmc-addressing_ipi-install-configuration-files">bmc</a>:</span>
          <span class="s">address</span><span class="err">:</span> <span class="s">ipmi://&lt;out-of-band-ip&gt;</span>
          <span class="s">username</span><span class="err">:</span> <span class="s">&lt;user&gt;</span>
          <span class="s">password</span><span class="err">:</span> <span class="s">&lt;password&gt;</span>
        <span class="s"><a href="#bootMACAddress">bootMACAddress</a>: &lt;NIC1-mac-address&gt;</span>
        <span class="s"><a href="#hardwareProfile">hardwareProfile</a>: default</span>
      <span class="s">- <a href="#name">name</a>: openshift-master-2</span>
        <span class="s"><a href="#role">role</a>: master</span>
        <span class="s"><a href="#bmc-addressing_ipi-install-configuration-files">bmc</a>:</span>
          <span class="s">address</span><span class="err">:</span> <span class="s">ipmi://&lt;out-of-band-ip&gt;</span>
          <span class="s">username</span><span class="err">:</span> <span class="s">&lt;user&gt;</span>
          <span class="s">password</span><span class="err">:</span> <span class="s">&lt;password&gt;</span>
        <span class="s"><a href="#bootMACAddress">bootMACAddress</a>: &lt;NIC1-mac-address&gt;</span>
        <span class="s"><a href="#hardwareProfile">hardwareProfile</a>: default</span>
      <span class="s">- <a href="#name">name</a>: openshift-worker-0</span>
        <span class="s"><a href="#role">role</a>: worker</span>
        <span class="s"><a href="#bmc-addressing_ipi-install-configuration-files">bmc</a>:</span>
          <span class="s">address</span><span class="err">:</span> <span class="s">ipmi://&lt;out-of-band-ip&gt;</span>
          <span class="s">username</span><span class="err">:</span> <span class="s">&lt;user&gt;</span>
          <span class="s">password</span><span class="err">:</span> <span class="s">&lt;password&gt;</span>
        <span class="s"><a href="#bootMACAddress">bootMACAddress</a>: &lt;NIC1-mac-address&gt;</span>
        <span class="s"><a href="#hardwareProfile">hardwareProfile</a>: unknown</span>
      <span class="s">- <a href="#name">name</a>: openshift-worker-1</span>
        <span class="s"><a href="#role">role</a>: worker</span>
        <span class="s"><a href="#bmc-addressing_ipi-install-configuration-files">bmc</a>:</span>
          <span class="s">address</span><span class="err">:</span> <span class="s">ipmi://&lt;out-of-band-ip&gt;</span>
          <span class="s">username</span><span class="err">:</span> <span class="s">&lt;user&gt;</span>
          <span class="s">password</span><span class="err">:</span> <span class="s">&lt;password&gt;</span>
        <span class="s"><a href="#bootMACAddress">bootMACAddress</a>: &lt;NIC1-mac-address&gt;</span>
        <span class="s"><a href="#hardwareProfile">hardwareProfile</a>: unknown</span>
<span class="s"><a href="#pullsecret">pullSecret</a>: '&lt;pull_secret&gt;'</span>
<span class="s"><a href="#sshkey">sshKey</a>: '&lt;ssh_pub_key&gt;'</span></code></pre>
</div>
</div>
<div class="colist arabic">
<table>
<tr>
<td><i class="conum" data-value="1"></i><b>1</b></td>
<td>Scale the worker machines based on the number of worker nodes that are part of the OpenShift Container Platform cluster.</td>
</tr>
<tr>
<td><i class="conum" data-value="2"></i><b>2</b></td>
<td>Refer to the <a href="#bmc-addressing_ipi-install-configuration-files">BMC addressing</a> for more options</td>
</tr>
</table>
</div>
</li>
<li>
<p>Create a directory to store cluster configs.</p>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight nowrap"><code data-lang="terminal"><span class="gp">[kni@provisioner ~]$</span><span class="w"> </span><span class="nb">mkdir</span> ~/clusterconfigs
<span class="gp">[kni@provisioner ~]$</span><span class="w"> </span><span class="nb">cp </span>install-config.yaml ~/clusterconfigs</code></pre>
</div>
</div>
</li>
<li>
<p>Ensure all bare metal nodes are powered off prior to installing the OpenShift Container Platform cluster.</p>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight nowrap"><code data-lang="terminal"><span class="gp">[kni@provisioner ~]$</span><span class="w"> </span>ipmitool <span class="nt">-I</span> lanplus <span class="nt">-U</span> &lt;user&gt; <span class="nt">-P</span> &lt;password&gt; <span class="nt">-H</span> &lt;management-server-ip&gt; power off</code></pre>
</div>
</div>
</li>
<li>
<p>Remove old bootstrap resources if any are left over from a previous deployment attempt.</p>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight nowrap"><code data-lang="terminal"><span class="gp">for i in $</span><span class="o">(</span><span class="nb">sudo </span>virsh list | <span class="nb">tail</span> <span class="nt">-n</span> +3 | <span class="nb">grep </span>bootstrap | <span class="nb">awk</span> <span class="o">{</span><span class="s1">'print $2'</span><span class="o">})</span><span class="p">;</span>
<span class="go">do
</span><span class="gp">  sudo virsh destroy $</span>i<span class="p">;</span>
<span class="gp">  sudo virsh undefine $</span>i<span class="p">;</span>
<span class="gp">  sudo virsh vol-delete $</span>i <span class="nt">--pool</span> <span class="nv">$i</span><span class="p">;</span>
<span class="gp">  sudo virsh vol-delete $</span>i.ign <span class="nt">--pool</span> <span class="nv">$i</span><span class="p">;</span>
<span class="gp">  sudo virsh pool-destroy $</span>i<span class="p">;</span>
<span class="gp">  sudo virsh pool-undefine $</span>i<span class="p">;</span>
<span class="go">done</span></code></pre>
</div>
</div>
</li>
</ol>
</div>
</div>
<div class="sect3">
<h4 id="ipi-install-setting-proxy-settings-within-install-config_ipi-install-configuration-files"><a class="link" href="#ipi-install-setting-proxy-settings-within-install-config_ipi-install-configuration-files">3.6.2. Setting proxy settings within the <code>install-config.yaml</code> file (optional)</a></h4>
<div class="paragraph">
<p>To deploy an OpenShift Container Platform cluster using a proxy, make the following changes to the <code>install-config.yaml</code> file.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight nowrap"><code data-lang="yaml"><span class="na">apiVersion</span><span class="pi">:</span> <span class="s">v1</span>
<span class="na">baseDomain</span><span class="pi">:</span> <span class="s">&lt;domain&gt;</span>
<span class="na">proxy</span><span class="pi">:</span>
  <span class="na">httpProxy</span><span class="pi">:</span> <span class="s">http://USERNAME:PASSWORD@proxy.example.com:PORT</span>
  <span class="na">httpsProxy</span><span class="pi">:</span> <span class="s">https://USERNAME:PASSWORD@proxy.example.com:PORT</span>
  <span class="na">noProxy</span><span class="pi">:</span> <span class="s">&lt;WILDCARD_OF_DOMAIN&gt;,&lt;PROVISIONING_NETWORK/CIDR&gt;,&lt;BMC_ADDRESS_RANGE/CIDR&gt;</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>See below for an example of <code>noProxy</code> with values.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight nowrap"><code data-lang="yaml"><span class="na">noProxy</span><span class="pi">:</span> <span class="s">.example.com,172.22.0.0/24,10.10.0.0/24</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>With a proxy enabled, set the appropriate values of the proxy in the corresponding key/value pair.</p>
</div>
<div class="paragraph">
<p>Key considerations:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>If the proxy does not have an HTTPS proxy, change the value of <code>httpsProxy</code> from <code>https://</code> to <code>http://</code>.</p>
</li>
<li>
<p>If using a provisioning network, include it in the <code>noProxy</code> setting, otherwise the installer will fail.</p>
</li>
<li>
<p>Set all of the proxy settings as environment variables within the provisioner node. For example, <code>HTTP_PROXY</code>, <code>HTTPS_PROXY</code>, and <code>NO_PROXY</code>.</p>
</li>
</ul>
</div>
</div>
<div class="sect3">
<h4 id="modifying-install-config-for-no-provisioning-network_ipi-install-configuration-files"><a class="link" href="#modifying-install-config-for-no-provisioning-network_ipi-install-configuration-files">3.6.3. Modifying the <code>install-config.yaml</code> file for no <code>provisioning</code> network (optional)</a></h4>
<div class="paragraph">
<p>To deploy an OpenShift Container Platform cluster without a <code>provisioning</code> network, make the following changes to the <code>install-config.yaml</code> file.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight nowrap"><code data-lang="yaml"><span class="na">platform</span><span class="pi">:</span>
  <span class="na">baremetal</span><span class="pi">:</span>
    <span class="na">apiVIP</span><span class="pi">:</span> <span class="s">&lt;apiVIP&gt;</span>
    <span class="na">ingressVIP</span><span class="pi">:</span> <span class="s">&lt;ingress/wildcard VIP&gt;</span>
    <span class="na">provisioningNetwork</span><span class="pi">:</span> <span class="s2">"</span><span class="s">Disabled"</span>
    <span class="na">provisioningHostIP</span><span class="pi">:</span> <span class="s">&lt;baremetal_network_IP1&gt;</span>
    <span class="na">bootstrapProvisioningIP</span><span class="pi">:</span> <span class="s">&lt;baremetal_network_IP2&gt;</span></code></pre>
</div>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
<div class="paragraph">
<p>Requires providing two IP addresses from the <code>baremetal</code> network for the <code>provisioningHostIP</code> and <code>bootstrapProvisioningIP</code> configuration settings, and removing the <code>provisioningBridge</code> and <code>provisioningNetworkCIDR</code> configuration settings.</p>
</div>
</td>
</tr>
</table>
</div>
</div>
<div class="sect3">
<h4 id="additional-install-config-parameters_ipi-install-configuration-files"><a class="link" href="#additional-install-config-parameters_ipi-install-configuration-files">3.6.4. Additional <code>install-config</code> parameters</a></h4>
<div class="paragraph">
<p>See the following tables for the required parameters, the <code>hosts</code> parameter,
and the <code>bmc</code> parameter for the <code>install-config.yaml</code> file.</p>
</div>
<table class="tableblock frame-all grid-all stretch">
<caption class="title">Table 2. Required parameters</caption>
<colgroup>
<col style="width: 33.3333%;"/>
<col style="width: 33.3333%;"/>
<col style="width: 33.3334%;"/>
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Parameters</th>
<th class="tableblock halign-left valign-top">Default</th>
<th class="tableblock halign-left valign-top">Description</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><a id="basedomain"></a> <code>baseDomain</code></p></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">The domain name for the cluster. For example, <code>example.com</code>.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><a id="bootmode"></a> <code>bootMode</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>legacy</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">The boot mode for a node. Options are <code>legacy</code>, <code>UEFI</code> and <code>UEFISecureBoot.</code></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><a id="sshkey"></a> <code>sshKey</code></p></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">The <code>sshKey</code> configuration setting contains the key in the <code>~/.ssh/id_rsa.pub</code> file required to access the control plane nodes and worker nodes. Typically, this key is from the <code>provisioner</code> node.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><a id="pullsecret"></a> <code>pullSecret</code></p></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">The <code>pullSecret</code> configuration setting contains a copy of the pull secret downloaded from the <a href="https://cloud.redhat.com/openshift/install/metal/user-provisioned">Install OpenShift on Bare Metal</a> page when preparing the provisioner node.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><div class="content"><div id="metadataname" class="listingblock">
<div class="content">
<pre class="nowrap">metadata:
    name:</pre>
</div>
</div></div></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">The name to be given to the OpenShift Container Platform cluster. For example, <code>openshift</code>.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><div class="content"><div id="machinecidr" class="listingblock">
<div class="content">
<pre class="nowrap">networking:
    machineCIDR:</pre>
</div>
</div></div></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">The public CIDR (Classless Inter-Domain Routing) of the external network. For example, <code>10.0.0.0/24</code>
or <code>2620:52:0:1302::/64</code>
.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><div class="content"><div id="workername" class="listingblock">
<div class="content">
<pre class="nowrap">compute:
  - name: worker</pre>
</div>
</div></div></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">The OpenShift Container Platform cluster requires a name be provided for worker (or compute) nodes even if there are zero nodes.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><div class="content"><div id="computereplicas" class="listingblock">
<div class="content">
<pre class="nowrap">compute:
    replicas: 2</pre>
</div>
</div></div></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Replicas sets the number of worker (or compute) nodes in the OpenShift Container Platform cluster.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><div class="content"><div id="controlplanename" class="listingblock">
<div class="content">
<pre class="nowrap">controlPlane:
    name: master</pre>
</div>
</div></div></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">The OpenShift Container Platform cluster requires a name for control plane (master) nodes.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><div class="content"><div id="controlplanereplicas" class="listingblock">
<div class="content">
<pre class="nowrap">controlPlane:
    replicas: 3</pre>
</div>
</div></div></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Replicas sets the number of control plane (master) nodes included as part of the OpenShift Container Platform cluster.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><a id="provisioningNetworkInterface"></a><code>provisioningNetworkInterface</code></p>
</div></div></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">The name of the network interface on control plane nodes connected to the
provisioning network.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>defaultMachinePlatform</code></p></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">The default configuration used for machine pools without a platform configuration.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><a id="apivip"></a><code>apiVIP</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>api.&lt;clustername.clusterdomain&gt;</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">The VIP to use for internal API communication.</p>
<p class="tableblock">This setting must either be provided or pre-configured in the DNS so that the
default name resolves correctly.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>disableCertificateVerification</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>False</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>redfish</code> and <code>redfish-virtualmedia</code> need this parameter to manage BMC addresses. The value should be <code>True</code> when using a self-signed certificate for BMC addresses.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><a id="ingressvip"></a><code>ingressVIP</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>test.apps.&lt;clustername.clusterdomain&gt;</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">The VIP to use for ingress traffic.</p></td>
</tr>
</tbody>
</table>
<table class="tableblock frame-all grid-all stretch">
<caption class="title">Table 3. Optional Parameters</caption>
<colgroup>
<col style="width: 20%;"/>
<col style="width: 20%;"/>
<col style="width: 60%;"/>
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Parameters</th>
<th class="tableblock halign-left valign-top">Default</th>
<th class="tableblock halign-left valign-top">Description</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>provisioningDHCPRange</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>172.22.0.10,172.22.0.100</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Defines the IP range for nodes on the <code>provisioning</code> network.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><code>provisioningNetworkCIDR</code></p>
</div></div></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>172.22.0.0/24</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">The CIDR for the network to use for provisioning. This option is required when not using the default address range on the <code>provisioning</code> network.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>clusterProvisioningIP</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">The third IP address of the <code>provisioningNetworkCIDR</code>.</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">The IP address within the cluster where the provisioning services run. Defaults to the third IP address of the <code>provisioning</code> subnet. For example, <code>172.22.0.3</code>.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>bootstrapProvisioningIP</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">The second IP address of the <code>provisioningNetworkCIDR</code>.</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">The IP address on the bootstrap VM where the provisioning services run while the installer is deploying the control plane (master) nodes. Defaults to the second IP address of the <code>provisioning</code> subnet. For example, <code>172.22.0.2</code>
or <code>2620:52:0:1307::2</code>
.</p>
<p class="tableblock">Set this parameter to an available IP address on the <code>baremetal</code> network when the <code>provisioningNetwork</code> configuration setting is set to <code>Disabled</code>.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>externalBridge</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>baremetal</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">The name of the <code>baremetal</code> bridge of the hypervisor attached to the <code>baremetal</code> network.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>provisioningBridge</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>provisioning</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">The name of the <code>provisioning</code> bridge on the <code>provisioner</code> host attached to the <code>provisioning</code> network.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>defaultMachinePlatform</code></p></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">The default configuration used for machine pools without a platform configuration.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>bootstrapOSImage</code></p></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">A URL to override the default operating system image for the bootstrap node. The URL must contain a SHA-256 hash of the image. For example:
<code><a href="https://mirror.openshift.com/rhcos-&lt;version&gt;-qemu.qcow2.gz?sha256=&lt;uncompressed_sha256&gt" class="bare">https://mirror.openshift.com/rhcos-&lt;version&gt;-qemu.qcow2.gz?sha256=&lt;uncompressed_sha256&gt</a>;</code>
 or  <code>http://[2620:52:0:1307::1]/rhcos-&lt;version&gt;-qemu.x86_64.qcow2.gz?sha256=&lt;uncompressed_sha256&gt;</code>
.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>clusterOSImage</code></p></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">A URL to override the default operating system for cluster nodes. The URL must include a SHA-256 hash of the image. For example,  <code><a href="https://mirror.openshift.com/images/rhcos-&lt;version&gt;-openstack.qcow2.gz?sha256=&lt;compressed_sha256&gt" class="bare">https://mirror.openshift.com/images/rhcos-&lt;version&gt;-openstack.qcow2.gz?sha256=&lt;compressed_sha256&gt</a>;</code>.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>provisioningNetwork</code></p></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Set this parameter to <code>Disabled</code> to disable the requirement for a <code>provisioning</code> network. User may only do virtual media based provisioning, or bring up the cluster using assisted installation. If using power management, BMC&#8217;s must be accessible from the machine networks. User must provide two IP addresses on the external network that are used for the provisioning services.
Set this parameter to <code>Managed</code>, which is the default, to fully manage the provisioning network, including DHCP, TFTP, and so on.</p>
<p class="tableblock">Set this parameter to <code>Unmanaged</code> to still enable the provisioning network but take care of manual configuration of DHCP. Virtual media provisioning is recommended but PXE is still available if required.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>provisioningHostIP</code></p></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Set this parameter to an available IP address on the <code>baremetal</code> network when the <code>provisioningNetwork</code> configuration setting is set to <code>Disabled</code>.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>httpProxy</code></p></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Set this parameter to the appropriate HTTP proxy used within your environment.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>httpsProxy</code></p></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Set this parameter to the appropriate HTTPS proxy used within your environment.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>noProxy</code></p></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Set this parameter to the appropriate list of exclusions for proxy usage within your environment.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>bootstrapExternalStaticIP</code></p></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Set this parameter to the appropriate IP address on the <code>baremetal</code> network when the <code>provisioningNetwork</code> configuration setting is set to <code>Disabled</code>.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>bootstrapExternalStaticGateway</code></p></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Set this parameter to the appropriate GW address on the <code>baremetal</code> network when the <code>provisioningNetwork</code> configuration setting is set to <code>Disabled</code>.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>bootstrapExternalStaticDNS</code></p></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Set this parameter to the appropriate DNS address on the <code>baremetal</code> network when the <code>provisioningNetwork</code> configuration setting is set to <code>Disabled</code>.</p></td>
</tr>
</tbody>
</table>
<div id="hoststable" class="paragraph">
<div class="title">Hosts</div>
<p>The <code>hosts</code> parameter is a list of separate bare metal assets used to build the cluster.</p>
</div>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 33.3333%;"/>
<col style="width: 33.3333%;"/>
<col style="width: 33.3334%;"/>
</colgroup>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Name</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Default</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Description</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><a id="name"></a><code>name</code></p></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">The name of the <code>BareMetalHost</code> resource to associate with the details. For example, <code>openshift-master-0</code>.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><a id="role"></a><code>role</code></p></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">The role of the bare metal node. Either <code>master</code> or <code>worker</code>.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>bmc</code></p></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Connection details for the baseboard management controller. See the BMC addressing section for additional details.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><a id="bootMACAddress"></a><code>bootMACAddress</code></p></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">The MAC address of the NIC the host will use to boot on the <code>provisioning</code>  network.</p></td>
</tr>
</tbody>
</table>
</div>
<div class="sect3">
<h4 id="bmc-addressing_ipi-install-configuration-files"><a class="link" href="#bmc-addressing_ipi-install-configuration-files">3.6.5. BMC addressing</a></h4>
<div class="paragraph">
<p>Most vendors support BMC addressing with the Intelligent Platform Management Interface or IPMI. IPMI does not encrypt communications. It is suitable for use within a data center over a secured or dedicated management network. Check with your vendor to see if they support Redfish network boot. Redfish delivers simple and secure management for converged, hybrid IT and the Software Defined Data Center or SDDC. Redfish is human readable and machine capable, and leverages common Internet and web services standards to expose information directly to the modern tool chain. If your hardware does not support Redfish network boot, use IPMI.</p>
</div>
<div class="paragraph">
<div class="title">IPMI</div>
<p>Hosts using IPMI use the <code>ipmi://&lt;out-of-band-ip&gt;:&lt;port&gt;</code> address format, which defaults to port <code>623</code> if not specified. The following example demonstrates an IPMI configuration within the <code>install-config.yaml</code> file.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight nowrap"><code data-lang="yaml"><span class="na">platform</span><span class="pi">:</span>
  <span class="na">baremetal</span><span class="pi">:</span>
    <span class="na">hosts</span><span class="pi">:</span>
      <span class="pi">-</span> <span class="na">name</span><span class="pi">:</span> <span class="s">openshift-master-0</span>
        <span class="na">role</span><span class="pi">:</span> <span class="s">master</span>
        <span class="na">bmc</span><span class="pi">:</span>
          <span class="na">address</span><span class="pi">:</span> <span class="s">ipmi://&lt;out-of-band-ip&gt;</span>
          <span class="na">username</span><span class="pi">:</span> <span class="s">&lt;user&gt;</span>
          <span class="na">password</span><span class="pi">:</span> <span class="s">&lt;password&gt;</span></code></pre>
</div>
</div>
<div class="paragraph">
<div class="title">Redfish network boot</div>
<p>To enable Redfish, use <code>redfish://</code> or <code>redfish+http://</code> to disable TLS. The installer requires both the host name or the IP address and the path to the system ID. The following example demonstrates a Redfish configuration within the <code>install-config.yaml</code> file.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight nowrap"><code data-lang="yaml"><span class="na">platform</span><span class="pi">:</span>
  <span class="na">baremetal</span><span class="pi">:</span>
    <span class="na">hosts</span><span class="pi">:</span>
      <span class="pi">-</span> <span class="na">name</span><span class="pi">:</span> <span class="s">openshift-master-0</span>
        <span class="na">role</span><span class="pi">:</span> <span class="s">master</span>
        <span class="na">bmc</span><span class="pi">:</span>
          <span class="na">address</span><span class="pi">:</span> <span class="s">redfish://&lt;out-of-band-ip&gt;/redfish/v1/Systems/1</span>
          <span class="na">username</span><span class="pi">:</span> <span class="s">&lt;user&gt;</span>
          <span class="na">password</span><span class="pi">:</span> <span class="s">&lt;password&gt;</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>While it is recommended to have a certificate of authority for the out-of-band management addresses, you must include <code>disableCertificateVerification: True</code> in the <code>bmc</code> configuration if using self-signed certificates. The following example demonstrates a Redfish configuration using the <code>disableCertificateVerification: True</code> configuration parameter within the <code>install-config.yaml</code> file.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight nowrap"><code data-lang="yaml"><span class="na">platform</span><span class="pi">:</span>
  <span class="na">baremetal</span><span class="pi">:</span>
    <span class="na">hosts</span><span class="pi">:</span>
      <span class="pi">-</span> <span class="na">name</span><span class="pi">:</span> <span class="s">openshift-master-0</span>
        <span class="na">role</span><span class="pi">:</span> <span class="s">master</span>
        <span class="na">bmc</span><span class="pi">:</span>
          <span class="na">address</span><span class="pi">:</span> <span class="s">redfish://&lt;out-of-band-ip&gt;/redfish/v1/Systems/1</span>
          <span class="na">username</span><span class="pi">:</span> <span class="s">&lt;user&gt;</span>
          <span class="na">password</span><span class="pi">:</span> <span class="s">&lt;password&gt;</span>
          <span class="na">disableCertificateVerification</span><span class="pi">:</span> <span class="s">True</span></code></pre>
</div>
</div>
<div class="sect4">
<h5 id="bmc-addressing-for-dell-idrac_ipi-install-configuration-files"><a class="link" href="#bmc-addressing-for-dell-idrac_ipi-install-configuration-files">BMC addressing for Dell iDRAC</a></h5>
<div class="paragraph">
<p>The <code>address</code> field for each <code>bmc</code> entry is a URL for connecting to the OpenShift Container Platform cluster nodes, including the type of controller in the URL scheme and its location on the network.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight nowrap"><code data-lang="yaml"><span class="na">platform</span><span class="pi">:</span>
  <span class="na">baremetal</span><span class="pi">:</span>
    <span class="na">hosts</span><span class="pi">:</span>
      <span class="pi">-</span> <span class="na">name</span><span class="pi">:</span> <span class="s">&lt;host name&gt;</span>
        <span class="na">role</span><span class="pi">:</span> <span class="s">&lt;master | worker&gt;</span>
        <span class="na">bmc</span><span class="pi">:</span>
          <span class="na">address</span><span class="pi">:</span> <span class="s">&lt;address&gt;</span> <i class="conum" data-value="1"></i><b>(1)</b>
          <span class="na">username</span><span class="pi">:</span> <span class="s">&lt;user&gt;</span>
          <span class="na">password</span><span class="pi">:</span> <span class="s">&lt;password&gt;</span></code></pre>
</div>
</div>
<div class="colist arabic">
<table>
<tr>
<td><i class="conum" data-value="1"></i><b>1</b></td>
<td>The <code>address</code> configuration setting specifies the protocol.</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>For Dell hardware, Red Hat supports integrated Dell Remote Access Controller (iDRAC) virtual media, Redfish network boot, and IPMI.</p>
</div>
<table class="tableblock frame-ends grid-all stretch">
<caption class="title">Table 4. BMC address formats for Dell iDRAC</caption>
<colgroup>
<col style="width: 50%;"/>
<col style="width: 50%;"/>
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Protocol</th>
<th class="tableblock halign-left valign-top">Address Format</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">iDRAC virtual media</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>idrac-virtualmedia://&lt;out-of-band-ip&gt;/redfish/v1/Systems/System.Embedded.1</code></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Redfish network boot</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>redfish://&lt;out-of-band-ip&gt;/redfish/v1/Systems/System.Embedded.1</code></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">IPMI</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>ipmi://&lt;out-of-band-ip&gt;</code></p></td>
</tr>
</tbody>
</table>
<div class="admonitionblock important">
<table>
<tr>
<td class="icon">
<i class="fa icon-important" title="Important"></i>
</td>
<td class="content">
<div class="paragraph">
<p>Use <code>idrac-virtualmedia</code> as the protocol for Redfish virtual media. <code>redfish-virtualmedia</code> will not work on Dell hardware. Dell&#8217;s <code>idrac-virtualmedia</code> uses the Redfish standard with Dell&#8217;s OEM extensions.</p>
</div>
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>See the following sections for additional details.</p>
</div>
<div class="paragraph">
<div class="title">Redfish virtual media for Dell iDRAC</div>
<p>For Redfish virtual media on Dell servers, use <code>idrac-virtualmedia://</code> in the <code>address</code> setting. Using <code>redfish-virtualmedia://</code> will not work.</p>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
<div class="paragraph">
<p>Redfish virtual media on Dell servers has a known issue in OpenShift Container Platform 4.6, which will be resolved in a future release.</p>
</div>
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>The following example demonstrates using iDRAC virtual media within the  <code>install-config.yaml</code> file.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight nowrap"><code data-lang="yaml"><span class="na">platform</span><span class="pi">:</span>
  <span class="na">baremetal</span><span class="pi">:</span>
    <span class="na">hosts</span><span class="pi">:</span>
      <span class="pi">-</span> <span class="na">name</span><span class="pi">:</span> <span class="s">openshift-master-0</span>
        <span class="na">role</span><span class="pi">:</span> <span class="s">master</span>
        <span class="na">bmc</span><span class="pi">:</span>
          <span class="na">address</span><span class="pi">:</span> <span class="s">idrac-virtualmedia://&lt;out-of-band-ip&gt;/redfish/v1/Systems/System.Embedded.1</span>
          <span class="na">username</span><span class="pi">:</span> <span class="s">&lt;user&gt;</span>
          <span class="na">password</span><span class="pi">:</span> <span class="s">&lt;password&gt;</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>While it is recommended to have a certificate of authority for the out-of-band management addresses, you must include <code>disableCertificateVerification: True</code> in the <code>bmc</code> configuration if using self-signed certificates. The following example demonstrates a Redfish configuration using the <code>disableCertificateVerification: True</code> configuration parameter within the <code>install-config.yaml</code> file.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight nowrap"><code data-lang="yaml"><span class="na">platform</span><span class="pi">:</span>
  <span class="na">baremetal</span><span class="pi">:</span>
    <span class="na">hosts</span><span class="pi">:</span>
      <span class="pi">-</span> <span class="na">name</span><span class="pi">:</span> <span class="s">openshift-master-0</span>
        <span class="na">role</span><span class="pi">:</span> <span class="s">master</span>
        <span class="na">bmc</span><span class="pi">:</span>
          <span class="na">address</span><span class="pi">:</span> <span class="s">idrac-virtualmedia://&lt;out-of-band-ip&gt;/redfish/v1/Systems/System.Embedded.1</span>
          <span class="na">username</span><span class="pi">:</span> <span class="s">&lt;user&gt;</span>
          <span class="na">password</span><span class="pi">:</span> <span class="s">&lt;password&gt;</span>
          <span class="na">disableCertificateVerification</span><span class="pi">:</span> <span class="s">True</span></code></pre>
</div>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
<div class="paragraph">
<p>Currently, Redfish is only supported on Dell with iDRAC firmware versions <code>4.20.20.20</code> through <code>04.40.00.00</code> for installer-provisioned installations on bare metal deployments. There is a known issue with version <code>04.40.00.00</code>. With iDRAC 9 firmware version <code>04.40.00.00</code>, the Virtual Console plug-in defaults to <code>eHTML5</code>, which causes problems with the <strong>InsertVirtualMedia</strong> workflow. Set the plug-in to <code>HTML5</code> to avoid this issue. The menu path is: <strong>Configuration</strong> &#8594; <strong>Virtual console</strong> &#8594; <strong>Plug-in Type</strong> &#8594; <strong>HTML5</strong> .</p>
</div>
<div class="paragraph">
<p>Ensure the OpenShift Container Platform cluster nodes have AutoAttach Enabled through the iDRAC console. The menu path is: <strong>Configuration</strong> &#8594; <strong>Virtual Media</strong> &#8594; <strong>Attach Mode</strong> &#8594; <code>AutoAttach</code> .</p>
</div>
<div class="paragraph">
<p>Use <code>idrac-virtualmedia://</code> as the protocol for Redfish virtual media. Using <code>redfish-virtualmedia://</code> will not work on Dell hardware, because the <code>idrac-virtualmedia://</code> protocol corresponds to the <code>idrac</code> hardware type and the Redfish protocol in Ironic. Dell&#8217;s <code>idrac-virtualmedia://</code> protocol uses the Redfish standard with Dell&#8217;s OEM extensions. Ironic also supports the <code>idrac</code> type with the WSMAN protocol. Therefore, you must specify <code>idrac-virtualmedia://</code> to avoid unexpected behavior when electing to use Redfish with virtual media on Dell hardware.</p>
</div>
</td>
</tr>
</table>
</div>
<div class="paragraph">
<div class="title">Redfish network boot for iDRAC</div>
<p>To enable Redfish, use <code>redfish://</code> or <code>redfish+http://</code> to disable transport layer security (TLS). The installer requires both the host name or the IP address and the path to the system ID. The following example demonstrates a Redfish configuration within the <code>install-config.yaml</code> file.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight nowrap"><code data-lang="yaml"><span class="na">platform</span><span class="pi">:</span>
  <span class="na">baremetal</span><span class="pi">:</span>
    <span class="na">hosts</span><span class="pi">:</span>
      <span class="pi">-</span> <span class="na">name</span><span class="pi">:</span> <span class="s">openshift-master-0</span>
        <span class="na">role</span><span class="pi">:</span> <span class="s">master</span>
        <span class="na">bmc</span><span class="pi">:</span>
          <span class="na">address</span><span class="pi">:</span> <span class="s">redfish://&lt;out-of-band-ip&gt;/redfish/v1/Systems/System.Embedded.1</span>
          <span class="na">username</span><span class="pi">:</span> <span class="s">&lt;user&gt;</span>
          <span class="na">password</span><span class="pi">:</span> <span class="s">&lt;password&gt;</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>While it is recommended to have a certificate of authority for the out-of-band management addresses, you must include <code>disableCertificateVerification: True</code> in the <code>bmc</code> configuration if using self-signed certificates. The following example demonstrates a Redfish configuration using the <code>disableCertificateVerification: True</code> configuration parameter within the <code>install-config.yaml</code> file.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight nowrap"><code data-lang="yaml"><span class="na">platform</span><span class="pi">:</span>
  <span class="na">baremetal</span><span class="pi">:</span>
    <span class="na">hosts</span><span class="pi">:</span>
      <span class="pi">-</span> <span class="na">name</span><span class="pi">:</span> <span class="s">openshift-master-0</span>
        <span class="na">role</span><span class="pi">:</span> <span class="s">master</span>
        <span class="na">bmc</span><span class="pi">:</span>
          <span class="na">address</span><span class="pi">:</span> <span class="s">redfish://&lt;out-of-band-ip&gt;/redfish/v1/Systems/System.Embedded.1</span>
          <span class="na">username</span><span class="pi">:</span> <span class="s">&lt;user&gt;</span>
          <span class="na">password</span><span class="pi">:</span> <span class="s">&lt;password&gt;</span>
          <span class="na">disableCertificateVerification</span><span class="pi">:</span> <span class="s">True</span></code></pre>
</div>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
<div class="paragraph">
<p>Currently, Redfish is only supported on Dell hardware with iDRAC firmware versions <code>4.20.20.20</code> through <code>04.40.00.00</code> for installer-provisioned installations on bare metal deployments. There is a known issue with version <code>04.40.00.00</code>. With iDRAC 9 firmware version <code>04.40.00.00</code>, the Virtual Console plug-in defaults to <code>eHTML5</code>, which causes problems with the <strong>InsertVirtualMedia</strong> workflow. Set the plug-in to <code>HTML5</code> to avoid this issue. The menu path is: <strong>Configuration</strong> &#8594; <strong>Virtual console</strong> &#8594; <strong>Plug-in Type</strong> &#8594; <strong>HTML5</strong> .</p>
</div>
<div class="paragraph">
<p>Ensure the OpenShift Container Platform cluster nodes have AutoAttach Enabled through the iDRAC console. The menu path is: <strong>Configuration</strong> &#8594; <strong>Virtual Media</strong> &#8594; <strong>Attach Mode</strong> &#8594; <strong>AutoAttach</strong> .</p>
</div>
<div class="paragraph">
<p>The <code>redfish://</code> URL protocol corresponds to the <code>redfish</code> hardware type in Ironic.</p>
</div>
</td>
</tr>
</table>
</div>
</div>
<div class="sect4">
<h5 id="bmc-addressing-for-hpe-ilo_ipi-install-configuration-files"><a class="link" href="#bmc-addressing-for-hpe-ilo_ipi-install-configuration-files">BMC addressing for HPE iLO</a></h5>
<div class="paragraph">
<p>The <code>address</code> field for each <code>bmc</code> entry is a URL for connecting to the OpenShift Container Platform cluster nodes, including the type of controller in the URL scheme and its location on the network.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight nowrap"><code data-lang="yaml"><span class="na">platform</span><span class="pi">:</span>
  <span class="na">baremetal</span><span class="pi">:</span>
    <span class="na">hosts</span><span class="pi">:</span>
      <span class="pi">-</span> <span class="na">name</span><span class="pi">:</span> <span class="s">&lt;host name&gt;</span>
        <span class="na">role</span><span class="pi">:</span> <span class="s">&lt;master | worker&gt;</span>
        <span class="na">bmc</span><span class="pi">:</span>
          <span class="na">address</span><span class="pi">:</span> <span class="s">&lt;address&gt;</span> <i class="conum" data-value="1"></i><b>(1)</b>
          <span class="na">username</span><span class="pi">:</span> <span class="s">&lt;user&gt;</span>
          <span class="na">password</span><span class="pi">:</span> <span class="s">&lt;password&gt;</span></code></pre>
</div>
</div>
<div class="colist arabic">
<table>
<tr>
<td><i class="conum" data-value="1"></i><b>1</b></td>
<td>The <code>address</code> configuration setting specifies the protocol.</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>For HPE integrated Lights Out (iLO), Red Hat supports Redfish virtual media, Redfish network boot, and IPMI.</p>
</div>
<table class="tableblock frame-ends grid-all stretch">
<caption class="title">Table 5. BMC address formats for HPE iLO</caption>
<colgroup>
<col style="width: 50%;"/>
<col style="width: 50%;"/>
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Protocol</th>
<th class="tableblock halign-left valign-top">Address Format</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Redfish virtual media</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>redfish-virtualmedia://&lt;out-of-band-ip&gt;/redfish/v1/Systems/1</code></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Redfish network boot</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>redfish://&lt;out-of-band-ip&gt;/redfish/v1/Systems/1</code></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">IPMI</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>ipmi://&lt;out-of-band-ip&gt;</code></p></td>
</tr>
</tbody>
</table>
<div class="paragraph">
<p>See the following sections for additional details.</p>
</div>
<div class="paragraph">
<div class="title">Redfish virtual media for HPE iLO</div>
<p>To enable Redfish virtual media for HPE servers, use <code>redfish-virtualmedia://</code> in the <code>address</code> setting. The following example demonstrates using Redfish virtual media within the <code>install-config.yaml</code> file.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight nowrap"><code data-lang="yaml"><span class="na">platform</span><span class="pi">:</span>
  <span class="na">baremetal</span><span class="pi">:</span>
    <span class="na">hosts</span><span class="pi">:</span>
      <span class="pi">-</span> <span class="na">name</span><span class="pi">:</span> <span class="s">openshift-master-0</span>
        <span class="na">role</span><span class="pi">:</span> <span class="s">master</span>
        <span class="na">bmc</span><span class="pi">:</span>
          <span class="na">address</span><span class="pi">:</span> <span class="s">redfish-virtualmedia://&lt;out-of-band-ip&gt;/redfish/v1/Systems/1</span>
          <span class="na">username</span><span class="pi">:</span> <span class="s">&lt;user&gt;</span>
          <span class="na">password</span><span class="pi">:</span> <span class="s">&lt;password&gt;</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>While it is recommended to have a certificate of authority for the out-of-band management addresses, you must include <code>disableCertificateVerification: True</code> in the <code>bmc</code> configuration if using self-signed certificates. The following example demonstrates a Redfish configuration using the <code>disableCertificateVerification: True</code> configuration parameter within the <code>install-config.yaml</code> file.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight nowrap"><code data-lang="yaml"><span class="na">platform</span><span class="pi">:</span>
  <span class="na">baremetal</span><span class="pi">:</span>
    <span class="na">hosts</span><span class="pi">:</span>
      <span class="pi">-</span> <span class="na">name</span><span class="pi">:</span> <span class="s">openshift-master-0</span>
        <span class="na">role</span><span class="pi">:</span> <span class="s">master</span>
        <span class="na">bmc</span><span class="pi">:</span>
          <span class="na">address</span><span class="pi">:</span> <span class="s">redfish-virtualmedia://&lt;out-of-band-ip&gt;/redfish/v1/Systems/1</span>
          <span class="na">username</span><span class="pi">:</span> <span class="s">&lt;user&gt;</span>
          <span class="na">password</span><span class="pi">:</span> <span class="s">&lt;password&gt;</span>
          <span class="na">disableCertificateVerification</span><span class="pi">:</span> <span class="s">True</span></code></pre>
</div>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
<div class="paragraph">
<p>Redfish virtual media is not supported on 9th generation systems running iLO4, because Ironic does not support iLO4 with virtual media.</p>
</div>
</td>
</tr>
</table>
</div>
<div class="paragraph">
<div class="title">Redfish network boot for HPE iLO</div>
<p>To enable Redfish, use <code>redfish://</code> or <code>redfish+http://</code> to disable TLS. The installer requires both the host name or the IP address and the path to the system ID. The following example demonstrates a Redfish configuration within the <code>install-config.yaml</code> file.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight nowrap"><code data-lang="yaml"><span class="na">platform</span><span class="pi">:</span>
  <span class="na">baremetal</span><span class="pi">:</span>
    <span class="na">hosts</span><span class="pi">:</span>
      <span class="pi">-</span> <span class="na">name</span><span class="pi">:</span> <span class="s">openshift-master-0</span>
        <span class="na">role</span><span class="pi">:</span> <span class="s">master</span>
        <span class="na">bmc</span><span class="pi">:</span>
          <span class="na">address</span><span class="pi">:</span> <span class="s">redfish://&lt;out-of-band-ip&gt;/redfish/v1/Systems/1</span>
          <span class="na">username</span><span class="pi">:</span> <span class="s">&lt;user&gt;</span>
          <span class="na">password</span><span class="pi">:</span> <span class="s">&lt;password&gt;</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>While it is recommended to have a certificate of authority for the out-of-band management addresses, you must include <code>disableCertificateVerification: True</code> in the <code>bmc</code> configuration if using self-signed certificates. The following example demonstrates a Redfish configuration using the <code>disableCertificateVerification: True</code> configuration parameter within the <code>install-config.yaml</code> file.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight nowrap"><code data-lang="yaml"><span class="na">platform</span><span class="pi">:</span>
  <span class="na">baremetal</span><span class="pi">:</span>
    <span class="na">hosts</span><span class="pi">:</span>
      <span class="pi">-</span> <span class="na">name</span><span class="pi">:</span> <span class="s">openshift-master-0</span>
        <span class="na">role</span><span class="pi">:</span> <span class="s">master</span>
        <span class="na">bmc</span><span class="pi">:</span>
          <span class="na">address</span><span class="pi">:</span> <span class="s">redfish://&lt;out-of-band-ip&gt;/redfish/v1/Systems/1</span>
          <span class="na">username</span><span class="pi">:</span> <span class="s">&lt;user&gt;</span>
          <span class="na">password</span><span class="pi">:</span> <span class="s">&lt;password&gt;</span>
          <span class="na">disableCertificateVerification</span><span class="pi">:</span> <span class="s">True</span></code></pre>
</div>
</div>
</div>
<div class="sect4">
<h5 id="bmc-addressing-for-hpe-ilo_ipi-install-configuration-files"><a class="link" href="#bmc-addressing-for-hpe-ilo_ipi-install-configuration-files">BMC addressing for KVM with sushy-tools Redfish emulator</a></h5>
<div class="paragraph">
<p>The <code>address</code> field for each <code>bmc</code> entry is a URL for connecting to the OpenShift Container Platform cluster nodes, including the type of controller in the URL scheme and its location on the network.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight nowrap"><code data-lang="yaml"><span class="na">platform</span><span class="pi">:</span>
  <span class="na">baremetal</span><span class="pi">:</span>
    <span class="na">hosts</span><span class="pi">:</span>
      <span class="pi">-</span> <span class="na">name</span><span class="pi">:</span> <span class="s">&lt;host name&gt;</span>
        <span class="na">role</span><span class="pi">:</span> <span class="s">&lt;master | worker&gt;</span>
        <span class="na">bmc</span><span class="pi">:</span>
          <span class="na">address</span><span class="pi">:</span> <span class="s">&lt;address&gt;</span> <i class="conum" data-value="1"></i><b>(1)</b>
          <span class="na">username</span><span class="pi">:</span> <span class="s">&lt;user&gt;</span>
          <span class="na">password</span><span class="pi">:</span> <span class="s">&lt;password&gt;</span></code></pre>
</div>
</div>
<div class="colist arabic">
<table>
<tr>
<td><i class="conum" data-value="1"></i><b>1</b></td>
<td>The <code>address</code> configuration setting specifies the protocol.</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>For KVM working with sushy-tools Redfish emulator, Red Hat supports Redfish virtual media and Redfish network boot.</p>
</div>
<table class="tableblock frame-ends grid-all stretch">
<caption class="title">Table 6. BMC address formats for KVM with sushy-tools Redfish emulator</caption>
<colgroup>
<col style="width: 50%;"/>
<col style="width: 50%;"/>
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Protocol</th>
<th class="tableblock halign-left valign-top">Address Format</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Redfish virtual media</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>redfish-virtualmedia://&lt;out-of-band-ip&gt;:&lt;sushy-tools-port&gt;/redfish/v1/Systems/&lt;system-id&gt;</code></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Redfish network boot</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>redfish://&lt;out-of-band-ip&gt;:&lt;sushy-tools-port&gt;/redfish/v1/Systems/&lt;system-id&gt;</code></p></td>
</tr>
</tbody>
</table>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
<div class="paragraph">
<p>The sushy-tools Redfish emulator runs from the KVM hypervisor and a single instance acts as the virtual BMC for all the guest machines. This means both the out of band IP address and port, will be same and each individual machine must be identified by its System ID.</p>
</div>
<div class="paragraph">
<p>You may retrieve the System ID of your guest machines with the following command:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight nowrap"><code data-lang="bash"><span class="nt">---</span>
<span class="nv">$ </span>virsh list <span class="nt">--all</span> <span class="nt">--name</span> <span class="nt">--uuid</span>
d8ac6bf8-3062-4954-84c3-e097faa17025 compute-0
84971a71-3935-4a92-8d90-a9f8440dac09 compute-1
92430f42-8805-4412-959a-2a7252c7c540 compute-2
0fea5296-db95-41d7-9295-f57cfa50255f control-plane-0
4986e405-fd3a-483d-9210-8cb120b98f80 control-plane-1
26bf228c-44fd-4c49-9e6f-44f4b5968b34 control-plane-2
<span class="nt">---</span></code></pre>
</div>
</div>
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>See the following sections for additional details.</p>
</div>
<div class="paragraph">
<div class="title">Redfish virtual media for KVM with sushy-tools Redfish emulator</div>
<p>To enable Redfish virtual media for KVM environments running the sushy-tools Redfish emulator, use <code>redfish-virtualmedia://</code> in the <code>address</code> setting. The following example demonstrates using Redfish virtual media within the <code>install-config.yaml</code> file.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight nowrap"><code data-lang="yaml"><span class="na">platform</span><span class="pi">:</span>
  <span class="na">baremetal</span><span class="pi">:</span>
    <span class="na">hosts</span><span class="pi">:</span>
      <span class="pi">-</span> <span class="na">name</span><span class="pi">:</span> <span class="s">openshift-master-0</span>
        <span class="na">role</span><span class="pi">:</span> <span class="s">master</span>
        <span class="na">bmc</span><span class="pi">:</span>
          <span class="na">address</span><span class="pi">:</span> <span class="s">redfish-virtualmedia://&lt;out-of-band-ip&gt;:&lt;sushy-tools-port&gt;/redfish/v1/Systems/&lt;system-id&gt;</span>
          <span class="na">username</span><span class="pi">:</span> <span class="s">&lt;user&gt;</span>
          <span class="na">password</span><span class="pi">:</span> <span class="s">&lt;password&gt;</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>While it is recommended to have a certificate of authority for the out-of-band management addresses, you must include <code>disableCertificateVerification: True</code> in the <code>bmc</code> configuration if using self-signed certificates. The following example demonstrates a Redfish configuration using the <code>disableCertificateVerification: True</code> configuration parameter within the <code>install-config.yaml</code> file.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight nowrap"><code data-lang="yaml"><span class="na">platform</span><span class="pi">:</span>
  <span class="na">baremetal</span><span class="pi">:</span>
    <span class="na">hosts</span><span class="pi">:</span>
      <span class="pi">-</span> <span class="na">name</span><span class="pi">:</span> <span class="s">openshift-master-0</span>
        <span class="na">role</span><span class="pi">:</span> <span class="s">master</span>
        <span class="na">bmc</span><span class="pi">:</span>
          <span class="na">address</span><span class="pi">:</span> <span class="s">redfish-virtualmedia://&lt;out-of-band-ip&gt;:&lt;sushy-tools-port&gt;/redfish/v1/Systems/&lt;system-id&gt;</span>
          <span class="na">username</span><span class="pi">:</span> <span class="s">&lt;user&gt;</span>
          <span class="na">password</span><span class="pi">:</span> <span class="s">&lt;password&gt;</span>
          <span class="na">disableCertificateVerification</span><span class="pi">:</span> <span class="s">True</span></code></pre>
</div>
</div>
<div class="paragraph">
<div class="title">Redfish network boot for KVM with sushy-tools Redfish emulator</div>
<p>To enable Redfish, use <code>redfish://</code> or <code>redfish+http://</code> to disable TLS. The installer requires the host name or the IP address, the Redfish emulator listening port and the path to the system ID. The following example demonstrates a Redfish configuration within the <code>install-config.yaml</code> file.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight nowrap"><code data-lang="yaml"><span class="na">platform</span><span class="pi">:</span>
  <span class="na">baremetal</span><span class="pi">:</span>
    <span class="na">hosts</span><span class="pi">:</span>
      <span class="pi">-</span> <span class="na">name</span><span class="pi">:</span> <span class="s">openshift-master-0</span>
        <span class="na">role</span><span class="pi">:</span> <span class="s">master</span>
        <span class="na">bmc</span><span class="pi">:</span>
          <span class="na">address</span><span class="pi">:</span> <span class="s">redfish://&lt;out-of-band-ip&gt;:&lt;sushy-tools-port&gt;/redfish/v1/Systems/&lt;system-id&gt;</span>
          <span class="na">username</span><span class="pi">:</span> <span class="s">&lt;user&gt;</span>
          <span class="na">password</span><span class="pi">:</span> <span class="s">&lt;password&gt;</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>While it is recommended to have a certificate of authority for the out-of-band management addresses, you must include <code>disableCertificateVerification: True</code> in the <code>bmc</code> configuration if using self-signed certificates. The following example demonstrates a Redfish configuration using the <code>disableCertificateVerification: True</code> configuration parameter within the <code>install-config.yaml</code> file.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight nowrap"><code data-lang="yaml"><span class="na">platform</span><span class="pi">:</span>
  <span class="na">baremetal</span><span class="pi">:</span>
    <span class="na">hosts</span><span class="pi">:</span>
      <span class="pi">-</span> <span class="na">name</span><span class="pi">:</span> <span class="s">openshift-master-0</span>
        <span class="na">role</span><span class="pi">:</span> <span class="s">master</span>
        <span class="na">bmc</span><span class="pi">:</span>
          <span class="na">address</span><span class="pi">:</span> <span class="s">redfish://&lt;out-of-band-ip&gt;:&lt;sushy-tools-port&gt;/redfish/v1/Systems/&lt;system-id&gt;</span>
          <span class="na">username</span><span class="pi">:</span> <span class="s">&lt;user&gt;</span>
          <span class="na">password</span><span class="pi">:</span> <span class="s">&lt;password&gt;</span>
          <span class="na">disableCertificateVerification</span><span class="pi">:</span> <span class="s">True</span></code></pre>
</div>
</div>
</div>
</div>
<div class="sect3">
<h4 id="root-device-hints_ipi-install-configuration-files"><a class="link" href="#root-device-hints_ipi-install-configuration-files">3.6.6. Root device hints</a></h4>
<div class="paragraph">
<p>The <code>rootDeviceHints</code> parameter enables the installer to provision the Red Hat Enterprise Linux CoreOS (RHCOS) image to a particular device. The installer examines the devices in the order it discovers them, and compares the discovered values with the hint values. The installer uses the first discovered device that matches the hint value. The configuration can combine multiple hints, but a device must match all hints for the installer to select it.</p>
</div>
<table class="tableblock frame-all grid-all stretch">
<caption class="title">Table 7. Subfields</caption>
<colgroup>
<col style="width: 50%;"/>
<col style="width: 50%;"/>
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Subfield</th>
<th class="tableblock halign-left valign-top">Description</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>deviceName</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">A string containing a Linux device name like <code>/dev/vda</code>. The hint must match the actual value exactly.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>hctl</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">A string containing a SCSI bus address like <code>0:0:0:0</code>. The hint must match the actual value exactly.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>model</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">A string containing a vendor-specific device identifier. The hint can be a substring of the actual value.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>vendor</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">A string containing the name of the vendor or manufacturer of the device. The hint can be a sub-string of the actual value.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>serialNumber</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">A string containing the device serial number. The hint must match the actual value exactly.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>minSizeGigabytes</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">An integer representing the minimum size of the device in gigabytes.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>wwn</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">A string containing the unique storage identifier. The hint must match the actual value exactly.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>wwnWithExtension</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">A string containing the unique storage identifier with the vendor extension appended. The hint must match the actual value exactly.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>wwnVendorExtension</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">A string containing the unique vendor storage identifier. The hint must match the actual value exactly.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>rotational</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">A Boolean indicating whether the device should be a rotating disk (true) or not (false).</p></td>
</tr>
</tbody>
</table>
<div class="listingblock">
<div class="title">Example usage</div>
<div class="content">
<pre class="rouge highlight nowrap"><code data-lang="yaml">     <span class="pi">-</span> <span class="na">name</span><span class="pi">:</span> <span class="s">master-0</span>
       <span class="na">role</span><span class="pi">:</span> <span class="s">master</span>
       <span class="na">bmc</span><span class="pi">:</span>
         <span class="na">address</span><span class="pi">:</span> <span class="s">ipmi://10.10.0.3:6203</span>
         <span class="na">username</span><span class="pi">:</span> <span class="s">admin</span>
         <span class="na">password</span><span class="pi">:</span> <span class="s">redhat</span>
       <span class="na">bootMACAddress</span><span class="pi">:</span> <span class="s">de:ad:be:ef:00:40</span>
       <span class="na">rootDeviceHints</span><span class="pi">:</span>
         <span class="na">deviceName</span><span class="pi">:</span> <span class="s2">"</span><span class="s">/dev/sda"</span></code></pre>
</div>
</div>
</div>
<div class="sect3">
<h4 id="creating-the-openshift-manifests_ipi-install-configuration-files"><a class="link" href="#creating-the-openshift-manifests_ipi-install-configuration-files">3.6.7. Creating the OpenShift Container Platform manifests</a></h4>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Create the OpenShift Container Platform manifests.</p>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight nowrap"><code data-lang="terminal"><span class="gp">[kni@provisioner ~]$</span><span class="w"> </span>./openshift-baremetal-install <span class="nt">--dir</span> ~/clusterconfigs create manifests</code></pre>
</div>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight nowrap"><code data-lang="terminal"><span class="go">INFO Consuming Install Config from target directory
WARNING Making control-plane schedulable by setting MastersSchedulable to true for Scheduler cluster settings
WARNING Discarding the Openshift Manifest that was provided in the target directory because its dependencies are dirty and it needs to be regenerated</span></code></pre>
</div>
</div>
</li>
</ol>
</div>
</div>
</div>
<div class="sect2">
<h3 id="ipi-install-creating-a-disconnected-registry_ipi-install-configuration-files"><a class="link" href="#ipi-install-creating-a-disconnected-registry_ipi-install-configuration-files">3.7. Creating a disconnected registry (optional)</a></h3>
<div class="paragraph">
<p>In some cases, you might want to install an OpenShift Container Platform cluster using a local copy of the installation registry. This could be for enhancing network efficiency because the cluster nodes are on a network that does not have access to the internet.</p>
</div>
<div class="paragraph">
<p>A local, or mirrored, copy of the registry requires the following:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>A certificate for the registry node. This can be a self-signed certificate.</p>
</li>
<li>
<p>A web server that a container on a system will serve.</p>
</li>
<li>
<p>An updated pull secret that contains the certificate and local repository information.</p>
</li>
</ul>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
<div class="paragraph">
<p>Creating a disconnected registry on a registry node is optional. The subsequent sections indicate that they are optional since they are steps you need to execute only when creating a disconnected registry on a registry node. You should execute all of the subsequent sub-sections labeled "(optional)" when creating a disconnected registry on a registry node.</p>
</div>
</td>
</tr>
</table>
</div>
<div class="sect3">
<h4 id="_preparing_the_registry_node_to_host_the_mirrored_registry_optional"><a class="link" href="#_preparing_the_registry_node_to_host_the_mirrored_registry_optional">3.7.1. Preparing the registry node to host the mirrored registry (optional)</a></h4>
<div class="paragraph">
<p>Make the following changes to the registry node.</p>
</div>
<div class="olist arabic">
<div class="title">Procedure</div>
<ol class="arabic">
<li>
<p>Open the firewall port on the registry node.</p>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight nowrap"><code data-lang="terminal"><span class="gp">[user@registry ~]$</span><span class="w"> </span><span class="nb">sudo </span>firewall-cmd <span class="nt">--add-port</span><span class="o">=</span>5000/tcp <span class="nt">--zone</span><span class="o">=</span>libvirt  <span class="nt">--permanent</span>
<span class="gp">[user@registry ~]$</span><span class="w"> </span><span class="nb">sudo </span>firewall-cmd <span class="nt">--add-port</span><span class="o">=</span>5000/tcp <span class="nt">--zone</span><span class="o">=</span>public   <span class="nt">--permanent</span>
<span class="gp">[user@registry ~]$</span><span class="w"> </span><span class="nb">sudo </span>firewall-cmd <span class="nt">--reload</span></code></pre>
</div>
</div>
</li>
<li>
<p>Install the required packages for the registry node.</p>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight nowrap"><code data-lang="terminal"><span class="gp">[user@registry ~]$</span><span class="w"> </span><span class="nb">sudo </span>yum <span class="nt">-y</span> <span class="nb">install </span>python3 podman httpd httpd-tools jq</code></pre>
</div>
</div>
</li>
<li>
<p>Create the directory structure where the repository information will be held.</p>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight nowrap"><code data-lang="terminal"><span class="gp">[user@registry ~]$</span><span class="w"> </span><span class="nb">sudo mkdir</span> <span class="nt">-p</span> /opt/registry/<span class="o">{</span>auth,certs,data<span class="o">}</span></code></pre>
</div>
</div>
</li>
</ol>
</div>
</div>
<div class="sect3">
<h4 id="_generating_the_self_signed_certificate_optional"><a class="link" href="#_generating_the_self_signed_certificate_optional">3.7.2. Generating the self-signed certificate (optional)</a></h4>
<div class="paragraph">
<p>Generate a self-signed certificate for the registry node and put it in the <code>/opt/registry/certs</code> directory.</p>
</div>
<div class="olist arabic">
<div class="title">Procedure</div>
<ol class="arabic">
<li>
<p>Adjust the certificate information as appropriate.</p>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight nowrap"><code data-lang="terminal"><span class="gp">[user@registry ~]$</span><span class="w"> </span><span class="nv">host_fqdn</span><span class="o">=</span><span class="si">$(</span> <span class="nb">hostname</span> <span class="nt">--long</span> <span class="si">)</span>
<span class="gp">[user@registry ~]$</span><span class="w"> </span><span class="nv">cert_c</span><span class="o">=</span><span class="s2">"&lt;Country Name&gt;"</span>   <span class="c"># Country Name (C, 2 letter code)</span>
<span class="gp">[user@registry ~]$</span><span class="w"> </span><span class="nv">cert_s</span><span class="o">=</span><span class="s2">"&lt;State&gt;"</span>          <span class="c"># Certificate State (S)</span>
<span class="gp">[user@registry ~]$</span><span class="w"> </span><span class="nv">cert_l</span><span class="o">=</span><span class="s2">"&lt;Locality&gt;"</span>       <span class="c"># Certificate Locality (L)</span>
<span class="gp">[user@registry ~]$</span><span class="w"> </span><span class="nv">cert_o</span><span class="o">=</span><span class="s2">"&lt;Organization&gt;"</span>   <span class="c"># Certificate Organization (O)</span>
<span class="gp">[user@registry ~]$</span><span class="w"> </span><span class="nv">cert_ou</span><span class="o">=</span><span class="s2">"&lt;Org Unit&gt;"</span>      <span class="c"># Certificate Organizational Unit (OU)</span>
<span class="gp">[user@registry ~]$</span><span class="w"> </span><span class="nv">cert_cn</span><span class="o">=</span><span class="s2">"</span><span class="k">${</span><span class="nv">host_fqdn</span><span class="k">}</span><span class="s2">"</span>    <span class="c"># Certificate Common Name (CN)</span>
<span class="go">
</span><span class="gp">[user@registry ~]$</span><span class="w"> </span>openssl req <span class="se">\</span>
<span class="go">    -newkey rsa:4096 \
    -nodes \
    -sha256 \
    -keyout /opt/registry/certs/domain.key \
    -x509 \
    -days 365 \
    -out /opt/registry/certs/domain.crt \
</span><span class="gp">    -addext "subjectAltName = DNS:$</span><span class="o">{</span>host_fqdn<span class="o">}</span><span class="s2">" </span><span class="se">\</span><span class="s2">
</span><span class="gp">    -subj "/C=$</span><span class="s2">{cert_c}/ST=</span><span class="k">${</span><span class="nv">cert_s</span><span class="k">}</span><span class="s2">/L=</span><span class="k">${</span><span class="nv">cert_l</span><span class="k">}</span><span class="s2">/O=</span><span class="k">${</span><span class="nv">cert_o</span><span class="k">}</span><span class="s2">/OU=</span><span class="k">${</span><span class="nv">cert_ou</span><span class="k">}</span><span class="s2">/CN=</span><span class="k">${</span><span class="nv">cert_cn</span><span class="k">}</span><span class="s2">"</span></code></pre>
</div>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
When replacing <code>&lt;Country Name&gt;</code>, ensure that it only contains two letters. For example, <code>US</code>.
</td>
</tr>
</table>
</div>
</li>
<li>
<p>Update the registry node&#8217;s <code>ca-trust</code> with the new certificate.</p>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight nowrap"><code data-lang="terminal"><span class="gp">[user@registry ~]$</span><span class="w"> </span><span class="nb">sudo cp</span> /opt/registry/certs/domain.crt /etc/pki/ca-trust/source/anchors/
<span class="gp">[user@registry ~]$</span><span class="w"> </span><span class="nb">sudo </span>update-ca-trust extract</code></pre>
</div>
</div>
</li>
</ol>
</div>
</div>
<div class="sect3">
<h4 id="_creating_the_registry_podman_container_optional"><a class="link" href="#_creating_the_registry_podman_container_optional">3.7.3. Creating the registry podman container (optional)</a></h4>
<div class="paragraph">
<p>The registry container uses the <code>/opt/registry</code> directory for certificates, authentication files, and to store its data files.</p>
</div>
<div class="paragraph">
<p>The registry container uses <code>httpd</code> and needs an <code>htpasswd</code> file for authentication.</p>
</div>
<div class="olist arabic">
<div class="title">Procedure</div>
<ol class="arabic">
<li>
<p>Create an <code>htpasswd</code> file in <code>/opt/registry/auth</code> for the container to use.</p>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight nowrap"><code data-lang="terminal"><span class="gp">[user@registry ~]$</span><span class="w"> </span>htpasswd <span class="nt">-bBc</span> /opt/registry/auth/htpasswd &lt;user&gt; &lt;passwd&gt;</code></pre>
</div>
</div>
<div class="paragraph">
<p>Replace <code>&lt;user&gt;</code> with the user name and <code>&lt;passwd&gt;</code> with the password.</p>
</div>
</li>
<li>
<p>Create and start the registry container.</p>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight nowrap"><code data-lang="terminal"><span class="gp">[user@registry ~]$</span><span class="w"> </span>podman create <span class="se">\</span>
<span class="go">  --name ocpdiscon-registry \
  -p 5000:5000 \
  -e "REGISTRY_AUTH=htpasswd" \
  -e "REGISTRY_AUTH_HTPASSWD_REALM=Registry" \
  -e "REGISTRY_HTTP_SECRET=ALongRandomSecretForRegistry" \
  -e "REGISTRY_AUTH_HTPASSWD_PATH=/auth/htpasswd" \
  -e "REGISTRY_HTTP_TLS_CERTIFICATE=/certs/domain.crt" \
  -e "REGISTRY_HTTP_TLS_KEY=/certs/domain.key" \
  -e "REGISTRY_COMPATIBILITY_SCHEMA1_ENABLED=true" \
  -v /opt/registry/data:/var/lib/registry:z \
  -v /opt/registry/auth:/auth:z \
  -v /opt/registry/certs:/certs:z \
  docker.io/library/registry:2</span></code></pre>
</div>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight nowrap"><code data-lang="terminal"><span class="gp">[user@registry ~]$</span><span class="w"> </span>podman start ocpdiscon-registry</code></pre>
</div>
</div>
</li>
</ol>
</div>
</div>
<div class="sect3">
<h4 id="_copy_and_update_the_pull_secret_optional"><a class="link" href="#_copy_and_update_the_pull_secret_optional">3.7.4. Copy and update the pull-secret (optional)</a></h4>
<div class="paragraph">
<p>Copy the pull secret file from the provisioner node to the registry node and modify it to include the authentication information for the new registry node.</p>
</div>
<div class="olist arabic">
<div class="title">Procedure</div>
<ol class="arabic">
<li>
<p>Copy the <code>pull-secret.txt</code> file.</p>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight nowrap"><code data-lang="terminal"><span class="gp">[user@registry ~]$</span><span class="w"> </span>scp kni@provisioner:/home/kni/pull-secret.txt pull-secret.txt</code></pre>
</div>
</div>
</li>
<li>
<p>Update the <code>host_fqdn</code> environment variable with the fully qualified domain name of the registry node.</p>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight nowrap"><code data-lang="terminal"><span class="gp">[user@registry ~]$</span><span class="w"> </span><span class="nv">host_fqdn</span><span class="o">=</span><span class="si">$(</span> <span class="nb">hostname</span> <span class="nt">--long</span> <span class="si">)</span></code></pre>
</div>
</div>
</li>
<li>
<p>Update the <code>b64auth</code> environment variable with the base64 encoding of the <code>http</code> credentials used to create the <code>htpasswd</code> file.</p>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight nowrap"><code data-lang="terminal"><span class="gp">[user@registry ~]$</span><span class="w"> </span><span class="nv">b64auth</span><span class="o">=</span><span class="si">$(</span> <span class="nb">echo</span> <span class="nt">-n</span> <span class="s1">'&lt;username&gt;:&lt;passwd&gt;'</span> | openssl <span class="nb">base64</span> <span class="si">)</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>Replace <code>&lt;username&gt;</code> with the user name and <code>&lt;passwd&gt;</code> with the password.</p>
</div>
</li>
<li>
<p>Set the <code>AUTHSTRING</code> environment variable to use the <code>base64</code> authorization string. The <code>$USER</code> variable is an environment variable containing the name of the current user.</p>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight nowrap"><code data-lang="terminal"><span class="gp">[user@registry ~]$</span><span class="w"> </span><span class="nv">AUTHSTRING</span><span class="o">=</span><span class="s2">"{</span><span class="se">\"</span><span class="nv">$host_fqdn</span><span class="s2">:5000</span><span class="se">\"</span><span class="s2">: {</span><span class="se">\"</span><span class="s2">auth</span><span class="se">\"</span><span class="s2">: </span><span class="se">\"</span><span class="nv">$b64auth</span><span class="se">\"</span><span class="s2">,</span><span class="se">\"</span><span class="s2">email</span><span class="se">\"</span><span class="s2">: </span><span class="se">\"</span><span class="nv">$USER</span><span class="s2">@redhat.com</span><span class="se">\"</span><span class="s2">}}"</span></code></pre>
</div>
</div>
</li>
<li>
<p>Update the <code>pull-secret.txt</code> file.</p>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight nowrap"><code data-lang="terminal"><span class="gp">[user@registry ~]$</span><span class="w"> </span>jq <span class="s2">".auths += </span><span class="nv">$AUTHSTRING</span><span class="s2">"</span> &lt; pull-secret.txt <span class="o">&gt;</span> pull-secret-update.txt</code></pre>
</div>
</div>
</li>
</ol>
</div>
</div>
<div class="sect3">
<h4 id="_mirroring_the_repository_optional"><a class="link" href="#_mirroring_the_repository_optional">3.7.5. Mirroring the repository (optional)</a></h4>
<div class="olist arabic">
<div class="title">Procedure</div>
<ol class="arabic">
<li>
<p>Copy the <code>oc</code> binary from the provisioner node to the registry node.</p>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight nowrap"><code data-lang="terminal"><span class="gp">[user@registry ~]$</span><span class="w"> </span><span class="nb">sudo </span>scp kni@provisioner:/usr/local/bin/oc /usr/local/bin</code></pre>
</div>
</div>
</li>
<li>
<p>Get the release image and mirror the remote install images to the local repository.</p>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight nowrap"><code data-lang="terminal">[user@registry ~]$ export VERSION=latest-4.6
[user@registry ~]$ UPSTREAM_REPO=$(curl -s https://mirror.openshift.com/pub/openshift-v4/x86_64/clients/ocp/$VERSION/release.txt | awk  '/Pull From/ {print $3}')
[user@registry ~]$ /usr/local/bin/oc adm release mirror \
  -a pull-secret-update.txt
  --from=$UPSTREAM_REPO \
  --to-release-image=$LOCAL_REG/$LOCAL_REPO:${VERSION} \
  --to=$LOCAL_REG/$LOCAL_REPO</code></pre>
</div>
</div>
</li>
</ol>
</div>
</div>
<div class="sect3">
<h4 id="_modify_the_install_config_yaml_file_to_use_the_disconnected_registry_optional"><a class="link" href="#_modify_the_install_config_yaml_file_to_use_the_disconnected_registry_optional">3.7.6. Modify the <code>install-config.yaml</code> file to use the disconnected registry (optional)</a></h4>
<div class="paragraph">
<p>On the provisioner node, the <code>install-config.yaml</code> file should use the newly created pull-secret from the <code>pull-secret-update.txt</code> file. The <code>install-config.yaml</code> file must also contain the disconnected registry node&#8217;s certificate and registry information.</p>
</div>
<div class="olist arabic">
<div class="title">Procedure</div>
<ol class="arabic">
<li>
<p>Add the disconnected registry node&#8217;s certificate to the <code>install-config.yaml</code> file. The certificate should follow the <code>"additionalTrustBundle: |"</code> line and be properly indented, usually by two spaces.</p>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight nowrap"><code data-lang="terminal"><span class="gp">$</span><span class="w"> </span><span class="nb">echo</span> <span class="s2">"additionalTrustBundle: |"</span> <span class="o">&gt;&gt;</span> install-config.yaml
<span class="gp">$</span><span class="w"> </span><span class="nb">sed</span> <span class="nt">-e</span> <span class="s1">'s/^/  /'</span> /opt/registry/certs/domain.crt <span class="o">&gt;&gt;</span> install-config.yaml</code></pre>
</div>
</div>
</li>
<li>
<p>Add the mirror information for the registry to the <code>install-config.yaml</code> file.</p>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight nowrap"><code data-lang="terminal"><span class="gp">$</span><span class="w"> </span><span class="nb">cat</span> <span class="o">&lt;&lt;</span><span class="no">EOF</span><span class="sh"> &gt;&gt; install-config.yaml
</span><span class="gp">&lt;image-config&gt;</span><span class="sh">: <i class="conum" data-value="1"></i><b>(1)</b>
</span><span class="go">- mirrors:
  - registry.example.com:5000/ocp4/openshift4
  source: quay.io/openshift-release-dev/ocp-v4.0-art-dev
- mirrors:
  - registry.example.com:5000/ocp4/openshift4
  source: registry.svc.ci.openshift.org/ocp/release
- mirrors:
  - registry.example.com:5000/ocp4/openshift4
  source: quay.io/openshift-release-dev/ocp-release
EOF</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>Where:</p>
</div>
<div class="colist arabic">
<table>
<tr>
<td><i class="conum" data-value="1"></i><b>1</b></td>
<td>You must replace <code>&lt;image-config&gt;</code> with <code>imageContentSources</code> for OpenShift 4.13 and below, or <code>imageDigestSources</code> for Openshift 4.14 and above.
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
Replace <code>registry.example.com</code> with the registry&#8217;s fully qualified domain name.
</td>
</tr>
</table>
</div></td>
</tr>
</table>
</div>
</li>
</ol>
</div>
</div>
</div>
<div class="sect2">
<h3 id="deploying-routers-on-worker-nodes_ipi-install-configuration-files"><a class="link" href="#deploying-routers-on-worker-nodes_ipi-install-configuration-files">3.8. Deploying routers on worker nodes</a></h3>
<div class="paragraph">
<p>During installation, the installer deploys router pods on worker nodes. By default, the installer installs two router pods. If the initial cluster has only one worker node, or if a deployed cluster requires additional routers to handle external traffic loads destined for services within the OpenShift Container Platform cluster, you can create a <code>yaml</code> file to set an appropriate number of router replicas.</p>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
<div class="paragraph">
<p>By default, the installer deploys two routers.
If the cluster has at least two worker nodes, you can skip this section.
For more information on the Ingress Operator see: <a href="https://docs.openshift.com/container-platform/4.6/networking/ingress-operator.html">Ingress Operator in OpenShift Container Platform</a>.</p>
</div>
</td>
</tr>
</table>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
<div class="paragraph">
<p>If the cluster has no worker nodes, the installer deploys the two routers on the control plane nodes by default. If the cluster has no worker nodes, you can skip this section.</p>
</div>
</td>
</tr>
</table>
</div>
<div class="olist arabic">
<div class="title">Procedure</div>
<ol class="arabic">
<li>
<p>Create a <code>router-replicas.yaml</code> file.</p>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight nowrap"><code data-lang="yaml"><span class="na">apiVersion</span><span class="pi">:</span> <span class="s">operator.openshift.io/v1</span>
<span class="na">kind</span><span class="pi">:</span> <span class="s">IngressController</span>
<span class="na">metadata</span><span class="pi">:</span>
  <span class="na">name</span><span class="pi">:</span> <span class="s">default</span>
  <span class="na">namespace</span><span class="pi">:</span> <span class="s">openshift-ingress-operator</span>
<span class="na">spec</span><span class="pi">:</span>
  <span class="na">replicas</span><span class="pi">:</span> <span class="s">&lt;num-of-router-pods&gt;</span>
  <span class="na">endpointPublishingStrategy</span><span class="pi">:</span>
    <span class="na">type</span><span class="pi">:</span> <span class="s">HostNetwork</span>
  <span class="na">nodePlacement</span><span class="pi">:</span>
    <span class="na">nodeSelector</span><span class="pi">:</span>
      <span class="na">matchLabels</span><span class="pi">:</span>
        <span class="na">node-role.kubernetes.io/worker</span><span class="pi">:</span> <span class="s2">"</span><span class="s">"</span></code></pre>
</div>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
<div class="paragraph">
<p>Replace <code>&lt;num-of-router-pods&gt;</code> with an appropriate value. If working with just one worker node, set <code>replicas:</code> to <code>1</code>. If working with more than 3 worker nodes, you can increase <code>replicas:</code> from the default value <code>2</code> as appropriate.</p>
</div>
</td>
</tr>
</table>
</div>
</li>
<li>
<p>Save and copy the <code>router-replicas.yaml</code> file to the <code>clusterconfigs/openshift</code> directory.</p>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight nowrap"><code data-lang="terminal"><span class="go">cp ~/router-replicas.yaml clusterconfigs/openshift/99_router-replicas.yaml</span></code></pre>
</div>
</div>
</li>
</ol>
</div>
</div>
<div class="sect2">
<h3 id="validation-checklist-for-installation_ipi-install-configuration-files"><a class="link" href="#validation-checklist-for-installation_ipi-install-configuration-files">3.9. Validation checklist for installation</a></h3>
<div class="ulist checklist">
<ul class="checklist">
<li>
<p><i class="fa fa-square-o"></i> OpenShift Container Platform installer has been retrieved.</p>
</li>
<li>
<p><i class="fa fa-square-o"></i> OpenShift Container Platform installer has been extracted.</p>
</li>
<li>
<p><i class="fa fa-square-o"></i> Required parameters for the <code>install-config.yaml</code> have been configured.</p>
</li>
<li>
<p><i class="fa fa-square-o"></i> The <code>hosts</code> parameter for the <code>install-config.yaml</code> has been configured.</p>
</li>
<li>
<p><i class="fa fa-square-o"></i> The <code>bmc</code> parameter for the <code>install-config.yaml</code> has been configured.</p>
</li>
<li>
<p><i class="fa fa-square-o"></i> Conventions for the values configured in the <code>bmc</code> <code>address</code> field have been applied.</p>
</li>
<li>
<p><i class="fa fa-square-o"></i> Created a disconnected registry (optional).</p>
</li>
<li>
<p><i class="fa fa-square-o"></i> Validate disconnected registry settings if in use. (optional)</p>
</li>
<li>
<p><i class="fa fa-square-o"></i> Deployed routers on worker nodes. (optional)</p>
</li>
</ul>
</div>
</div>
<div class="sect2">
<h3 id="deploying-the-cluster-via-the-openshift-installer_ipi-install-configuration-files"><a class="link" href="#deploying-the-cluster-via-the-openshift-installer_ipi-install-configuration-files">3.10. Deploying the cluster via the OpenShift Container Platform installer</a></h3>
<div class="paragraph">
<p>Run the OpenShift Container Platform installer:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight nowrap"><code data-lang="terminal"><span class="gp">[kni@provisioner ~]$</span><span class="w"> </span>./openshift-baremetal-install <span class="nt">--dir</span> ~/clusterconfigs <span class="nt">--log-level</span> debug create cluster</code></pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="ipi-install-troubleshooting-following-the-installation_ipi-install-configuration-files"><a class="link" href="#ipi-install-troubleshooting-following-the-installation_ipi-install-configuration-files">3.11. Following the installation</a></h3>
<div class="paragraph">
<p>During the deployment process, you can check the installation&#8217;s overall status by issuing the <code>tail</code> command to the <code>.openshift_install.log</code> log file in the install directory folder.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight nowrap"><code data-lang="terminal"><span class="gp">[kni@provisioner ~]$</span><span class="w"> </span><span class="nb">tail</span> <span class="nt">-f</span> /path/to/install-dir/.openshift_install.log</code></pre>
</div>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="ipi-install-upstream-day2"><a class="link" href="#ipi-install-upstream-day2">4. Day 2 operations</a></h2>
<div class="sectionbody">
<div class="paragraph">
<p>The following sections are optional, but may be of interest after the initial deployment has been completed.</p>
</div>
<div class="sect2">
<h3 id="accessing-the-web-console_ipi-install-configuration-files"><a class="link" href="#accessing-the-web-console_ipi-install-configuration-files">4.1. Accessing the web console</a></h3>
<div class="paragraph">
<p>The web console runs as a pod on the master. The static assets required to run
the web console are served by the pod. Once OpenShift Container Platform is successfully
installed, find the URL for the web console and login credentials for your
installed cluster in the CLI output of the installation program. For example:</p>
</div>
<div class="listingblock">
<div class="title">Example output</div>
<div class="content">
<pre class="rouge highlight nowrap"><code data-lang="terminal"><span class="go">INFO Install complete!
</span><span class="gp">INFO Run 'export KUBECONFIG=&lt;your working directory&gt;</span>/auth/kubeconfig<span class="s1">' to manage the cluster with '</span>oc<span class="s1">', the OpenShift CLI.
</span><span class="gp">INFO The cluster is ready when 'oc login -u kubeadmin -p &lt;provided&gt;</span><span class="s1">'</span> succeeds <span class="o">(</span><span class="nb">wait </span>a few minutes<span class="o">)</span><span class="nb">.</span>
<span class="go">INFO Access the OpenShift web-console here: https://console-openshift-console.apps.demo1.openshift4-beta-abcorp.com
</span><span class="gp">INFO Login to the console with user: kubeadmin, password: &lt;provided&gt;</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>Use those details to log in and access the web console.</p>
</div>
<div class="paragraph">
<p>Additionally, you can execute:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight nowrap"><code data-lang="terminal"><span class="go">oc whoami --show-console</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>To obtain the url for the console.</p>
</div>
</div>
<div class="sect2">
<h3 id="backing-up-the-cluster-configuration_ipi-install-configuration-files"><a class="link" href="#backing-up-the-cluster-configuration_ipi-install-configuration-files">4.2. Backing up the cluster configuration</a></h3>
<div class="paragraph">
<p>At this point you have a working OpenShift 4 cluster on baremetal.
In order to take advantage of the baremetal hardware that was the provision node,
you can repurpose the provisioning node as a worker.
Prior to reprovisioning the node, it is recommended to backup some existing files.</p>
</div>
<div class="olist arabic">
<div class="title">Procedure</div>
<ol class="arabic">
<li>
<p>Tar the <code>clusterconfig</code> folder and download it to your local machine.</p>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight nowrap"><code data-lang="bash"><span class="nb">tar </span>cvfz clusterconfig.tar.gz ~/clusterconfig</code></pre>
</div>
</div>
</li>
<li>
<p>Copy the Private part for the SSH Key configured on the <code>install-config.yaml</code> file to your local machine.</p>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight nowrap"><code data-lang="bash"><span class="nb">tar </span>cvfz clusterconfigsh.tar.gz ~/.ssh/id_rsa<span class="k">*</span></code></pre>
</div>
</div>
</li>
<li>
<p>Copy the <code>install-config.yaml</code> and <code>metal3-config.yaml</code> files.</p>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight nowrap"><code data-lang="bash"><span class="nb">tar </span>cvfz yamlconfigs.tar.gz install-config.yaml metal3-config.yaml</code></pre>
</div>
</div>
</li>
</ol>
</div>
</div>
<div class="sect2">
<h3 id="ipi-install-expanding-the-cluster"><a class="link" href="#ipi-install-expanding-the-cluster">4.3. Expanding the cluster</a></h3>
<div class="paragraph">
<p>After deploying an installer-provisioned OpenShift Container Platform cluster, you can use the following procedures to expand the number of worker nodes. Ensure that each prospective worker node meets the prerequisites.</p>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
<div class="paragraph">
<p>Expanding the cluster using RedFish Virtual Media involves meeting minimum firmware requirements. See <strong>Firmware requirements for installing with virtual media</strong> in the <strong>Prerequisites</strong> section for additional details when expanding the cluster using RedFish Virtual Media.</p>
</div>
</td>
</tr>
</table>
</div>
<div class="sect3">
<h4 id="preparing-the-bare-metal-node_ipi-install-expanding"><a class="link" href="#preparing-the-bare-metal-node_ipi-install-expanding">4.3.1. Preparing the bare metal node</a></h4>
<div class="paragraph">
<p>Expanding the cluster requires a DHCP server. Each node must have a DHCP reservation.</p>
</div>
<div class="paragraph">
<p>Preparing the bare metal node requires executing the following procedure from the provisioner node.</p>
</div>
<div class="olist arabic">
<div class="title">Procedure</div>
<ol class="arabic">
<li>
<p>Get the <code>oc</code> binary, if needed. It should already exist on the provisioner node.</p>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight nowrap"><code data-lang="bash">[kni@provisioner ~]$ export VERSION=latest-4.6
[kni@provisioner ~]$ curl -s https://mirror.openshift.com/pub/openshift-v4/clients/ocp/$VERSION/openshift-client-linux-$VERSION.tar.gz | tar zxvf - oc</code></pre>
</div>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight nowrap"><code data-lang="bash"><span class="o">[</span>kni@provisioner ~]<span class="nv">$ </span><span class="nb">sudo cp </span>oc /usr/local/bin</code></pre>
</div>
</div>
</li>
<li>
<p>Power off the bare metal node via the baseboard management controller and ensure it is off.</p>
</li>
<li>
<p>Retrieve the user name and password of the bare metal node&#8217;s baseboard management controller. Then, create <code>base64</code> strings from the user name and password. In the following example, the user name is <code>root</code> and the password is <code>calvin</code>.</p>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight nowrap"><code data-lang="bash"><span class="o">[</span>kni@provisioner ~]<span class="nv">$ </span><span class="nb">echo</span> <span class="nt">-ne</span> <span class="s2">"root"</span> | <span class="nb">base64</span></code></pre>
</div>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight nowrap"><code data-lang="bash"><span class="o">[</span>kni@provisioner ~]<span class="nv">$ </span><span class="nb">echo</span> <span class="nt">-ne</span> <span class="s2">"calvin"</span> | <span class="nb">base64</span></code></pre>
</div>
</div>
</li>
<li>
<p>Create a configuration file for the bare metal node.</p>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight nowrap"><code data-lang="bash"><span class="o">[</span>kni@provisioner ~]<span class="nv">$ </span>vim bmh.yaml</code></pre>
</div>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight nowrap"><code data-lang="yaml"><span class="nn">---</span>
<span class="na">apiVersion</span><span class="pi">:</span> <span class="s">v1</span>
<span class="na">kind</span><span class="pi">:</span> <span class="s">Secret</span>
<span class="na">metadata</span><span class="pi">:</span>
  <span class="na">name</span><span class="pi">:</span> <span class="s">openshift-worker-&lt;num&gt;-bmc-secret</span>
<span class="na">type</span><span class="pi">:</span> <span class="s">Opaque</span>
<span class="na">data</span><span class="pi">:</span>
  <span class="na">username</span><span class="pi">:</span> <span class="s">&lt;base64-of-uid&gt;</span>
  <span class="na">password</span><span class="pi">:</span> <span class="s">&lt;base64-of-pwd&gt;</span>
<span class="nn">---</span>
<span class="na">apiVersion</span><span class="pi">:</span> <span class="s">metal3.io/v1alpha1</span>
<span class="na">kind</span><span class="pi">:</span> <span class="s">BareMetalHost</span>
<span class="na">metadata</span><span class="pi">:</span>
  <span class="na">name</span><span class="pi">:</span> <span class="s">openshift-worker-&lt;num&gt;</span>
<span class="na">spec</span><span class="pi">:</span>
  <span class="na">online</span><span class="pi">:</span> <span class="kc">true</span>
  <span class="na">bootMACAddress</span><span class="pi">:</span> <span class="s">&lt;NIC1-mac-address&gt;</span>
  <span class="na">bmc</span><span class="pi">:</span>
    <span class="na">address</span><span class="pi">:</span> <span class="s">&lt;protocol&gt;://&lt;bmc-ip&gt;</span>
    <span class="na">credentialsName</span><span class="pi">:</span> <span class="s">openshift-worker-&lt;num&gt;-bmc-secret</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>Replace <code>&lt;num&gt;</code> for the worker number of the bare metal node in the two <code>name</code> fields and the <code>credentialsName</code> field. Replace <code>&lt;base64-of-uid&gt;</code> with the <code>base64</code> string of the user name. Replace <code>&lt;base64-of-pwd&gt;</code> with the <code>base64</code> string of the password. Replace <code>&lt;NIC1-mac-address&gt;</code> with the MAC address of the bare metal node&#8217;s first NIC.</p>
</div>
<div class="paragraph">
<p>Refer to the BMC addressing section for additional BMC configuration options. Replace <code>&lt;protocol&gt;</code> with the BMC protocol, such as IPMI, RedFish, or others.
Replace <code>&lt;bmc-ip&gt;</code> with the IP address of the bare metal node&#8217;s baseboard management controller.</p>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
<div class="paragraph">
<p>If the MAC address of an existing bare metal node matches the MAC address of a bare metal host that you are attempting to provision, then the Ironic installation will fail. If the host enrollment, inspection, cleaning, or other Ironic steps fail, the <code>metal3-baremetal-operator</code> will continuously retry. See <a href="#ipi-install-diagnosing-duplicate-mac-address_ipi-install-expanding">Diagnosing a host duplicate MAC address</a> for more information.</p>
</div>
</td>
</tr>
</table>
</div>
</li>
<li>
<p>Create the bare metal node.</p>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight nowrap"><code data-lang="bash"><span class="o">[</span>kni@provisioner ~]<span class="nv">$ </span>oc <span class="nt">-n</span> openshift-machine-api create <span class="nt">-f</span> bmh.yaml</code></pre>
</div>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight nowrap"><code data-lang="bash">secret/openshift-worker-&lt;num&gt;-bmc-secret created
baremetalhost.metal3.io/openshift-worker-&lt;num&gt; created</code></pre>
</div>
</div>
<div class="paragraph">
<p>Where <code>&lt;num&gt;</code> will be the worker number.</p>
</div>
</li>
<li>
<p>Power up and inspect the bare metal node.</p>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight nowrap"><code data-lang="bash"><span class="o">[</span>kni@provisioner ~]<span class="nv">$ </span>oc <span class="nt">-n</span> openshift-machine-api get bmh openshift-worker-&lt;num&gt;</code></pre>
</div>
</div>
<div class="paragraph">
<p>Where <code>&lt;num&gt;</code> is the worker node number.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight nowrap"><code data-lang="bash">NAME                 STATUS   PROVISIONING STATUS   CONSUMER   BMC                 HARDWARE PROFILE   ONLINE   ERROR
openshift-worker-&lt;num&gt;   OK       ready                            ipmi://&lt;out-of-band-ip&gt;   unknown            <span class="nb">true</span></code></pre>
</div>
</div>
</li>
</ol>
</div>
</div>
<div class="sect3">
<h4 id="preparing-to-deploy-with-virtual-media-on-the-baremetal-network_ipi-install-expanding"><a class="link" href="#preparing-to-deploy-with-virtual-media-on-the-baremetal-network_ipi-install-expanding">4.3.2. Preparing to deploy with Virtual Media on the baremetal network</a></h4>
<div class="paragraph">
<p>If the <code>provisioning</code> network is enabled, and you want to expand the cluster using Virtual Media on the <code>baremetal</code> network, execute the following procedure.</p>
</div>
<div class="olist arabic">
<div class="title">Procedure</div>
<ol class="arabic">
<li>
<p>Edit the provisioning configuration resource (CR) to enable deploying with Virtual Media on the <code>baremetal</code> network.</p>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight nowrap"><code data-lang="terminmal">oc edit provisioning</code></pre>
</div>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight nowrap"><code data-lang="yaml">  <span class="na">apiVersion</span><span class="pi">:</span> <span class="s">metal3.io/v1alpha1</span>
  <span class="na">kind</span><span class="pi">:</span> <span class="s">Provisioning</span>
  <span class="na">metadata</span><span class="pi">:</span>
    <span class="na">creationTimestamp</span><span class="pi">:</span> <span class="s2">"</span><span class="s">2021-08-05T18:51:50Z"</span>
    <span class="na">finalizers</span><span class="pi">:</span>
    <span class="pi">-</span> <span class="s">provisioning.metal3.io</span>
    <span class="na">generation</span><span class="pi">:</span> <span class="m">8</span>
    <span class="na">name</span><span class="pi">:</span> <span class="s">provisioning-configuration</span>
    <span class="na">resourceVersion</span><span class="pi">:</span> <span class="s2">"</span><span class="s">551591"</span>
    <span class="na">uid</span><span class="pi">:</span> <span class="s">f76e956f-24c6-4361-aa5b-feaf72c5b526</span>
  <span class="na">spec</span><span class="pi">:</span>
    <span class="na">preProvisioningOSDownloadURLs</span><span class="pi">:</span> <span class="pi">{}</span>
    <span class="na">provisioningDHCPRange</span><span class="pi">:</span> <span class="s">172.22.0.10,172.22.0.254</span>
    <span class="na">provisioningIP</span><span class="pi">:</span> <span class="s">172.22.0.3</span>
    <span class="na">provisioningInterface</span><span class="pi">:</span> <span class="s">enp1s0</span>
    <span class="na">provisioningNetwork</span><span class="pi">:</span> <span class="s">Managed</span>
    <span class="na">provisioningNetworkCIDR</span><span class="pi">:</span> <span class="s">172.22.0.0/24</span>
    <span class="na">provisioningOSDownloadURL</span><span class="pi">:</span> <span class="s">http://192.168.111.1/images/rhcos-49.84.202107010027-0-openstack.x86_64.qcow2.gz?sha256=c7dde5f96826c33c97b5a4ad34110212281916128ae11100956f400db3d5299e</span>
    <span class="na">virtualMediaViaExternalNetwork</span><span class="pi">:</span> <span class="kc">true</span> <i class="conum" data-value="1"></i><b>(1)</b>
  <span class="na">status</span><span class="pi">:</span>
    <span class="na">generations</span><span class="pi">:</span>
    <span class="pi">-</span> <span class="na">group</span><span class="pi">:</span> <span class="s">apps</span>
      <span class="na">hash</span><span class="pi">:</span> <span class="s2">"</span><span class="s">"</span>
      <span class="na">lastGeneration</span><span class="pi">:</span> <span class="m">7</span>
      <span class="na">name</span><span class="pi">:</span> <span class="s">metal3</span>
      <span class="na">namespace</span><span class="pi">:</span> <span class="s">openshift-machine-api</span>
      <span class="na">resource</span><span class="pi">:</span> <span class="s">deployments</span>
    <span class="pi">-</span> <span class="na">group</span><span class="pi">:</span> <span class="s">apps</span>
      <span class="na">hash</span><span class="pi">:</span> <span class="s2">"</span><span class="s">"</span>
      <span class="na">lastGeneration</span><span class="pi">:</span> <span class="m">1</span>
      <span class="na">name</span><span class="pi">:</span> <span class="s">metal3-image-cache</span>
      <span class="na">namespace</span><span class="pi">:</span> <span class="s">openshift-machine-api</span>
      <span class="na">resource</span><span class="pi">:</span> <span class="s">daemonsets</span>
    <span class="na">observedGeneration</span><span class="pi">:</span> <span class="m">8</span>
    <span class="na">readyReplicas</span><span class="pi">:</span> <span class="s">0</span></code></pre>
</div>
</div>
<div class="colist arabic">
<table>
<tr>
<td><i class="conum" data-value="1"></i><b>1</b></td>
<td>Add <code>virtualMediaViaExternalNetwork: true</code> to the provisioning CR.</td>
</tr>
</table>
</div>
</li>
<li>
<p>Edit the machine set to use the API VIP address.</p>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight nowrap"><code data-lang="terminal"><span class="go">oc edit machineset</span></code></pre>
</div>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight nowrap"><code data-lang="yaml">  <span class="na">apiVersion</span><span class="pi">:</span> <span class="s">machine.openshift.io/v1beta1</span>
  <span class="na">kind</span><span class="pi">:</span> <span class="s">MachineSet</span>
  <span class="na">metadata</span><span class="pi">:</span>
    <span class="na">creationTimestamp</span><span class="pi">:</span> <span class="s2">"</span><span class="s">2021-08-05T18:51:52Z"</span>
    <span class="na">generation</span><span class="pi">:</span> <span class="m">11</span>
    <span class="na">labels</span><span class="pi">:</span>
      <span class="na">machine.openshift.io/cluster-api-cluster</span><span class="pi">:</span> <span class="s">ostest-hwmdt</span>
      <span class="na">machine.openshift.io/cluster-api-machine-role</span><span class="pi">:</span> <span class="s">worker</span>
      <span class="na">machine.openshift.io/cluster-api-machine-type</span><span class="pi">:</span> <span class="s">worker</span>
    <span class="na">name</span><span class="pi">:</span> <span class="s">ostest-hwmdt-worker-0</span>
    <span class="na">namespace</span><span class="pi">:</span> <span class="s">openshift-machine-api</span>
    <span class="na">resourceVersion</span><span class="pi">:</span> <span class="s2">"</span><span class="s">551513"</span>
    <span class="na">uid</span><span class="pi">:</span> <span class="s">fad1c6e0-b9da-4d4a-8d73-286f78788931</span>
  <span class="na">spec</span><span class="pi">:</span>
    <span class="na">replicas</span><span class="pi">:</span> <span class="m">2</span>
    <span class="na">selector</span><span class="pi">:</span>
      <span class="na">matchLabels</span><span class="pi">:</span>
        <span class="na">machine.openshift.io/cluster-api-cluster</span><span class="pi">:</span> <span class="s">ostest-hwmdt</span>
        <span class="na">machine.openshift.io/cluster-api-machineset</span><span class="pi">:</span> <span class="s">ostest-hwmdt-worker-0</span>
    <span class="na">template</span><span class="pi">:</span>
      <span class="na">metadata</span><span class="pi">:</span>
        <span class="na">labels</span><span class="pi">:</span>
          <span class="na">machine.openshift.io/cluster-api-cluster</span><span class="pi">:</span> <span class="s">ostest-hwmdt</span>
          <span class="na">machine.openshift.io/cluster-api-machine-role</span><span class="pi">:</span> <span class="s">worker</span>
          <span class="na">machine.openshift.io/cluster-api-machine-type</span><span class="pi">:</span> <span class="s">worker</span>
          <span class="na">machine.openshift.io/cluster-api-machineset</span><span class="pi">:</span> <span class="s">ostest-hwmdt-worker-0</span>
      <span class="na">spec</span><span class="pi">:</span>
        <span class="na">metadata</span><span class="pi">:</span> <span class="pi">{}</span>
        <span class="na">providerSpec</span><span class="pi">:</span>
          <span class="na">value</span><span class="pi">:</span>
            <span class="na">apiVersion</span><span class="pi">:</span> <span class="s">baremetal.cluster.k8s.io/v1alpha1</span>
            <span class="na">hostSelector</span><span class="pi">:</span> <span class="pi">{}</span>
            <span class="na">image</span><span class="pi">:</span>
              <span class="na">checksum</span><span class="pi">:</span> <span class="s">http:/172.22.0.3:6181/images/rhcos-49.84.202107010027-0-openstack.x86_64.qcow2/cached-rhcos-49.84.202107010027-0-openstack.x86_64.qcow2.md5sum</span> <i class="conum" data-value="1"></i><b>(1)</b>
              <span class="na">url</span><span class="pi">:</span> <span class="s">http://172.22.0.3:6181/images/rhcos-49.84.202107010027-0-openstack.x86_64.qcow2/cached-rhcos-49.84.202107010027-0-openstack.x86_64.qcow2</span> <i class="conum" data-value="2"></i><b>(2)</b>
            <span class="na">kind</span><span class="pi">:</span> <span class="s">BareMetalMachineProviderSpec</span>
            <span class="na">metadata</span><span class="pi">:</span>
              <span class="na">creationTimestamp</span><span class="pi">:</span> <span class="kc">null</span>
            <span class="na">userData</span><span class="pi">:</span>
              <span class="na">name</span><span class="pi">:</span> <span class="s">worker-user-data</span>
  <span class="na">status</span><span class="pi">:</span>
    <span class="na">availableReplicas</span><span class="pi">:</span> <span class="m">2</span>
    <span class="na">fullyLabeledReplicas</span><span class="pi">:</span> <span class="m">2</span>
    <span class="na">observedGeneration</span><span class="pi">:</span> <span class="m">11</span>
    <span class="na">readyReplicas</span><span class="pi">:</span> <span class="m">2</span>
    <span class="na">replicas</span><span class="pi">:</span> <span class="s">2</span></code></pre>
</div>
</div>
<div class="colist arabic">
<table>
<tr>
<td><i class="conum" data-value="1"></i><b>1</b></td>
<td>Edit the <code>checksum</code> URL to use the API VIP address.</td>
</tr>
<tr>
<td><i class="conum" data-value="2"></i><b>2</b></td>
<td>Edit the <code>url</code> URL to use the API VIP address.</td>
</tr>
</table>
</div>
</li>
</ol>
</div>
<div class="sect4">
<h5 id="ipi-install-diagnosing-duplicate-mac-address_ipi-install-expanding"><a class="link" href="#ipi-install-diagnosing-duplicate-mac-address_ipi-install-expanding">Diagnosing a duplicate MAC address when provisioning a new host in the cluster</a></h5>
<div class="paragraph">
<p>If the MAC address of an existing bare-metal node in the cluster matches the MAC address of a bare-metal host you are attempting to add to the cluster, the Bare Metal Operator associates the host with the existing node. If the host enrollment, inspection, cleaning, or other Ironic steps fail, the Bare Metal Operator retries the installation continuously. A registration error is displayed for the failed bare-metal host.</p>
</div>
<div class="paragraph">
<p>You can diagnose a duplicate MAC address by examining the bare-metal hosts that are running in the <code>openshift-machine-api</code> namespace.</p>
</div>
<div class="ulist">
<div class="title">Prerequisites</div>
<ul>
<li>
<p>Install an OpenShift Container Platform cluster on bare metal.</p>
</li>
<li>
<p>Install the OpenShift Container Platform CLI <code>oc</code>.</p>
</li>
<li>
<p>Log in as a user with <code>cluster-admin</code> privileges.</p>
</li>
</ul>
</div>
<div class="paragraph">
<div class="title">Procedure</div>
<p>To determine whether a bare-metal host that fails provisioning has the same MAC address as an existing node, do the following:</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Get the bare-metal hosts running in the <code>openshift-machine-api</code> namespace:</p>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight nowrap"><code data-lang="terminal"><span class="gp">$</span><span class="w"> </span>oc get bmh <span class="nt">-n</span> openshift-machine-api</code></pre>
</div>
</div>
<div class="listingblock">
<div class="title">Example output</div>
<div class="content">
<pre class="rouge highlight nowrap"><code data-lang="terminal"><span class="go">NAME                 STATUS   PROVISIONING STATUS      CONSUMER
openshift-master-0   OK       externally provisioned   openshift-zpwpq-master-0
openshift-master-1   OK       externally provisioned   openshift-zpwpq-master-1
openshift-master-2   OK       externally provisioned   openshift-zpwpq-master-2
openshift-worker-0   OK       provisioned              openshift-zpwpq-worker-0-lv84n
openshift-worker-1   OK       provisioned              openshift-zpwpq-worker-0-zd8lm
openshift-worker-2   error    registering</span></code></pre>
</div>
</div>
</li>
<li>
<p>To see more detailed information about the status of the failing host, run the following command replacing <code>&lt;bare_metal_host_name&gt;</code> with the name of the host:</p>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight nowrap"><code data-lang="terminal"><span class="gp">$</span><span class="w"> </span>oc get <span class="nt">-n</span> openshift-machine-api bmh &lt;bare_metal_host_name&gt; <span class="nt">-o</span> yaml</code></pre>
</div>
</div>
<div class="listingblock">
<div class="title">Example output</div>
<div class="content">
<pre class="rouge highlight nowrap"><code data-lang="yaml"><span class="nn">...</span>
<span class="na">status</span><span class="pi">:</span>
  <span class="na">errorCount</span><span class="pi">:</span> <span class="m">12</span>
  <span class="na">errorMessage</span><span class="pi">:</span> <span class="s">MAC address b4:96:91:1d:7c:20 conflicts with existing node openshift-worker-1</span>
  <span class="na">errorType</span><span class="pi">:</span> <span class="s">registration error</span>
<span class="nn">...</span></code></pre>
</div>
</div>
</li>
</ol>
</div>
</div>
</div>
<div class="sect3">
<h4 id="provisioning-the-bare-metal-node_ipi-install-expanding"><a class="link" href="#provisioning-the-bare-metal-node_ipi-install-expanding">4.3.3. Provisioning the bare metal node</a></h4>
<div class="paragraph">
<p>Provisioning the bare metal node requires executing the following procedure from the provisioner node.</p>
</div>
<div class="olist arabic">
<div class="title">Procedure</div>
<ol class="arabic">
<li>
<p>Ensure the <code>PROVISIONING STATUS</code> is <code>ready</code> before provisioning the bare metal node.</p>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight nowrap"><code data-lang="bash"><span class="o">[</span>kni@provisioner ~]<span class="nv">$ </span> oc <span class="nt">-n</span> openshift-machine-api get bmh openshift-worker-&lt;num&gt;</code></pre>
</div>
</div>
<div class="paragraph">
<p>Where <code>&lt;num&gt;</code> is the worker node number.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight nowrap"><code data-lang="bash">NAME                 STATUS   PROVISIONING STATUS   CONSUMER   BMC                 HARDWARE PROFILE   ONLINE   ERROR
openshift-worker-&lt;num&gt;   OK       ready                            ipmi://&lt;out-of-band-ip&gt;   unknown            <span class="nb">true</span></code></pre>
</div>
</div>
</li>
<li>
<p>Get a count of the number of worker nodes.</p>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight nowrap"><code data-lang="bash"><span class="o">[</span>kni@provisioner ~]<span class="nv">$ </span>oc get nodes</code></pre>
</div>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight nowrap"><code data-lang="bash">NAME                                                STATUS   ROLES           AGE     VERSION
provisioner.openshift.example.com            Ready    master          30h     v1.16.2
openshift-master-1.openshift.example.com            Ready    master          30h     v1.16.2
openshift-master-2.openshift.example.com            Ready    master          30h     v1.16.2
openshift-master-3.openshift.example.com            Ready    master          30h     v1.16.2
openshift-worker-0.openshift.example.com            Ready    master          30h     v1.16.2
openshift-worker-1.openshift.example.com            Ready    master          30h     v1.16.2</code></pre>
</div>
</div>
</li>
<li>
<p>Get the machine set.</p>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight nowrap"><code data-lang="bash"><span class="o">[</span>kni@provisioner ~]<span class="nv">$ </span>oc get machinesets <span class="nt">-n</span> openshift-machine-api</code></pre>
</div>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight nowrap"><code data-lang="bash">NAME                                DESIRED   CURRENT   READY   AVAILABLE   AGE
...
openshift-worker-0.example.com      1         1         1       1           55m
openshift-worker-1.example.com      1         1         1       1           55m</code></pre>
</div>
</div>
</li>
<li>
<p>Increase the number of worker nodes by one.</p>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight nowrap"><code data-lang="bash"><span class="o">[</span>kni@provisioner ~]<span class="nv">$ </span>oc scale <span class="nt">--replicas</span><span class="o">=</span>&lt;num&gt; machineset &lt;machineset&gt; <span class="nt">-n</span> openshift-machine-api</code></pre>
</div>
</div>
<div class="paragraph">
<p>Replace <code>&lt;num&gt;</code> with the new number of worker nodes. Replace <code>&lt;machineset&gt;</code> with the name of the machine set from the previous step.</p>
</div>
</li>
<li>
<p>Check the status of the bare metal node.</p>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight nowrap"><code data-lang="bash"><span class="o">[</span>kni@provisioner ~]<span class="nv">$ </span>oc <span class="nt">-n</span> openshift-machine-api get bmh openshift-worker-&lt;num&gt;</code></pre>
</div>
</div>
<div class="paragraph">
<p>Where <code>&lt;num&gt;</code> is the worker node number. The status changes from <code>ready</code> to <code>provisioning</code>.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight nowrap"><code data-lang="bash">NAME                 STATUS   PROVISIONING STATUS   CONSUMER                  BMC                 HARDWARE PROFILE   ONLINE   ERROR
openshift-worker-&lt;num&gt;   OK       provisioning          openshift-worker-&lt;num&gt;-65tjz   ipmi://&lt;out-of-band-ip&gt;   unknown            <span class="nb">true</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>The <code>provisioning</code> status remains until the OpenShift Container Platform cluster provisions the node. This can take 30 minutes or more. Once complete, the status will change to <code>provisioned</code>.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight nowrap"><code data-lang="bash">NAME                 STATUS   PROVISIONING STATUS   CONSUMER                  BMC                 HARDWARE PROFILE   ONLINE   ERROR
openshift-worker-&lt;num&gt;   OK       provisioned           openshift-worker-&lt;num&gt;-65tjz   ipmi://&lt;out-of-band-ip&gt;   unknown            <span class="nb">true</span></code></pre>
</div>
</div>
</li>
<li>
<p>Once provisioned, ensure the bare metal node is ready.</p>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight nowrap"><code data-lang="bash"><span class="o">[</span>kni@provisioner ~]<span class="nv">$ </span>oc get nodes</code></pre>
</div>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight nowrap"><code data-lang="bash">NAME                                          STATUS   ROLES   AGE     VERSION
provisioner.openshift.example.com             Ready    master  30h     v1.16.2
openshift-master-1.openshift.example.com      Ready    master  30h     v1.16.2
openshift-master-2.openshift.example.com      Ready    master  30h     v1.16.2
openshift-master-3.openshift.example.com      Ready    master  30h     v1.16.2
openshift-worker-0.openshift.example.com      Ready    master  30h     v1.16.2
openshift-worker-1.openshift.example.com      Ready    master  30h     v1.16.2
openshift-worker-&lt;num&gt;.openshift.example.com  Ready    worker  3m27s   v1.16.2</code></pre>
</div>
</div>
<div class="paragraph">
<p>You can also check the kubelet.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight nowrap"><code data-lang="bash"><span class="o">[</span>kni@provisioner ~]<span class="nv">$ </span>ssh openshift-worker-&lt;num&gt;</code></pre>
</div>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight nowrap"><code data-lang="bash"><span class="o">[</span>kni@openshift-worker-&lt;num&gt;]<span class="nv">$ </span>journalctl <span class="nt">-fu</span> kubelet</code></pre>
</div>
</div>
</li>
</ol>
</div>
</div>
<div class="sect3">
<h4 id="preparing-the-provisioner-node-to-be-deployed-as-a-worker-node_ipi-install-expanding"><a class="link" href="#preparing-the-provisioner-node-to-be-deployed-as-a-worker-node_ipi-install-expanding">4.3.4. Preparing the provisioner node to be deployed as a worker node</a></h4>
<div class="paragraph">
<div class="title">Procedure</div>
<p>Perform the following steps prior to converting the provisioner node to a worker node.</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p><code>ssh</code> to a system (for example, a laptop) that can access the out of band management network of the current provisioner node.</p>
</li>
<li>
<p>Copy the backups <code>clusterconfig.tar.gz</code>, <code>clusterconfigsh.tar.gz</code>, and <code>amlconfigs.tar.gz</code> to the new system.</p>
</li>
<li>
<p>Copy the <code>oc</code> binary from the existing provisioning node to the new system.</p>
</li>
<li>
<p>Make a note of the mac addresses, the baremetal network IP used for the provisioner node, and the IP address of
the Out of band Management Network.</p>
</li>
<li>
<p>Reboot the system and ensure that PXE is enabled on the provisioning network and PXE is disabled for all other NICs.</p>
</li>
<li>
<p>If installation was performed using a Satellite server, remove the Host entry for the existing provisioning node.</p>
</li>
<li>
<p>Install the <code>ipmitool</code> on the new system in order to power off the provisioner node.</p>
</li>
</ol>
</div>
</div>
<div class="sect3">
<h4 id="adding-a-worker-node-to-an-existing-cluster_ipi-install-expanding"><a class="link" href="#adding-a-worker-node-to-an-existing-cluster_ipi-install-expanding">4.3.5. Adding a worker node to an existing cluster</a></h4>
<div class="olist arabic">
<div class="title">Procedure</div>
<ol class="arabic">
<li>
<p>Retrieve the username and password of the bare metal node&#8217;s baseboard management controller. Then, create <code>base64</code> strings from the username and password. In the following example, the username is <code>root</code> and the password is <code>calvin</code>.</p>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight nowrap"><code data-lang="bash"><span class="o">[</span>kni@provisioner ~]<span class="nv">$ </span><span class="nb">echo</span> <span class="nt">-ne</span> <span class="s2">"root"</span> | <span class="nb">base64</span></code></pre>
</div>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight nowrap"><code data-lang="bash"><span class="o">[</span>kni@provisioner ~]<span class="nv">$ </span><span class="nb">echo</span> <span class="nt">-ne</span> <span class="s2">"calvin"</span> | <span class="nb">base64</span></code></pre>
</div>
</div>
</li>
<li>
<p>Create a configuration file for the bare metal node.</p>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight nowrap"><code data-lang="bash"><span class="o">[</span>kni@provisioner ~]<span class="nv">$ </span>vim bmh.yaml</code></pre>
</div>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight nowrap"><code data-lang="yaml"><span class="nn">---</span>
<span class="na">apiVersion</span><span class="pi">:</span> <span class="s">v1</span>
<span class="na">kind</span><span class="pi">:</span> <span class="s">Secret</span>
<span class="na">metadata</span><span class="pi">:</span>
  <span class="na">name</span><span class="pi">:</span> <span class="s">openshift-worker-&lt;num&gt;-bmc-secret</span>
<span class="na">type</span><span class="pi">:</span> <span class="s">Opaque</span>
<span class="na">data</span><span class="pi">:</span>
  <span class="na">username</span><span class="pi">:</span> <span class="s">&lt;base64-of-uid&gt;</span>
  <span class="na">password</span><span class="pi">:</span> <span class="s">&lt;base64-of-pwd&gt;</span>
<span class="nn">---</span>
<span class="na">apiVersion</span><span class="pi">:</span> <span class="s">metal3.io/v1alpha1</span>
<span class="na">kind</span><span class="pi">:</span> <span class="s">BareMetalHost</span>
<span class="na">metadata</span><span class="pi">:</span>
  <span class="na">name</span><span class="pi">:</span> <span class="s">openshift-worker-&lt;num&gt;</span>
<span class="na">spec</span><span class="pi">:</span>
  <span class="na">online</span><span class="pi">:</span> <span class="kc">true</span>
  <span class="na">bootMACAddress</span><span class="pi">:</span> <span class="s">&lt;NIC1-mac-address&gt;</span>
  <span class="na">bmc</span><span class="pi">:</span>
    <span class="na">address</span><span class="pi">:</span> <span class="s">ipmi://&lt;bmc-ip&gt;</span>
    <span class="na">credentialsName</span><span class="pi">:</span> <span class="s">openshift-worker-&lt;num&gt;-bmc-secret</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>Replace <code>&lt;num&gt;</code> for the worker number of bare metal node in two <code>name</code> fields and <code>credentialsName</code> field. Replace <code>&lt;base64-of-uid&gt;</code> with the <code>base64</code> string of the username. Replace <code>&lt;base64-of-pwd&gt;</code> with the <code>base64</code> string of the password. Replace <code>&lt;NIC1-mac-address&gt;</code> with the MAC address of the bare metal node&#8217;s first NIC. Replace <code>&lt;bmc-ip&gt;</code> with the IP address of the bare metal node&#8217;s baseboard management controller.</p>
</div>
</li>
</ol>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
<div class="paragraph">
<p>When using <code>redfish</code> or <code>redfish-virtualmedia</code>, add the
appropriate addressing as described in the BMC addressing section. See <a href="#bmc-addressing_ipi-install-expanding">BMC addressing</a> for details.</p>
</div>
</td>
</tr>
</table>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Create the bare metal node.</p>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight nowrap"><code data-lang="bash"><span class="o">[</span>kni@provisioner ~]<span class="nv">$ </span>oc <span class="nt">-n</span> openshift-machine-api create <span class="nt">-f</span> bmh.yaml</code></pre>
</div>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight nowrap"><code data-lang="bash">secret/openshift-worker-&lt;num&gt;-bmc-secret created
baremetalhost.metal3.io/openshift-worker-&lt;num&gt; created</code></pre>
</div>
</div>
<div class="paragraph">
<p>Where <code>&lt;num&gt;</code> will be the worker number.</p>
</div>
</li>
<li>
<p>Power up and inspect the bare metal node.</p>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight nowrap"><code data-lang="bash"><span class="o">[</span>kni@provisioner ~]<span class="nv">$ </span>oc <span class="nt">-n</span> openshift-machine-api get bmh openshift-worker-&lt;num&gt;</code></pre>
</div>
</div>
<div class="paragraph">
<p>Where <code>&lt;num&gt;</code> is the worker node number.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight nowrap"><code data-lang="bash">NAME                 STATUS   PROVISIONING STATUS   CONSUMER   BMC                 HARDWARE PROFILE   ONLINE   ERROR
openshift-worker-&lt;num&gt;   OK       ready                            ipmi://&lt;out-of-band-ip&gt;   unknown            <span class="nb">true</span></code></pre>
</div>
</div>
</li>
<li>
<p>Ensure the <code>PROVISIONING STATUS</code> is <code>ready</code> before provisioning the bare metal node.</p>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight nowrap"><code data-lang="bash"><span class="o">[</span>kni@provisioner ~]<span class="nv">$ </span> oc <span class="nt">-n</span> openshift-machine-api get bmh openshift-worker-&lt;num&gt;</code></pre>
</div>
</div>
<div class="paragraph">
<p>Where <code>&lt;num&gt;</code> is the worker node number.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight nowrap"><code data-lang="bash">NAME                 STATUS   PROVISIONING STATUS   CONSUMER   BMC                 HARDWARE PROFILE   ONLINE   ERROR
openshift-worker-&lt;num&gt;   OK       ready                            ipmi://&lt;out-of-band-ip&gt;   unknown            <span class="nb">true</span></code></pre>
</div>
</div>
</li>
<li>
<p>Get a count of the number of worker nodes.</p>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight nowrap"><code data-lang="bash"><span class="o">[</span>kni@provisioner ~]<span class="nv">$ </span>oc get nodes</code></pre>
</div>
</div>
</li>
<li>
<p>Get the machine set.</p>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight nowrap"><code data-lang="bash"><span class="o">[</span>kni@provisioner ~]<span class="nv">$ </span>oc get machinesets <span class="nt">-n</span> openshift-machine-api</code></pre>
</div>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight nowrap"><code data-lang="bash">NAME                                DESIRED   CURRENT   READY   AVAILABLE   AGE
openshift-worker-0.example.com      1         1         1       1           55m
openshift-worker-1.example.com      1         1         1       1           55m
openshift-worker-2.example.com      1         1         1       1           55m</code></pre>
</div>
</div>
</li>
<li>
<p>Increase the number of worker nodes by 1.</p>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight nowrap"><code data-lang="bash"><span class="o">[</span>kni@provisioner ~]<span class="nv">$ </span>oc scale <span class="nt">--replicas</span><span class="o">=</span>&lt;num&gt; machineset &lt;machineset&gt; <span class="nt">-n</span> openshift-machine-api</code></pre>
</div>
</div>
<div class="paragraph">
<p>Replace <code>&lt;num&gt;</code> with the new number of worker nodes. Replace <code>&lt;machineset&gt;</code> with the name of the machine set from the previous step.</p>
</div>
</li>
<li>
<p>Check the status of the bare metal node.</p>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight nowrap"><code data-lang="bash"><span class="o">[</span>kni@provisioner ~]<span class="nv">$ </span>oc <span class="nt">-n</span> openshift-machine-api get bmh openshift-worker-&lt;num&gt;</code></pre>
</div>
</div>
<div class="paragraph">
<p>Where <code>&lt;num&gt;</code> is the worker node number. The status changes from <code>ready</code> to <code>provisioning</code>.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight nowrap"><code data-lang="bash">NAME                 STATUS   PROVISIONING STATUS   CONSUMER                  BMC                 HARDWARE PROFILE   ONLINE   ERROR
openshift-worker-&lt;num&gt;   OK       provisioning          openshift-worker-&lt;num&gt;-65tjz   ipmi://&lt;out-of-band-ip&gt;   unknown            <span class="nb">true</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>The <code>provisioning</code> status remains until the OpenShift Container Platform cluster provisions the node. This may take 30 minutes or more. Once complete, the status will change to <code>provisioned</code>.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight nowrap"><code data-lang="bash">NAME                 STATUS   PROVISIONING STATUS   CONSUMER                  BMC                 HARDWARE PROFILE   ONLINE   ERROR
openshift-worker-&lt;num&gt;   OK       provisioned           openshift-worker-&lt;num&gt;-65tjz   ipmi://&lt;out-of-band-ip&gt;   unknown            <span class="nb">true</span></code></pre>
</div>
</div>
</li>
<li>
<p>Once provisioned, ensure the bare metal node is ready.</p>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight nowrap"><code data-lang="bash"><span class="o">[</span>kni@provisioner ~]<span class="nv">$ </span>oc get nodes</code></pre>
</div>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight nowrap"><code data-lang="bash">NAME                                                STATUS   ROLES           AGE     VERSION
provisioner.openshift.example.com            Ready    master          30h     v1.16.2
openshift-master-1.openshift.example.com            Ready    master          30h     v1.16.2
openshift-master-2.openshift.example.com            Ready    master          30h     v1.16.2
openshift-worker-&lt;num&gt;.openshift.example.com        Ready    worker          3m27s   v1.16.2</code></pre>
</div>
</div>
<div class="paragraph">
<p>You can also check the kubelet.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight nowrap"><code data-lang="bash"><span class="o">[</span>kni@provisioner ~]<span class="nv">$ </span>ssh openshift-worker-&lt;num&gt;</code></pre>
</div>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight nowrap"><code data-lang="bash"><span class="o">[</span>kni@openshift-worker-&lt;num&gt;]<span class="nv">$ </span>journalctl <span class="nt">-fu</span> kubelet</code></pre>
</div>
</div>
</li>
</ol>
</div>
<div class="sect4">
<h5 id="ipi-install-upstream-dns-records-for-the-worker"><a class="link" href="#ipi-install-upstream-dns-records-for-the-worker">Appending DNS records</a></h5>
<div class="sect5">
<h6 id="appending-dns-records-for-the worker-2-old-provisioner-on-a-DNS-server-option1_ipi-install-expanding"><a class="link" href="#appending-dns-records-for-the worker-2-old-provisioner-on-a-DNS-server-option1_ipi-install-expanding">Configuring Bind (Option 1)</a></h6>
<div class="olist arabic">
<div class="title">Procedure</div>
<ol class="arabic">
<li>
<p>Login to the DNS server using <code>ssh</code>.</p>
</li>
<li>
<p>Suspend updates to all dynamic zones: <code>rndc freeze</code>.</p>
</li>
<li>
<p>Edit <code>/var/named/dynamic/example.com</code>.</p>
<div class="listingblock">
<div class="content">
<pre class="nowrap">$ORIGIN openshift.example.com.
&lt;OUTPUT_OMITTED&gt;
openshift-worker-1      A       &lt;ip-of-worker-1&gt;
openshift-worker-2      A       &lt;ip-of-worker-2&gt;</pre>
</div>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
<div class="paragraph">
<p>Remove the provisioner as it is replaced by openshift-worker-2.</p>
</div>
</td>
</tr>
</table>
</div>
</li>
<li>
<p>Increase the SERIAL value by <code>1</code>.</p>
</li>
<li>
<p>Edit <code>/var/named/dynamic/1.0.10.in-addr.arpa</code>.</p>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
<div class="paragraph">
<p>The filename <code>1.0.10.in-addr.arpa</code> is the reverse of the public CIDR example <code>10.0.1.0/24</code>.</p>
</div>
</td>
</tr>
</table>
</div>
</li>
<li>
<p>Increase the SERIAL value by <code>1</code>.</p>
</li>
<li>
<p>Enable updates to all dynamic zones and reload them: <code>rndc thaw</code>.</p>
</li>
</ol>
</div>
</div>
<div class="sect5">
<h6 id="appending-dns-records-for-the worker-2-old-provisioner-using-dnsmasq-option2_ipi-install-expanding"><a class="link" href="#appending-dns-records-for-the worker-2-old-provisioner-using-dnsmasq-option2_ipi-install-expanding">Configuring dnsmasq (Option 2)</a></h6>
<div class="paragraph">
<div class="title">Procedure</div>
<p>Append the following DNS record to the <code>/etc/hosts</code> file on the server hosting the <code>dnsmasq</code> service.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="nowrap">&lt;OUTPUT_OMITTED&gt;
&lt;NIC2-IP&gt; openshift-worker-1.openshift.example.com openshift-worker-1
&lt;NIC2-IP&gt; openshift-worker-2.openshift.example.com openshift-worker-2</pre>
</div>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
<div class="paragraph">
<p>Remove the <code>provisioner.openshift.example.com</code> entry as it is replaced by worker-2</p>
</div>
</td>
</tr>
</table>
</div>
</div>
</div>
<div class="sect4">
<h5 id="ipi-install-upstream-dhco-for-the-worker"><a class="link" href="#ipi-install-upstream-dhco-for-the-worker">Appending DHCP reservations</a></h5>
<div class="sect5">
<h6 id="creating-dhcp-reservations-for-the worker-2-old-provisioner-on-a-DHCP-server-option1_ipi-install-expanding"><a class="link" href="#creating-dhcp-reservations-for-the worker-2-old-provisioner-on-a-DHCP-server-option1_ipi-install-expanding">Configuring dhcpd (Option 1)</a></h6>
<div class="olist arabic">
<div class="title">Procedure</div>
<ol class="arabic">
<li>
<p>Login to the DHCP server using <code>ssh</code>.</p>
</li>
<li>
<p>Edit <code>/etc/dhcp/dhcpd.hosts</code>.</p>
<div class="listingblock">
<div class="content">
<pre class="nowrap">host openshift-worker-2 {
     option host-name "worker-2";
     hardware ethernet &lt;NIC2-mac-address&gt;;
     option domain-search "openshift.example.com";
     fixed-address &lt;ip-address-of-NIC2&gt;;
  }</pre>
</div>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
<div class="paragraph">
<p>Remove the provisioner as it is replaced by openshift-worker-2.</p>
</div>
</td>
</tr>
</table>
</div>
</li>
<li>
<p>Restart the <code>dhcpd</code> service.</p>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight nowrap"><code data-lang="bash">systemctl restart dhcpd</code></pre>
</div>
</div>
</li>
</ol>
</div>
</div>
<div class="sect5">
<h6 id="creating-dhcp-reservations-for-the worker-2-old-provisioner-using-dnsmasq-option2_ipi-install-expanding"><a class="link" href="#creating-dhcp-reservations-for-the worker-2-old-provisioner-using-dnsmasq-option2_ipi-install-expanding">Configuring dnsmasq (Option 2)</a></h6>
<div class="olist arabic">
<div class="title">Procedure</div>
<ol class="arabic">
<li>
<p>Append the following DHCP reservation to the <code>/etc/dnsmasq.d/example.dns</code> file on the server hosting the <code>dnsmasq</code> service.</p>
<div class="listingblock">
<div class="content">
<pre class="nowrap">&lt;OUTPUT_OMITTED&gt;
dhcp-host=&lt;NIC2-mac-address&gt;,openshift-worker-1.openshift.example.com,&lt;ip-of-worker-1&gt;
dhcp-host=&lt;NIC2-mac-address&gt;,openshift-worker-2.openshift.example.com,&lt;ip-of-worker-2&gt;</pre>
</div>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
<div class="paragraph">
<p>Remove the <code>provisioner.openshift.example.com</code> entry as it is replaced by worker-2</p>
</div>
</td>
</tr>
</table>
</div>
</li>
<li>
<p>Restart the <code>dnsmasq</code> service.</p>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight nowrap"><code data-lang="bash">systemctl restart dnsmasq</code></pre>
</div>
</div>
</li>
</ol>
</div>
</div>
</div>
<div class="sect4">
<h5 id="deploying-the-provisioner-node-as-a-worker-node-using-metal3_ipi-install-expanding"><a class="link" href="#deploying-the-provisioner-node-as-a-worker-node-using-metal3_ipi-install-expanding">Deploying the provisioner node as a worker node using Metal3</a></h5>
<div class="paragraph">
<p>After you have completed the prerequisites, perform the deployment process.</p>
</div>
<div class="olist arabic">
<div class="title">Procedure</div>
<ol class="arabic">
<li>
<p>Power off the node using <code>ipmitool</code> and confirm the provisioning node is powered off.</p>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight nowrap"><code data-lang="bash">ssh &lt;server-with-access-to-management-net&gt;
<span class="c"># Use the user, password and Management net IP adddress to shutdown the system</span>
ipmitool <span class="nt">-I</span> lanplus <span class="nt">-U</span> &lt;user&gt; <span class="nt">-P</span> &lt;password&gt; <span class="nt">-H</span> &lt;management-server-ip&gt; power off
<span class="c"># Confirm the server is powered down</span>
ipmitool <span class="nt">-I</span> lanplus <span class="nt">-U</span> &lt;user&gt; <span class="nt">-P</span> &lt;password&gt; <span class="nt">-H</span> &lt;management-server-ip&gt; power status
Chassis Power is off</code></pre>
</div>
</div>
</li>
<li>
<p>Get <code>base64</code> strings for the Out of band Management credentials. In this example, the user is <code>root</code> and the password is <code>calvin</code>.</p>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight nowrap"><code data-lang="bash"><span class="c"># Use echo -ne, otherwise you will get your secrets with \n which will cause issues</span>
<span class="c"># Get root username in base64</span>
<span class="nb">echo</span> <span class="nt">-ne</span> <span class="s2">"root"</span> | <span class="nb">base64</span>
<span class="c"># Get root password in base64</span>
<span class="nb">echo</span> <span class="nt">-ne</span> <span class="s2">"calvin"</span> | <span class="nb">base64</span></code></pre>
</div>
</div>
</li>
<li>
<p>Configure the BaremetalHost <code>bmh.yaml</code> file.</p>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight nowrap"><code data-lang="yaml"><span class="nn">---</span>
<span class="na">apiVersion</span><span class="pi">:</span> <span class="s">v1</span>
<span class="na">kind</span><span class="pi">:</span> <span class="s">Secret</span>
<span class="na">metadata</span><span class="pi">:</span>
  <span class="na">name</span><span class="pi">:</span> <span class="s">openshift-worker-2-bmc-secret</span>
<span class="na">type</span><span class="pi">:</span> <span class="s">Opaque</span>
<span class="na">data</span><span class="pi">:</span>
  <span class="na">username</span><span class="pi">:</span> <span class="s">ca2vdAo=</span>
  <span class="na">password</span><span class="pi">:</span> <span class="s">MWAwTWdtdC0K</span>
<span class="nn">---</span>
<span class="na">apiVersion</span><span class="pi">:</span> <span class="s">metal3.io/v1alpha1</span>
<span class="na">kind</span><span class="pi">:</span> <span class="s">BareMetalHost</span>
<span class="na">metadata</span><span class="pi">:</span>
  <span class="na">name</span><span class="pi">:</span> <span class="s">openshift-worker-2</span>
<span class="na">spec</span><span class="pi">:</span>
  <span class="na">online</span><span class="pi">:</span> <span class="kc">true</span>
  <span class="na">bootMACAddress</span><span class="pi">:</span> <span class="s">&lt;NIC1-mac-address&gt;</span>
  <span class="na">bmc</span><span class="pi">:</span>
    <span class="na">address</span><span class="pi">:</span> <span class="s">ipmi://&lt;out-of-band-ip&gt;</span>
    <span class="na">credentialsName</span><span class="pi">:</span> <span class="s">openshift-worker-2-bmc-secret</span></code></pre>
</div>
</div>
</li>
<li>
<p>Create the BaremetalHost.</p>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight nowrap"><code data-lang="bash">./oc <span class="nt">-n</span> openshift-machine-api create <span class="nt">-f</span> bmh.yaml
secret/openshift-worker-2-bmc-secret created
baremetalhost.metal3.io/openshift-worker-2 created</code></pre>
</div>
</div>
</li>
<li>
<p>Power up and inspect the node.</p>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight nowrap"><code data-lang="bash">./oc <span class="nt">-n</span> openshift-machine-api get bmh openshift-worker-2

NAME                 STATUS   PROVISIONING STATUS   CONSUMER   BMC                 HARDWARE PROFILE   ONLINE   ERROR
openshift-worker-2   OK       inspecting                       ipmi://&lt;out-of-band-ip&gt;                      <span class="nb">true</span></code></pre>
</div>
</div>
</li>
<li>
<p>After finishing the inspection, the node is ready to be provisioned.</p>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight nowrap"><code data-lang="bash">./oc <span class="nt">-n</span> openshift-machine-api get bmh openshift-worker-2

NAME                 STATUS   PROVISIONING STATUS   CONSUMER   BMC                 HARDWARE PROFILE   ONLINE   ERROR
openshift-worker-2   OK       ready                            ipmi://&lt;out-of-band-ip&gt;   unknown            <span class="nb">true</span></code></pre>
</div>
</div>
</li>
<li>
<p>Scale the workers machineset. Previously, there were two replicas during original installation.</p>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight nowrap"><code data-lang="bash">./oc get machineset <span class="nt">-n</span> openshift-machine-api
NAME            DESIRED   CURRENT   READY   AVAILABLE   AGE
openshift-worker-2   0         0                             21h

./oc <span class="nt">-n</span> openshift-machine-api scale machineset openshift-worker-2 <span class="nt">--replicas</span><span class="o">=</span>3</code></pre>
</div>
</div>
</li>
<li>
<p>The baremetal host moves to provisioning status. This can take as long as 30 minutes. You can follow the status
from the node console.</p>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight nowrap"><code data-lang="bash">oc <span class="nt">-n</span> openshift-machine-api get bmh openshift-worker-2

NAME                 STATUS   PROVISIONING STATUS   CONSUMER                  BMC                 HARDWARE PROFILE   ONLINE   ERROR
openshift-worker-2   OK       provisioning          openshift-worker-0-65tjz   ipmi://&lt;out-of-band-ip&gt;   unknown            <span class="nb">true</span></code></pre>
</div>
</div>
</li>
<li>
<p>When the node is provisioned it moves to provisioned status.</p>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight nowrap"><code data-lang="bash">oc <span class="nt">-n</span> openshift-machine-api get bmh openshift-worker-2

NAME                 STATUS   PROVISIONING STATUS   CONSUMER                  BMC                 HARDWARE PROFILE   ONLINE   ERROR
openshift-worker-2   OK       provisioned           openshift-worker-2-65tjz   ipmi://&lt;out-of-band-ip&gt;   unknown            <span class="nb">true</span></code></pre>
</div>
</div>
</li>
<li>
<p>When the <code>kubelet</code> finishes initialization the node is ready for use.
You can connect to the node and run <code>journalctl -fu kubelet</code> to check the process.</p>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight nowrap"><code data-lang="bash">oc get node
NAME                                            STATUS   ROLES           AGE     VERSION
openshift-master-0.openshift.example.com        Ready    master          30h     v1.16.2
openshift-master-1.openshift.example.com        Ready    master          30h     v1.16.2
openshift-master-2.openshift.example.com        Ready    master          30h     v1.16.2
openshift-worker-0.openshift.example.com        Ready    worker          3m27s   v1.16.2
openshift-worker-1.openshift.example.com        Ready    worker          3m27s   v1.16.2
openshift-worker-2.openshift.example.com        Ready    worker          3m27s   v1.16.2</code></pre>
</div>
</div>
</li>
</ol>
</div>
</div>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="ipi-install-upstream-appendix"><a class="link" href="#ipi-install-upstream-appendix">5. Appendix</a></h2>
<div class="sectionbody">
<div class="paragraph">
<p>In this section of the document, extra information is provided that is outside of the regular workflow.</p>
</div>
<div class="sect2">
<h3 id="ipi-install-upstream-troubleshooting"><a class="link" href="#ipi-install-upstream-troubleshooting">5.1. Troubleshooting</a></h3>
<div class="paragraph">
<p>Troubleshooting the installation is out of scope of the Deployment Guide. For more details on troubleshooting deployment, refer to our  <a href="../latest/Troubleshooting">Troubleshooting guide</a>.</p>
</div>
</div>
<div class="sect2">
<h3 id="DNS"><a class="link" href="#DNS">5.2. Creating DNS Records</a></h3>
<div class="paragraph">
<p>Two options are documented for configuring DNS records:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><a href="#creating-dns-records-on-a-dns-server-option1_ipi-install-expanding">On a DNS Server (Bind)</a></p>
</li>
<li>
<p><a href="#creating-dns-records-using-dnsmasq-option2_ipi-install-expanding">Using dnsmasq</a></p>
</li>
</ul>
</div>
<div class="sect3">
<h4 id="creating-dns-records-on-a-dns-server-option1_ipi-install-expanding"><a class="link" href="#creating-dns-records-on-a-dns-server-option1_ipi-install-expanding">5.2.1. Configuring Bind (Option 1)</a></h4>
<div class="paragraph">
<p>Use Option 1 if access to the appropriate DNS server for the baremetal network is accessible or a request
to your network admin to create the DNS records is an option.
If this is not an option, skip this section and go to section Create DNS records using dnsmasq (Option 2).</p>
</div>
<div class="paragraph">
<p>Create a subzone with the name of the cluster that is going to be used on your domain.
In our example, the domain used is <code>example.com</code> and the cluster name used is <code>openshift</code>.
Make sure to change these according to your environment specifics.</p>
</div>
<div class="olist arabic">
<div class="title">Procedure</div>
<ol class="arabic">
<li>
<p>Login to the DNS server using <code>ssh</code>.</p>
</li>
<li>
<p>Suspend updates to all dynamic zones: <code>rndc freeze</code>.</p>
</li>
<li>
<p>Edit <code>/var/named/dynamic/example.com</code>.</p>
<div class="listingblock">
<div class="content">
<pre class="nowrap">$ORIGIN openshift.example.com.
$TTL 300        ; 5 minutes
@  IN  SOA  dns1.example.com.  hostmaster.example.com. (
       2001062501  ; serial
       21600       ; refresh after 6 hours
       3600        ; retry after 1 hour
       604800      ; expire after 1 week
       86400 )     ; minimum TTL of 1 day
;
api                     A       &lt;api-ip&gt;
ns1                     A       &lt;dns-vip-ip&gt;
$ORIGIN apps.openshift.example.com.
*                       A       &lt;wildcard-ingress-lb-ip&gt;
$ORIGIN openshift.example.com.
provisioner             A       &lt;NIC2-ip-of-provision&gt;
openshift-master-0      A       &lt;NIC2-ip-of-openshift-master-0&gt;
openshift-master-1      A       &lt;NIC2-ip-of-openshift-master-1&gt;
openshift-master-2      A       &lt;NIC2-ip-of-openshift-master-2&gt;
openshift-worker-0      A       &lt;NIC2-ip-of-openshift-worker-0&gt;
openshift-worker-1      A       &lt;NIC2-ip-of-openshift-worker-1&gt;</pre>
</div>
</div>
</li>
<li>
<p>Increase the <code>serial</code> value by 1.</p>
</li>
<li>
<p>Edit <code>/var/named/dynamic/1.0.10.in-addr.arpa</code>.</p>
<div class="listingblock">
<div class="content">
<pre class="nowrap">$ORIGIN 1.0.10.in-addr.arpa.
$TTL 300
@  IN  SOA  dns1.example.com.  hostmaster.example.com. (
       2001062501  ; serial
       21600       ; refresh after 6 hours
       3600        ; retry after 1 hour
       604800      ; expire after 1 week
       86400 )     ; minimum TTL of 1 day
;
126 IN      PTR      provisioner.openshift.example.com.
127	IN        	PTR    	openshift-master-0.openshift.example.com.
128	IN        	PTR    	openshift-master-1.openshift.example.com.
129	IN 	        PTR   	openshift-master-2.openshift.example.com.
130	IN 	        PTR   	openshift-worker-0.openshift.example.com.
131	IN        	PTR    	openshift-worker-1.openshift.example.com.
132 IN      PTR     api.openshift.example.com.
133 IN      PTR     ns1.openshift.example.com.</pre>
</div>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
<div class="paragraph">
<p>In this example, the IP addresses 10.0.1.126-133 are pointed to the corresponding fully qualified domain name.</p>
</div>
</td>
</tr>
</table>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
<div class="paragraph">
<p>The filename <code>1.0.10.in-addr.arpa</code> is the reverse of the public CIDR example <code>10.0.1.0/24</code>.</p>
</div>
</td>
</tr>
</table>
</div>
</li>
<li>
<p>Increase the <code>serial</code> value by 1.</p>
</li>
<li>
<p>Enable updates to all dynamic zones and reload them: <code>rndc thaw</code>.</p>
</li>
</ol>
</div>
</div>
<div class="sect3">
<h4 id="creating-dns-records-using-dnsmasq-option2_ipi-install-expanding"><a class="link" href="#creating-dns-records-using-dnsmasq-option2_ipi-install-expanding">5.2.2. Configuring dnsmasq (Option 2)</a></h4>
<div class="paragraph">
<p>To create DNS records, open the <code>/etc/hosts</code> file and add the NIC2 (baremetal net) IP followed by the hostname.
In our example, the domain used is <code>example.com</code> and the cluster name used is <code>openshift</code>.
Make sure to change these according to your environment specifics.</p>
</div>
<div class="olist arabic">
<div class="title">Procedure</div>
<ol class="arabic">
<li>
<p>Edit <code>/etc/hosts</code> and add the NIC2 (baremetal net) IP followed by the hostname.</p>
<div class="listingblock">
<div class="content">
<pre class="nowrap">cat /etc/hosts
127.0.0.1   localhost localhost.localdomain localhost4 localhost4.localdomain4
::1         localhost localhost.localdomain localhost6 localhost6.localdomain6
&lt;NIC2-IP&gt; provisioner.openshift.example.com provisioner
&lt;NIC2-IP&gt; openshift-master-0.openshift.example.com openshift-master-0
&lt;NIC2-IP&gt; openshift-master-1.openshift.example.com openshift-master-1
&lt;NIC2-IP&gt; openshift-master-2.openshift.example.com openshift-master-2
&lt;NIC2-IP&gt; openshift-worker-0.openshift.example.com openshift-worker-0
&lt;NIC2-IP&gt; openshift-worker-1.openshift.example.com openshift-worker-1
&lt;API-IP&gt;  api.openshift.example.com api
&lt;DNS-VIP-IP&gt; ns1.openshift.example.com ns1</pre>
</div>
</div>
</li>
<li>
<p>Open the appropriate <code>firewalld</code> DNS service and reload the rules.</p>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight nowrap"><code data-lang="bash">systemctl restart firewalld
firewall-cmd <span class="nt">--add-service</span><span class="o">=</span>dns <span class="nt">--permanent</span>
firewall-cmd <span class="nt">--reload</span></code></pre>
</div>
</div>
</li>
</ol>
</div>
</div>
</div>
<div class="sect2">
<h3 id="DHCP"><a class="link" href="#DHCP">5.3. Creating DHCP reservations</a></h3>
<div class="paragraph">
<p>Two options are documented for configuring DHCP:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><a href="#creating-dhcp-reservations-option1_ipi-install-expanding">On dhcpd (Option 1)</a></p>
</li>
<li>
<p><a href="#creating-dhcp-reservations-using-dnsmasq-option2_ipi-install-expanding">Using dnsmasq (Option 2)</a></p>
</li>
</ul>
</div>
<div class="sect3">
<h4 id="creating-dhcp-reservations-option1_ipi-install-expanding"><a class="link" href="#creating-dhcp-reservations-option1_ipi-install-expanding">5.3.1. Configuring dhcpd (Option 1)</a></h4>
<div class="paragraph">
<p>Use Option 1 if access to the appropriate DHCP server for the baremetal network is accessible or a request
to your network admin to create the DHCP reservations is an option.
If this is not an option, skip this section and go to section Create DHCP records using dnsmasq (Option 2).</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Login to the DHCP server using <code>ssh</code>.</p>
</li>
<li>
<p>Edit <code>/etc/dhcp/dhcpd.hosts</code>.</p>
<div class="listingblock">
<div class="content">
<pre class="nowrap">host provisioner {
     option host-name "provisioner";
     hardware ethernet &lt;mac-address-of-NIC2&gt;;
     option domain-search "openshift.example.com";
     fixed-address &lt;ip-address-of-NIC2&gt;;
  }
host openshift-master-0 {
     option host-name "openshift-master-0";
     hardware ethernet &lt;mac-address-of-NIC2&gt;;
     option domain-search "openshift.example.com";
     fixed-address &lt;ip-address-of-NIC2&gt;;
  }

host openshift-master-1 {
     option host-name "openshift-master-1";
     hardware ethernet &lt;mac-address-of-NIC2&gt;;
     option domain-search "openshift.example.com";
     fixed-address &lt;ip-address-of-NIC2&gt;;
  }

host openshift-master-2 {
     option host-name "openshift-master-2";
     hardware ethernet &lt;mac-address-of-NIC2&gt;;
     option domain-search "openshift.example.com";
     fixed-address &lt;ip-address-of-NIC2&gt;;
  }
host openshift-worker-0 {
     option host-name "openshift-worker-0";
     hardware ethernet &lt;mac-address-of-NIC2&gt;;
     option domain-search "openshift.example.com";
     fixed-address &lt;ip-address-of-NIC2&gt;;
  }
host openshift-worker-1 {
     option host-name "openshift-worker-1";
     hardware ethernet &lt;mac-address-of-NIC2&gt;;
     option domain-search "openshift.example.com";
     fixed-address &lt;ip-address-of-NIC2&gt;;
  }</pre>
</div>
</div>
</li>
<li>
<p>Restart the <code>dhcpd</code> service.</p>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight nowrap"><code data-lang="bash">systemctl restart dhcpd</code></pre>
</div>
</div>
</li>
</ol>
</div>
</div>
<div class="sect3">
<h4 id="creating-dhcp-reservations-using-dnsmasq-option2_ipi-install-expanding"><a class="link" href="#creating-dhcp-reservations-using-dnsmasq-option2_ipi-install-expanding">5.3.2. Configuring dnsmasq (Option 2)</a></h4>
<div class="paragraph">
<p>Set up <code>dnsmasq</code> on a server that can access the baremetal network.</p>
</div>
<div class="olist arabic">
<div class="title">Procedure</div>
<ol class="arabic">
<li>
<p>Install <code>dnsmasq</code>.</p>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight nowrap"><code data-lang="bash">dnf <span class="nb">install</span> <span class="nt">-y</span> dnsmasq</code></pre>
</div>
</div>
</li>
<li>
<p>Change to the <code>/etc/dnsmasq.d</code> directory.</p>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight nowrap"><code data-lang="bash"><span class="nb">cd</span> /etc/dnsmasq.d</code></pre>
</div>
</div>
</li>
<li>
<p>Create a file that reflects your OpenShift cluster appended by <code>.dns</code>.</p>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight nowrap"><code data-lang="bash"><span class="nb">touch</span> &lt;filename&gt;.dns</code></pre>
</div>
</div>
</li>
<li>
<p>Open the appropriate <code>firewalld</code> DHCP service.</p>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight nowrap"><code data-lang="bash">systemctl restart firewalld
firewall-cmd <span class="nt">--add-service</span><span class="o">=</span>dhcp <span class="nt">--permanent</span>
firewall-cmd <span class="nt">--reload</span></code></pre>
</div>
</div>
</li>
<li>
<p>Define DNS configuration file</p>
<h6 id="_ipv4" class="discrete">IPv4</h6>
<div class="paragraph">
<p>Here is an example of the <code>.dns</code> file for IPv4.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="nowrap">domain-needed
bind-dynamic
bogus-priv
domain=openshift.example.com
dhcp-range=&lt;baremetal-net-starting-ip,baremetal-net-ending-ip&gt;
#dhcp-range=10.0.1.4,10.0.14
dhcp-option=3,&lt;baremetal-net-gateway-ip&gt;
#dhcp-option=3,10.0.1.254
resolv-file=/etc/resolv.conf.upstream
interface=&lt;nic-with-access-to-baremetal-net&gt;
#interface=em2
server=&lt;ip-of-existing-server-on-baremetal-net&gt;


#Wildcard for apps -- make changes to cluster-name (openshift) and domain (example.com)
address=/.apps.openshift.example.com/&lt;wildcard-ingress-lb-ip&gt;

#Static IPs for Masters
dhcp-host=&lt;NIC2-mac-address&gt;,provisioner.openshift.example.com,&lt;ip-of-provisioner&gt;
dhcp-host=&lt;NIC2-mac-address&gt;,openshift-master-0.openshift.example.com,&lt;ip-of-openshift-master-0&gt;
dhcp-host=&lt;NIC2-mac-address&gt;,openshift-master-1.openshift.example.com,&lt;ip-of-openshift-master-1&gt;
dhcp-host=&lt;NIC2-mac-address&gt;,openshift-master-2.openshift.example.com,&lt;ip-of-openshift-master-2&gt;
dhcp-host=&lt;NIC2-mac-address&gt;,openshift-worker-0.openshift.example.com,&lt;ip-of-openshift-worker-0&gt;
dhcp-host=&lt;NIC2-mac-address&gt;,openshift-worker-1.openshift.example.com,&lt;ip-of-openshift-worker-1&gt;</pre>
</div>
</div>
<h6 id="_ipv6" class="discrete">IPv6</h6>
<div class="paragraph">
<p>Here is an example of the <code>.dns</code> file for IPv6.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="nowrap">strict-order
bind-dynamic
bogus-priv
dhcp-authoritative
dhcp-range=baremetal,&lt;baremetal-IPv6-dhcp-range-start&gt;,&lt;baremetal-IPv6-dhcp-range-end&gt;,&lt;range-prefix&gt;
dhcp-option=baremetal,option6:dns-server,[&lt;IPv6-DNS-Server&gt;]

resolv-file=/etc/resolv.conf.upstream
except-interface=lo
dhcp-lease-max=81
log-dhcp

domain=openshift.example.com,&lt;baremetal-IPv6-cidr&gt;,local

# static host-records
address=/.apps.openshift.example.com/&lt;wildcard-ingress-lb-ip&gt;
host-record=api.openshift.example.com,&lt;api-ip&gt;
host-record=ns1.openshift.example.com,&lt;dns-ip&gt;
host-record=openshift-master-0.openshift.example.com,&lt;ip-of-openshift-master-0&gt;
host-record=openshift-master-1.openshift.example.com,&lt;ip-of-openshift-master-1&gt;
host-record=openshift-master-2.openshift.example.com,&lt;ip-of-openshift-master-1&gt;
# Registry
host-record=registry.openshift.example.com,&lt;ip-of-registry-server&gt;

#Static IPs for Masters
dhcp-host=&lt;baremetal-nic-duid&gt;,openshift-master-0.openshift.example.com,&lt;ip-of-openshift-master-0&gt;
dhcp-host=&lt;baremetal-nic-duid&gt;,openshift-master-1.openshift.example.com,&lt;ip-of-openshift-master-1&gt;
dhcp-host=&lt;baremetal-nic-duid&gt;,openshift-master-2.openshift.example.com,&lt;ip-of-openshift-master-2&gt;</pre>
</div>
</div>
</li>
<li>
<p>Create the <code>resolv.conf.upstream</code> file to provide DNS fowarding to an existing DNS server for resolution
to the outside world.</p>
<div class="listingblock">
<div class="content">
<pre class="nowrap">search &lt;domain.com&gt;
nameserver &lt;ip-of-my-existing-dns-nameserver&gt;</pre>
</div>
</div>
</li>
<li>
<p>Restart the <code>dnsmasq</code> service.</p>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight nowrap"><code data-lang="bash">systemctl restart dnsmasq</code></pre>
</div>
</div>
</li>
<li>
<p>Verify the <code>dnsmasq</code> service is running.</p>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight nowrap"><code data-lang="bash">systemctl status dnsmasq</code></pre>
</div>
</div>
</li>
</ol>
</div>
</div>
</div>
</div>
</div>
</div>
<div id="footnotes">
<hr/>
<div class="footnote" id="_footnotedef_1">
<a href="#_footnoteref_1">1</a>. Stateless Address AutoConfiguration
</div>
</div>
<div id="footer">
<div id="footer-text">
Last updated 2025-02-28 19:02:55 -0600
</div>
</div>
</body>
</html>